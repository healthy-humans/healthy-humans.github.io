var Li=Object.defineProperty;var Vi=(t,e,n)=>e in t?Li(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var be=(t,e,n)=>(Vi(t,typeof e!="symbol"?e+"":e,n),n);const zi=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}};zi();function U(){}function Wi(t,e){for(const n in e)t[n]=e[n];return t}function Ui(t){return t&&typeof t=="object"&&typeof t.then=="function"}function Zr(t){return t()}function Dr(){return Object.create(null)}function Je(t){t.forEach(Zr)}function Hi(t){return typeof t=="function"}function mt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Yi(t){return Object.keys(t).length===0}function Gi(t,e,n,r){if(t){const i=ei(t,e,n,r);return t[0](i)}}function ei(t,e,n,r){return t[1]&&r?Wi(n.ctx.slice(),t[1](r(e))):n.ctx}function Qi(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const a=[],o=Math.max(e.dirty.length,i.length);for(let u=0;u<o;u+=1)a[u]=e.dirty[u]|i[u];return a}return e.dirty|i}return e.dirty}function Xi(t,e,n,r,i,a){if(i){const o=ei(e,n,r,a);t.p(o,i)}}function Ji(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function d(t,e){t.appendChild(e)}function z(t,e,n){t.insertBefore(e,n||null)}function L(t){t.parentNode.removeChild(t)}function qi(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function A(t){return document.createElement(t)}function F(t){return document.createTextNode(t)}function D(){return F(" ")}function cn(){return F("")}function je(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function ti(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Vt(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function C(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Zi(t){return Array.from(t.childNodes)}function tt(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Ve(t,e,n){t.classList[n?"add":"remove"](e)}function ea(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}let gt;function Se(t){gt=t}function ni(){if(!gt)throw new Error("Function called outside component initialization");return gt}function ta(){const t=ni();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const a=ea(e,n,{cancelable:r});return i.slice().forEach(o=>{o.call(t,a)}),!a.defaultPrevented}return!0}}const ft=[],Pr=[],zt=[],Rr=[],na=Promise.resolve();let xn=!1;function ra(){xn||(xn=!0,na.then(Xn))}function Cn(t){zt.push(t)}const yn=new Set;let Mt=0;function Xn(){const t=gt;do{for(;Mt<ft.length;){const e=ft[Mt];Mt++,Se(e),ia(e.$$)}for(Se(null),ft.length=0,Mt=0;Pr.length;)Pr.pop()();for(let e=0;e<zt.length;e+=1){const n=zt[e];yn.has(n)||(yn.add(n),n())}zt.length=0}while(ft.length);for(;Rr.length;)Rr.pop()();xn=!1,yn.clear(),Se(t)}function ia(t){if(t.fragment!==null){t.update(),Je(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Cn)}}const Wt=new Set;let Ue;function Jt(){Ue={r:0,c:[],p:Ue}}function qt(){Ue.r||Je(Ue.c),Ue=Ue.p}function ce(t,e){t&&t.i&&(Wt.delete(t),t.i(e))}function me(t,e,n,r){if(t&&t.o){if(Wt.has(t))return;Wt.add(t),Ue.c.push(()=>{Wt.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function Jn(t,e){const n=e.token={};function r(i,a,o,u){if(e.token!==n)return;e.resolved=u;let s=e.ctx;o!==void 0&&(s=s.slice(),s[o]=u);const l=i&&(e.current=i)(s);let h=!1;e.block&&(e.blocks?e.blocks.forEach((c,p)=>{p!==a&&c&&(Jt(),me(c,1,1,()=>{e.blocks[p]===c&&(e.blocks[p]=null)}),qt())}):e.block.d(1),l.c(),ce(l,1),l.m(e.mount(),e.anchor),h=!0),e.block=l,e.blocks&&(e.blocks[a]=l),h&&Xn()}if(Ui(t)){const i=ni();if(t.then(a=>{Se(i),r(e.then,1,e.value,a),Se(null)},a=>{if(Se(i),r(e.catch,2,e.error,a),Se(null),!e.hasCatch)throw a}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function qn(t,e,n){const r=e.slice(),{resolved:i}=t;t.current===t.then&&(r[t.value]=i),t.current===t.catch&&(r[t.error]=i),t.block.p(r,n)}function Zt(t){t&&t.c()}function bt(t,e,n,r){const{fragment:i,on_mount:a,on_destroy:o,after_update:u}=t.$$;i&&i.m(e,n),r||Cn(()=>{const s=a.map(Zr).filter(Hi);o?o.push(...s):Je(s),t.$$.on_mount=[]}),u.forEach(Cn)}function _t(t,e){const n=t.$$;n.fragment!==null&&(Je(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function aa(t,e){t.$$.dirty[0]===-1&&(ft.push(t),ra(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Zn(t,e,n,r,i,a,o,u=[-1]){const s=gt;Se(t);const l=t.$$={fragment:null,ctx:null,props:a,update:U,not_equal:i,bound:Dr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:Dr(),dirty:u,skip_bound:!1,root:e.target||s.$$.root};o&&o(l.root);let h=!1;if(l.ctx=n?n(t,e.props||{},(c,p,...g)=>{const v=g.length?g[0]:p;return l.ctx&&i(l.ctx[c],l.ctx[c]=v)&&(!l.skip_bound&&l.bound[c]&&l.bound[c](v),h&&aa(t,c)),p}):[],l.update(),h=!0,Je(l.before_update),l.fragment=r?r(l.ctx):!1,e.target){if(e.hydrate){const c=Zi(e.target);l.fragment&&l.fragment.l(c),c.forEach(L)}else l.fragment&&l.fragment.c();e.intro&&ce(t.$$.fragment),bt(t,e.target,e.anchor,e.customElement),Xn()}Se(s)}class er{$destroy(){_t(this,1),this.$destroy=U}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!Yi(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var H=function(){return H=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},H.apply(this,arguments)};function An(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var ee=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,ie=Object.keys,le=Array.isArray;typeof Promise!="undefined"&&!ee.Promise&&(ee.Promise=Promise);function de(t,e){return typeof e!="object"||ie(e).forEach(function(n){t[n]=e[n]}),t}var wt=Object.getPrototypeOf,oa={}.hasOwnProperty;function ge(t,e){return oa.call(t,e)}function it(t,e){typeof e=="function"&&(e=e(wt(t))),(typeof Reflect=="undefined"?ie:Reflect.ownKeys)(e).forEach(function(n){De(t,n,e[n])})}var ri=Object.defineProperty;function De(t,e,n,r){ri(t,e,de(n&&ge(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function at(t){return{from:function(e){return t.prototype=Object.create(e.prototype),De(t.prototype,"constructor",t),{extend:it.bind(null,t.prototype)}}}}var ua=Object.getOwnPropertyDescriptor;function tr(t,e){var n=ua(t,e),r;return n||(r=wt(t))&&tr(r,e)}var sa=[].slice;function fn(t,e,n){return sa.call(t,e,n)}function ii(t,e){return e(t)}function dt(t){if(!t)throw new Error("Assertion Failed")}function ai(t){ee.setImmediate?setImmediate(t):setTimeout(t,0)}function oi(t,e){return t.reduce(function(n,r,i){var a=e(r,i);return a&&(n[a[0]]=a[1]),n},{})}function la(t,e,n){try{t.apply(null,n)}catch(r){e&&e(r)}}function Te(t,e){if(ge(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var a=Te(t,e[r]);n.push(a)}return n}var o=e.indexOf(".");if(o!==-1){var u=t[e.substr(0,o)];return u===void 0?void 0:Te(u,e.substr(o+1))}}function _e(t,e,n){if(!(!t||e===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){dt(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)_e(t,e[r],n[r])}else{var a=e.indexOf(".");if(a!==-1){var o=e.substr(0,a),u=e.substr(a+1);if(u==="")n===void 0?le(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=n;else{var s=t[o];(!s||!ge(t,o))&&(s=t[o]={}),_e(s,u,n)}}else n===void 0?le(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function ca(t,e){typeof e=="string"?_e(t,e,void 0):"length"in e&&[].map.call(e,function(n){_e(t,n,void 0)})}function ui(t){var e={};for(var n in t)ge(t,n)&&(e[n]=t[n]);return e}var fa=[].concat;function si(t){return fa.apply([],t)}var li="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(si([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return ee[t]}),da=li.map(function(t){return ee[t]});oi(li,function(t){return[t,!0]});var Me=null;function St(t){Me=typeof WeakMap!="undefined"&&new WeakMap;var e=In(t);return Me=null,e}function In(t){if(!t||typeof t!="object")return t;var e=Me&&Me.get(t);if(e)return e;if(le(t)){e=[],Me&&Me.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(In(t[n]))}else if(da.indexOf(t.constructor)>=0)e=t;else{var i=wt(t);e=i===Object.prototype?{}:Object.create(i),Me&&Me.set(t,e);for(var a in t)ge(t,a)&&(e[a]=In(t[a]))}return e}var ha={}.toString;function Sn(t){return ha.call(t).slice(8,-1)}var Kn=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",pa=typeof Kn=="symbol"?function(t){var e;return t!=null&&(e=t[Kn])&&e.apply(t)}:function(){return null},nt={};function Ie(t){var e,n,r,i;if(arguments.length===1){if(le(t))return t.slice();if(this===nt&&typeof t=="string")return[t];if(i=pa(t)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(t==null)return[t];if(e=t.length,typeof e=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var nr=typeof Symbol!="undefined"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ee=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ci(t,e){Ee=t,fi=e}var fi=function(){return!0},va=!new Error("").stack;function qe(){if(va)try{throw qe.arguments,new Error}catch(t){return t}return new Error}function Tn(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(fi).map(function(r){return`
`+r}).join("")):""}var ya=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],di=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],rr=ya.concat(di),ma={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ot(t,e){this._e=qe(),this.name=t,this.message=e}at(ot).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Tn(this._e,2))}},toString:function(){return this.name+": "+this.message}});function hi(t,e){return t+". Errors: "+Object.keys(e).map(function(n){return e[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function en(t,e,n,r){this._e=qe(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=hi(t,e)}at(en).from(ot);function pt(t,e){this._e=qe(),this.name="BulkError",this.failures=Object.keys(e).map(function(n){return e[n]}),this.failuresByPos=e,this.message=hi(t,e)}at(pt).from(ot);var ir=rr.reduce(function(t,e){return t[e]=e+"Error",t},{}),ga=ot,j=rr.reduce(function(t,e){var n=e+"Error";function r(i,a){this._e=qe(),this.name=n,i?typeof i=="string"?(this.message=""+i+(a?`
 `+a:""),this.inner=a||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=ma[e]||n,this.inner=null)}return at(r).from(ga),t[e]=r,t},{});j.Syntax=SyntaxError;j.Type=TypeError;j.Range=RangeError;var Br=di.reduce(function(t,e){return t[e+"Error"]=j[e],t},{});function ba(t,e){if(!t||t instanceof ot||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Br[t.name])return t;var n=new Br[t.name](e||t.message,t);return"stack"in t&&De(n,"stack",{get:function(){return this.inner.stack}}),n}var dn=rr.reduce(function(t,e){return["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=j[e]),t},{});dn.ModifyError=en;dn.DexieError=ot;dn.BulkError=pt;function X(){}function Kt(t){return t}function _a(t,e){return t==null||t===Kt?e:function(n){return e(t(n))}}function Qe(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function wa(t,e){return t===X?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Qe(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Qe(i,this.onerror):i),a!==void 0?a:n}}function ka(t,e){return t===X?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Qe(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Qe(r,this.onerror):r)}}function Ea(t,e){return t===X?e:function(n){var r=t.apply(this,arguments);de(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Qe(i,this.onsuccess):i),a&&(this.onerror=this.onerror?Qe(a,this.onerror):a),r===void 0?o===void 0?void 0:o:de(r,o)}}function xa(t,e){return t===X?e:function(){return e.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function ar(t,e){return t===X?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return e.apply(r,a)})}return e.apply(this,arguments)}}var kt={},Ca=100,Aa=20,pi=100,or=typeof Promise=="undefined"?[]:function(){var t=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[t,wt(t),t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,wt(e),t]}(),Dn=or[0],tn=or[1],Pn=or[2],vi=tn&&tn.then,Ut=Dn&&Dn.constructor,ur=!!Pn,Rn=!1,Ia=Pn?function(){Pn.then(Ft)}:ee.setImmediate?setImmediate.bind(null,Ft):ee.MutationObserver?function(){var t=document.createElement("div");new MutationObserver(function(){Ft(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(Ft,0)},Et=function(t,e){ht.push([t,e]),nn&&(Ia(),nn=!1)},Bn=!0,nn=!0,Ye=[],Ht=[],On=null,Mn=Kt,rt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Fr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(t){try{Fr(t[0],t[1])}catch{}})}},O=rt,ht=[],Ge=0,Yt=[];function T(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=X,this._lib=!1;var e=this._PSD=O;if(Ee&&(this._stackHolder=qe(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==kt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&jn(this,this._value);return}this._state=null,this._value=null,++e.ref,mi(this,t)}var Fn={get:function(){var t=O,e=rn;function n(r,i){var a=this,o=!t.global&&(t!==O||e!==rn),u=o&&!Pe(),s=new T(function(l,h){sr(a,new yi(on(r,t,o,u),on(i,t,o,u),l,h,t))});return Ee&&_i(s,this),s}return n.prototype=kt,n},set:function(t){De(this,"then",t&&t.prototype===kt?Fn:{get:function(){return t},set:Fn.set})}};it(T.prototype,{then:Fn,_then:function(t,e){sr(this,new yi(null,null,t,e,O))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,function(r){return r instanceof e?n(r):Gt(r)}):this.then(null,function(r){return r&&r.name===e?n(r):Gt(r)})},finally:function(t){return this.then(function(e){return t(),e},function(e){return t(),Gt(e)})},stack:{get:function(){if(this._stack)return this._stack;try{Rn=!0;var t=bi(this,[],Aa),e=t.join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{Rn=!1}}},timeout:function(t,e){var n=this;return t<1/0?new T(function(r,i){var a=setTimeout(function(){return i(new j.Timeout(e))},t);n.then(r,i).finally(clearTimeout.bind(null,a))}):this}});typeof Symbol!="undefined"&&Symbol.toStringTag&&De(T.prototype,Symbol.toStringTag,"Dexie.Promise");rt.env=wi();function yi(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}it(T,{all:function(){var t=Ie.apply(null,arguments).map(an);return new T(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach(function(i,a){return T.resolve(i).then(function(o){t[a]=o,--r||e(t)},n)})})},resolve:function(t){if(t instanceof T)return t;if(t&&typeof t.then=="function")return new T(function(n,r){t.then(n,r)});var e=new T(kt,!0,t);return _i(e,On),e},reject:Gt,race:function(){var t=Ie.apply(null,arguments).map(an);return new T(function(e,n){t.map(function(r){return T.resolve(r).then(e,n)})})},PSD:{get:function(){return O},set:function(t){return O=t}},totalEchoes:{get:function(){return rn}},newPSD:Ne,usePSD:st,scheduler:{get:function(){return Et},set:function(t){Et=t}},rejectionMapper:{get:function(){return Mn},set:function(t){Mn=t}},follow:function(t,e){return new T(function(n,r){return Ne(function(i,a){var o=O;o.unhandleds=[],o.onunhandled=a,o.finalize=Qe(function(){var u=this;Ka(function(){u.unhandleds.length===0?i():a(u.unhandleds[0])})},o.finalize),t()},e,n,r)})}});Ut&&(Ut.allSettled&&De(T,"allSettled",function(){var t=Ie.apply(null,arguments).map(an);return new T(function(e){t.length===0&&e([]);var n=t.length,r=new Array(n);t.forEach(function(i,a){return T.resolve(i).then(function(o){return r[a]={status:"fulfilled",value:o}},function(o){return r[a]={status:"rejected",reason:o}}).then(function(){return--n||e(r)})})})}),Ut.any&&typeof AggregateError!="undefined"&&De(T,"any",function(){var t=Ie.apply(null,arguments).map(an);return new T(function(e,n){t.length===0&&n(new AggregateError([]));var r=t.length,i=new Array(r);t.forEach(function(a,o){return T.resolve(a).then(function(u){return e(u)},function(u){i[o]=u,--r||n(new AggregateError(i))})})})}));function mi(t,e){try{e(function(n){if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Tt();n&&typeof n.then=="function"?mi(t,function(i,a){n instanceof T?n._then(i,a):n.then(i,a)}):(t._state=!0,t._value=n,gi(t)),r&&Dt()}},jn.bind(null,t))}catch(n){jn(t,n)}}function jn(t,e){if(Ht.push(e),t._state===null){var n=t._lib&&Tt();e=Mn(e),t._state=!1,t._value=e,Ee&&e!==null&&typeof e=="object"&&!e._promise&&la(function(){var r=tr(e,"stack");e._promise=t,De(e,"stack",{get:function(){return Rn?r&&(r.get?r.get.apply(e):r.value):t.stack}})}),Ta(t),gi(t),n&&Dt()}}function gi(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)sr(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),Ge===0&&(++Ge,Et(function(){--Ge===0&&lr()},[]))}function sr(t,e){if(t._state===null){t._listeners.push(e);return}var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Ge,Et(Sa,[n,t,e])}function Sa(t,e,n){try{On=e;var r,i=e._value;e._state?r=t(i):(Ht.length&&(Ht=[]),r=t(i),Ht.indexOf(i)===-1&&Da(e)),n.resolve(r)}catch(a){n.reject(a)}finally{On=null,--Ge===0&&lr(),--n.psd.ref||n.psd.finalize()}}function bi(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i=t._value,a,o;i!=null?(a=i.name||"Error",o=i.message||i,r=Tn(i,0)):(a=i,o=""),e.push(a+(o?": "+o:"")+r)}return Ee&&(r=Tn(t._stackHolder,2),r&&e.indexOf(r)===-1&&e.push(r),t._prev&&bi(t._prev,e,n)),e}function _i(t,e){var n=e?e._numPrev+1:0;n<Ca&&(t._prev=e,t._numPrev=n)}function Ft(){Tt()&&Dt()}function Tt(){var t=Bn;return Bn=!1,nn=!1,t}function Dt(){var t,e,n;do for(;ht.length>0;)for(t=ht,ht=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(ht.length>0);Bn=!0,nn=!0}function lr(){var t=Ye;Ye=[],t.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var e=Yt.slice(0),n=e.length;n;)e[--n]()}function Ka(t){function e(){t(),Yt.splice(Yt.indexOf(e),1)}Yt.push(e),++Ge,Et(function(){--Ge===0&&lr()},[])}function Ta(t){Ye.some(function(e){return e._value===t._value})||Ye.push(t)}function Da(t){for(var e=Ye.length;e;)if(Ye[--e]._value===t._value){Ye.splice(e,1);return}}function Gt(t){return new T(kt,!1,t)}function te(t,e){var n=O;return function(){var r=Tt(),i=O;try{return $e(n,!0),t.apply(this,arguments)}catch(a){e&&e(a)}finally{$e(i,!1),r&&Dt()}}}var se={awaits:0,echoes:0,id:0},Pa=0,Qt=[],mn=0,rn=0,Ra=0;function Ne(t,e,n,r){var i=O,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++Ra;var o=rt.env;a.env=ur?{Promise:T,PromiseProp:{value:T,configurable:!0,writable:!0},all:T.all,race:T.race,allSettled:T.allSettled,any:T.any,resolve:T.resolve,reject:T.reject,nthen:Or(o.nthen,a),gthen:Or(o.gthen,a)}:{},e&&de(a,e),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=st(a,t,n,r);return a.ref===0&&a.finalize(),u}function ut(){return se.id||(se.id=++Pa),++se.awaits,se.echoes+=pi,se.id}function Pe(){return se.awaits?(--se.awaits===0&&(se.id=0),se.echoes=se.awaits*pi,!0):!1}(""+vi).indexOf("[native code]")===-1&&(ut=Pe=X);function an(t){return se.echoes&&t&&t.constructor===Ut?(ut(),t.then(function(e){return Pe(),e},function(e){return Pe(),oe(e)})):t}function Ba(t){++rn,(!se.echoes||--se.echoes===0)&&(se.echoes=se.id=0),Qt.push(O),$e(t,!0)}function Oa(){var t=Qt[Qt.length-1];Qt.pop(),$e(t,!1)}function $e(t,e){var n=O;if((e?se.echoes&&(!mn++||t!==O):mn&&(!--mn||t!==O))&&ki(e?Ba.bind(null,t):Oa),t!==O&&(O=t,n===rt&&(rt.env=wi()),ur)){var r=rt.env.Promise,i=t.env;tn.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(ee,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function wi(){var t=ee.Promise;return ur?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(ee,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:tn.then,gthen:t.prototype.then}:{}}function st(t,e,n,r,i){var a=O;try{return $e(t,!0),e(n,r,i)}finally{$e(a,!1)}}function ki(t){vi.call(Dn,t)}function on(t,e,n,r){return typeof t!="function"?t:function(){var i=O;n&&ut(),$e(e,!0);try{return t.apply(this,arguments)}finally{$e(i,!1),r&&ki(Pe)}}}function Or(t,e){return function(n,r){return t.call(this,on(n,e),on(r,e))}}var Mr="unhandledrejection";function Fr(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(ee.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Mr,!0,!0),de(r,i)):ee.CustomEvent&&(r=new CustomEvent(Mr,{detail:i}),de(r,i)),r&&ee.dispatchEvent&&(dispatchEvent(r),!ee.PromiseRejectionEvent&&ee.onunhandledrejection))try{ee.onunhandledrejection(r)}catch{}Ee&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(t.stack||t))}catch{}}var oe=T.reject;function Nn(t,e,n,r){if(!t.idbdb||!t._state.openComplete&&!O.letThrough&&!t._vip){if(t._state.openComplete)return oe(new j.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return oe(new j.DatabaseClosed);t.open().catch(X)}return t._state.dbReadyPromise.then(function(){return Nn(t,e,n,r)})}else{var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(a){return a.name===ir.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(function(){return Nn(t,e,n,r)})):oe(a)}return i._promise(e,function(a,o){return Ne(function(){return O.trans=i,r(a,o,i)})}).then(function(a){return i._completion.then(function(){return a})})}}var jr="3.2.2",He=String.fromCharCode(65535),$n=-1/0,Ce="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ei="String expected.",vt=[],hn=typeof navigator!="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Ma=hn,Fa=hn,xi=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)},pn="__dbnames",gn="readonly",bn="readwrite";function Xe(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var Ci={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function jt(t){return typeof t=="string"&&!/\./.test(t)?function(e){return e[t]===void 0&&t in e&&(e=St(e),delete e[t]),e}:function(e){return e}}var ja=function(){function t(){}return t.prototype._trans=function(e,n,r){var i=this._tx||O.trans,a=this.name;function o(s,l,h){if(!h.schema[a])throw new j.NotFound("Table "+a+" not part of transaction");return n(h.idbtrans,h)}var u=Tt();try{return i&&i.db===this.db?i===O.trans?i._promise(e,o,r):Ne(function(){return i._promise(e,o,r)},{trans:i,transless:O.transless||O}):Nn(this.db,e,[this.name],o)}finally{u&&Dt()}},t.prototype.get=function(e,n){var r=this;return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:e}).then(function(a){return r.hook.reading.fire(a)})}).then(n)},t.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(le(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var n=ie(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(h){return h.compound&&n.every(function(c){return h.keyPath.indexOf(c)>=0})&&h.keyPath.every(function(c){return n.indexOf(c)>=0})})[0];if(r&&this.db._maxKey!==He)return this.where(r.name).equals(r.keyPath.map(function(h){return e[h]}));!r&&Ee&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,a=this.db._deps.indexedDB;function o(h,c){try{return a.cmp(h,c)===0}catch{return!1}}var u=n.reduce(function(h,c){var p=h[0],g=h[1],v=i[c],f=e[c];return[p||v,p||!v?Xe(g,v&&v.multi?function(y){var k=Te(y,c);return le(k)&&k.some(function(_){return o(f,_)})}:function(y){return o(f,Te(y,c))}):g]},[null,null]),s=u[0],l=u[1];return s?this.where(s.name).equals(e[s.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")},t.prototype.filter=function(e){return this.toCollection().and(e)},t.prototype.count=function(e){return this.toCollection().count(e)},t.prototype.offset=function(e){return this.toCollection().offset(e)},t.prototype.limit=function(e){return this.toCollection().limit(e)},t.prototype.each=function(e){return this.toCollection().each(e)},t.prototype.toArray=function(e){return this.toCollection().toArray(e)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,le(e)?"["+e.join("+")+"]":e))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(e){this.schema.mappedClass=e;var n=function(r){if(!r)return r;var i=Object.create(e.prototype);for(var a in r)if(ge(r,a))try{i[a]=r[a]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e},t.prototype.defineClass=function(){function e(n){de(this,n)}return this.mapToClass(e)},t.prototype.add=function(e,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,u=e;return o&&a&&(u=jt(o)(e)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[u]})}).then(function(s){return s.numFailures?T.reject(s.failures[0]):s.lastResult}).then(function(s){if(o)try{_e(e,o,s)}catch{}return s})},t.prototype.update=function(e,n){if(typeof e=="object"&&!le(e)){var r=Te(e,this.schema.primKey.keyPath);if(r===void 0)return oe(new j.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?ie(n).forEach(function(i){_e(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(e).modify(n)},t.prototype.put=function(e,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,u=e;return o&&a&&(u=jt(o)(e)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"put",values:[u],keys:n!=null?[n]:null})}).then(function(s){return s.numFailures?T.reject(s.failures[0]):s.lastResult}).then(function(s){if(o)try{_e(e,o,s)}catch{}return s})},t.prototype.delete=function(e){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[e]})}).then(function(r){return r.numFailures?T.reject(r.failures[0]):void 0})},t.prototype.clear=function(){var e=this;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"deleteRange",range:Ci})}).then(function(n){return n.numFailures?T.reject(n.failures[0]):void 0})},t.prototype.bulkGet=function(e){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:e,trans:r}).then(function(i){return i.map(function(a){return n.hook.reading.fire(a)})})})},t.prototype.bulkAdd=function(e,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,l=s.auto,h=s.keyPath;if(h&&a)throw new j.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new j.InvalidArgument("Arguments objects and keys must have the same length");var c=e.length,p=h&&l?e.map(jt(h)):e;return i.core.mutate({trans:u,type:"add",keys:a,values:p,wantResults:o}).then(function(g){var v=g.numFailures,f=g.results,y=g.lastResult,k=g.failures,_=o?f:y;if(v===0)return _;throw new pt(i.name+".bulkAdd(): "+v+" of "+c+" operations failed",k)})})},t.prototype.bulkPut=function(e,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,l=s.auto,h=s.keyPath;if(h&&a)throw new j.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new j.InvalidArgument("Arguments objects and keys must have the same length");var c=e.length,p=h&&l?e.map(jt(h)):e;return i.core.mutate({trans:u,type:"put",keys:a,values:p,wantResults:o}).then(function(g){var v=g.numFailures,f=g.results,y=g.lastResult,k=g.failures,_=o?f:y;if(v===0)return _;throw new pt(i.name+".bulkPut(): "+v+" of "+c+" operations failed",k)})})},t.prototype.bulkDelete=function(e){var n=this,r=e.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:e})}).then(function(i){var a=i.numFailures,o=i.lastResult,u=i.failures;if(a===0)return o;throw new pt(n.name+".bulkDelete(): "+a+" of "+r+" operations failed",u)})},t}();function Pt(t){var e={},n=function(u,s){if(s){for(var l=arguments.length,h=new Array(l-1);--l;)h[l-1]=arguments[l];return e[u].subscribe.apply(null,h),t}else if(typeof u=="string")return e[u]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(u,s,l){if(typeof u=="object")return o(u);s||(s=xa),l||(l=X);var h={subscribers:[],fire:l,subscribe:function(c){h.subscribers.indexOf(c)===-1&&(h.subscribers.push(c),h.fire=s(h.fire,c))},unsubscribe:function(c){h.subscribers=h.subscribers.filter(function(p){return p!==c}),h.fire=h.subscribers.reduce(s,l)}};return e[u]=n[u]=h,h}function o(u){ie(u).forEach(function(s){var l=u[s];if(le(l))a(s,u[s][0],u[s][1]);else if(l==="asap")var h=a(s,Kt,function(){for(var p=arguments.length,g=new Array(p);p--;)g[p]=arguments[p];h.subscribers.forEach(function(v){ai(function(){v.apply(null,g)})})});else throw new j.InvalidArgument("Invalid event config")})}}function Rt(t,e){return at(e).from({prototype:t}),e}function Na(t){return Rt(ja.prototype,function(n,r,i){this.db=t,this._tx=i,this.name=n,this.schema=r,this.hook=t._allTables[n]?t._allTables[n].hook:Pt(null,{creating:[wa,X],reading:[_a,Kt],updating:[Ea,X],deleting:[ka,X]})})}function Ze(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function _n(t,e){t.filter=Xe(t.filter,e)}function wn(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return Xe(r(),e())}:e,t.justLimit=n&&!r}function $a(t,e){t.isMatch=Xe(t.isMatch,e)}function Xt(t,e){if(t.isPrimKey)return e.primaryKey;var n=e.getIndexByKeyPath(t.index);if(!n)throw new j.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Nr(t,e,n){var r=Xt(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function Nt(t,e,n,r){var i=t.replayFilter?Xe(t.filter,t.replayFilter()):t.filter;if(t.or){var a={},o=function(u,s,l){if(!i||i(s,l,function(p){return s.stop(p)},function(p){return s.fail(p)})){var h=s.primaryKey,c=""+h;c==="[object ArrayBuffer]"&&(c=""+new Uint8Array(h)),ge(a,c)||(a[c]=!0,e(u,s,l))}};return Promise.all([t.or._iterate(o,n),$r(Nr(t,r,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}else return $r(Nr(t,r,n),Xe(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function $r(t,e,n,r){var i=r?function(o,u,s){return n(r(o),u,s)}:n,a=te(i);return t.then(function(o){if(o)return o.start(function(){var u=function(){return o.continue()};(!e||e(o,function(s){return u=s},function(s){o.stop(s),u=X},function(s){o.fail(s),u=X}))&&a(o.value,o,function(s){return u=s}),u()})})}function fe(t,e){try{var n=Lr(t),r=Lr(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return Va(Vr(t),Vr(e));case"Array":return La(t,e)}}catch{}return NaN}function La(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,a=0;a<i;++a){var o=fe(t[a],e[a]);if(o!==0)return o}return n===r?0:n<r?-1:1}function Va(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,a=0;a<i;++a)if(t[a]!==e[a])return t[a]<e[a]?-1:1;return n===r?0:n<r?-1:1}function Lr(t){var e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";var n=Sn(t);return n==="ArrayBuffer"?"binary":n}function Vr(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var za=function(){function t(){}return t.prototype._read=function(e,n){var r=this._ctx;return r.error?r.table._trans(null,oe.bind(null,r.error)):r.table._trans("readonly",e).then(n)},t.prototype._write=function(e){var n=this._ctx;return n.error?n.table._trans(null,oe.bind(null,n.error)):n.table._trans("readwrite",e,"locked")},t.prototype._addAlgorithm=function(e){var n=this._ctx;n.algorithm=Xe(n.algorithm,e)},t.prototype._iterate=function(e,n){return Nt(this._ctx,e,n,this._ctx.table.core)},t.prototype.clone=function(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&de(r,e),n._ctx=r,n},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(e){var n=this._ctx;return this._read(function(r){return Nt(n,e,r,n.table.core)})},t.prototype.count=function(e){var n=this;return this._read(function(r){var i=n._ctx,a=i.table.core;if(Ze(i,!0))return a.count({trans:r,query:{index:Xt(i,a.schema),range:i.range}}).then(function(u){return Math.min(u,i.limit)});var o=0;return Nt(i,function(){return++o,!1},r,a).then(function(){return o})}).then(e)},t.prototype.sortBy=function(e,n){var r=e.split(".").reverse(),i=r[0],a=r.length-1;function o(l,h){return h?o(l[r[h]],h-1):l[i]}var u=this._ctx.dir==="next"?1:-1;function s(l,h){var c=o(l,a),p=o(h,a);return c<p?-u:c>p?u:0}return this.toArray(function(l){return l.sort(s)}).then(n)},t.prototype.toArray=function(e){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&Ze(i,!0)&&i.limit>0){var a=i.valueMapper,o=Xt(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:o,range:i.range}}).then(function(s){var l=s.result;return a?l.map(a):l})}else{var u=[];return Nt(i,function(s){return u.push(s)},r,i.table.core).then(function(){return u})}},e)},t.prototype.offset=function(e){var n=this._ctx;return e<=0?this:(n.offset+=e,Ze(n)?wn(n,function(){var r=e;return function(i,a){return r===0?!0:r===1?(--r,!1):(a(function(){i.advance(r),r=0}),!1)}}):wn(n,function(){var r=e;return function(){return--r<0}}),this)},t.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),wn(this._ctx,function(){var n=e;return function(r,i,a){return--n<=0&&i(a),n>=0}},!0),this},t.prototype.until=function(e,n){return _n(this._ctx,function(r,i,a){return e(r.value)?(i(a),n):!0}),this},t.prototype.first=function(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)},t.prototype.last=function(e){return this.reverse().first(e)},t.prototype.filter=function(e){return _n(this._ctx,function(n){return e(n.value)}),$a(this._ctx,e),this},t.prototype.and=function(e){return this.filter(e)},t.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})},t.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},t.prototype.eachPrimaryKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})},t.prototype.keys=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.key)}).then(function(){return r}).then(e)},t.prototype.primaryKeys=function(e){var n=this._ctx;if(n.dir==="next"&&Ze(n,!0)&&n.limit>0)return this._read(function(i){var a=Xt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:a,range:n.range}})}).then(function(i){var a=i.result;return a}).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.primaryKey)}).then(function(){return r}).then(e)},t.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},t.prototype.firstKey=function(e){return this.limit(1).keys(function(n){return n[0]}).then(e)},t.prototype.lastKey=function(e){return this.reverse().firstKey(e)},t.prototype.distinct=function(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return _n(this._ctx,function(i){var a=i.primaryKey.toString(),o=ge(r,a);return r[a]=!0,!o}),this},t.prototype.modify=function(e){var n=this,r=this._ctx;return this._write(function(i){var a;if(typeof e=="function")a=e;else{var o=ie(e),u=o.length;a=function(k){for(var _=!1,b=0;b<u;++b){var w=o[b],m=e[w];Te(k,w)!==m&&(_e(k,w,m),_=!0)}return _}}var s=r.table.core,l=s.schema.primaryKey,h=l.outbound,c=l.extractKey,p=n.db._options.modifyChunkSize||200,g=[],v=0,f=[],y=function(k,_){var b=_.failures,w=_.numFailures;v+=k-w;for(var m=0,E=ie(b);m<E.length;m++){var K=E[m];g.push(b[K])}};return n.clone().primaryKeys().then(function(k){var _=function(b){var w=Math.min(p,k.length-b);return s.getMany({trans:i,keys:k.slice(b,b+w),cache:"immutable"}).then(function(m){for(var E=[],K=[],x=h?[]:null,S=[],R=0;R<w;++R){var N=m[R],$={value:St(N),primKey:k[b+R]};a.call($,$.value,$)!==!1&&($.value==null?S.push(k[b+R]):!h&&fe(c(N),c($.value))!==0?(S.push(k[b+R]),E.push($.value)):(K.push($.value),h&&x.push(k[b+R])))}var M=Ze(r)&&r.limit===1/0&&(typeof e!="function"||e===kn)&&{index:r.index,range:r.range};return Promise.resolve(E.length>0&&s.mutate({trans:i,type:"add",values:E}).then(function(B){for(var I in B.failures)S.splice(parseInt(I),1);y(E.length,B)})).then(function(){return(K.length>0||M&&typeof e=="object")&&s.mutate({trans:i,type:"put",keys:x,values:K,criteria:M,changeSpec:typeof e!="function"&&e}).then(function(B){return y(K.length,B)})}).then(function(){return(S.length>0||M&&e===kn)&&s.mutate({trans:i,type:"delete",keys:S,criteria:M}).then(function(B){return y(S.length,B)})}).then(function(){return k.length>b+w&&_(b+p)})})};return _(0).then(function(){if(g.length>0)throw new en("Error modifying one or more objects",g,v,f);return k.length})})})},t.prototype.delete=function(){var e=this._ctx,n=e.range;return Ze(e)&&(e.isPrimKey&&!Fa||n.type===3)?this._write(function(r){var i=e.table.core.schema.primaryKey,a=n;return e.table.core.count({trans:r,query:{index:i,range:a}}).then(function(o){return e.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(function(u){var s=u.failures;u.lastResult,u.results;var l=u.numFailures;if(l)throw new en("Could not delete some values",Object.keys(s).map(function(h){return s[h]}),o-l);return o-l})})}):this.modify(kn)},t}(),kn=function(t,e){return e.value=null};function Wa(t){return Rt(za.prototype,function(n,r){this.db=t;var i=Ci,a=null;if(r)try{i=r()}catch(l){a=l}var o=n._ctx,u=o.table,s=u.hook.reading.fire;this._ctx={table:u,index:o.index,isPrimKey:!o.index||u.schema.primKey.keyPath&&o.index===u.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:a,or:o.or,valueMapper:s!==Kt?s:null}})}function Ua(t,e){return t<e?-1:t===e?0:1}function Ha(t,e){return t>e?-1:t===e?0:1}function ye(t,e,n){var r=t instanceof Ii?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function et(t){return new t.Collection(t,function(){return Ai("")}).limit(0)}function Ya(t){return t==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function Ga(t){return t==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function Qa(t,e,n,r,i,a){for(var o=Math.min(t.length,r.length),u=-1,s=0;s<o;++s){var l=e[s];if(l!==r[s])return i(t[s],n[s])<0?t.substr(0,s)+n[s]+n.substr(s+1):i(t[s],r[s])<0?t.substr(0,s)+r[s]+n.substr(s+1):u>=0?t.substr(0,u)+e[u]+n.substr(u+1):null;i(t[s],l)<0&&(u=s)}return o<r.length&&a==="next"?t+n.substr(t.length):o<t.length&&a==="prev"?t.substr(0,n.length):u<0?null:t.substr(0,u)+r[u]+n.substr(u+1)}function $t(t,e,n,r){var i,a,o,u,s,l,h,c=n.length;if(!n.every(function(f){return typeof f=="string"}))return ye(t,Ei);function p(f){i=Ya(f),a=Ga(f),o=f==="next"?Ua:Ha;var y=n.map(function(k){return{lower:a(k),upper:i(k)}}).sort(function(k,_){return o(k.lower,_.lower)});u=y.map(function(k){return k.upper}),s=y.map(function(k){return k.lower}),l=f,h=f==="next"?"":r}p("next");var g=new t.Collection(t,function(){return Oe(u[0],s[c-1]+r)});g._ondirectionchange=function(f){p(f)};var v=0;return g._addAlgorithm(function(f,y,k){var _=f.key;if(typeof _!="string")return!1;var b=a(_);if(e(b,s,v))return!0;for(var w=null,m=v;m<c;++m){var E=Qa(_,b,u[m],s[m],o,l);E===null&&w===null?v=m+1:(w===null||o(w,E)>0)&&(w=E)}return y(w!==null?function(){f.continue(w+h)}:k),!1}),g}function Oe(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function Ai(t){return{type:1,lower:t,upper:t}}var Ii=function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&!(r&&i)?et(this):new this.Collection(this,function(){return Oe(e,n,!r,!i)})}catch{return ye(this,Ce)}},t.prototype.equals=function(e){return e==null?ye(this,Ce):new this.Collection(this,function(){return Ai(e)})},t.prototype.above=function(e){return e==null?ye(this,Ce):new this.Collection(this,function(){return Oe(e,void 0,!0)})},t.prototype.aboveOrEqual=function(e){return e==null?ye(this,Ce):new this.Collection(this,function(){return Oe(e,void 0,!1)})},t.prototype.below=function(e){return e==null?ye(this,Ce):new this.Collection(this,function(){return Oe(void 0,e,!1,!0)})},t.prototype.belowOrEqual=function(e){return e==null?ye(this,Ce):new this.Collection(this,function(){return Oe(void 0,e)})},t.prototype.startsWith=function(e){return typeof e!="string"?ye(this,Ei):this.between(e,e+He,!0,!0)},t.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):$t(this,function(n,r){return n.indexOf(r[0])===0},[e],He)},t.prototype.equalsIgnoreCase=function(e){return $t(this,function(n,r){return n===r[0]},[e],"")},t.prototype.anyOfIgnoreCase=function(){var e=Ie.apply(nt,arguments);return e.length===0?et(this):$t(this,function(n,r){return r.indexOf(n)!==-1},e,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var e=Ie.apply(nt,arguments);return e.length===0?et(this):$t(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},e,He)},t.prototype.anyOf=function(){var e=this,n=Ie.apply(nt,arguments),r=this._cmp;try{n.sort(r)}catch{return ye(this,Ce)}if(n.length===0)return et(this);var i=new this.Collection(this,function(){return Oe(n[0],n[n.length-1])});i._ondirectionchange=function(o){r=o==="next"?e._ascending:e._descending,n.sort(r)};var a=0;return i._addAlgorithm(function(o,u,s){for(var l=o.key;r(l,n[a])>0;)if(++a,a===n.length)return u(s),!1;return r(l,n[a])===0?!0:(u(function(){o.continue(n[a])}),!1)}),i},t.prototype.notEqual=function(e){return this.inAnyRange([[$n,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var e=Ie.apply(nt,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return ye(this,Ce)}var n=e.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[$n,i]]},null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(e,n){var r=this,i=this._cmp,a=this._ascending,o=this._descending,u=this._min,s=this._max;if(e.length===0)return et(this);if(!e.every(function(m){return m[0]!==void 0&&m[1]!==void 0&&a(m[0],m[1])<=0}))return ye(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",j.InvalidArgument);var l=!n||n.includeLowers!==!1,h=n&&n.includeUppers===!0;function c(m,E){for(var K=0,x=m.length;K<x;++K){var S=m[K];if(i(E[0],S[1])<0&&i(E[1],S[0])>0){S[0]=u(S[0],E[0]),S[1]=s(S[1],E[1]);break}}return K===x&&m.push(E),m}var p=a;function g(m,E){return p(m[0],E[0])}var v;try{v=e.reduce(c,[]),v.sort(g)}catch{return ye(this,Ce)}var f=0,y=h?function(m){return a(m,v[f][1])>0}:function(m){return a(m,v[f][1])>=0},k=l?function(m){return o(m,v[f][0])>0}:function(m){return o(m,v[f][0])>=0};function _(m){return!y(m)&&!k(m)}var b=y,w=new this.Collection(this,function(){return Oe(v[0][0],v[v.length-1][1],!l,!h)});return w._ondirectionchange=function(m){m==="next"?(b=y,p=a):(b=k,p=o),v.sort(g)},w._addAlgorithm(function(m,E,K){for(var x=m.key;b(x);)if(++f,f===v.length)return E(K),!1;return _(x)?!0:(r._cmp(x,v[f][1])===0||r._cmp(x,v[f][0])===0||E(function(){p===a?m.continue(v[f][0]):m.continue(v[f][1])}),!1)}),w},t.prototype.startsWithAnyOf=function(){var e=Ie.apply(nt,arguments);return e.every(function(n){return typeof n=="string"})?e.length===0?et(this):this.inAnyRange(e.map(function(n){return[n,n+He]})):ye(this,"startsWithAnyOf() only works with strings")},t}();function Xa(t){return Rt(Ii.prototype,function(n,r,i){this.db=t,this._ctx={table:n,index:r===":id"?null:r,or:i};var a=t._deps.indexedDB;if(!a)throw new j.MissingAPI;this._cmp=this._ascending=a.cmp.bind(a),this._descending=function(o,u){return a.cmp(u,o)},this._max=function(o,u){return a.cmp(o,u)>0?o:u},this._min=function(o,u){return a.cmp(o,u)<0?o:u},this._IDBKeyRange=t._deps.IDBKeyRange})}function ke(t){return te(function(e){return xt(e),t(e.target.error),!1})}function xt(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var Ct="storagemutated",Fe="x-storagemutated-1",Le=Pt(null,Ct),Ja=function(){function t(){}return t.prototype._lock=function(){return dt(!O.global),++this._reculock,this._reculock===1&&!O.global&&(O.lockOwnerFor=this),this},t.prototype._unlock=function(){if(dt(!O.global),--this._reculock===0)for(O.global||(O.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{st(e[1],e[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&O.lockOwnerFor!==this},t.prototype.create=function(e){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(dt(!this.idbtrans),!e&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new j.DatabaseClosed(i);case"MissingAPIError":throw new j.MissingAPI(i.message,i);default:throw new j.OpenFailed(i)}if(!this.active)throw new j.TransactionInactive;return dt(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=te(function(a){xt(a),n._reject(e.error)}),e.onabort=te(function(a){xt(a),n.active&&n._reject(new j.Abort(e.error)),n.active=!1,n.on("abort").fire(a)}),e.oncomplete=te(function(){n.active=!1,n._resolve(),"mutatedParts"in e&&Le.storagemutated.fire(e.mutatedParts)}),this},t.prototype._promise=function(e,n,r){var i=this;if(e==="readwrite"&&this.mode!=="readwrite")return oe(new j.ReadOnly("Transaction is readonly"));if(!this.active)return oe(new j.TransactionInactive);if(this._locked())return new T(function(o,u){i._blockedFuncs.push([function(){i._promise(e,n,r).then(o,u)},O])});if(r)return Ne(function(){var o=new T(function(u,s){i._lock();var l=n(u,s,i);l&&l.then&&l.then(u,s)});return o.finally(function(){return i._unlock()}),o._lib=!0,o});var a=new T(function(o,u){var s=n(o,u,i);s&&s.then&&s.then(o,u)});return a._lib=!0,a},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(e){var n=this._root(),r=T.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var a=n._waitingFor;return new T(function(o,u){r.then(function(s){return n._waitingQueue.push(te(o.bind(null,s)))},function(s){return n._waitingQueue.push(te(u.bind(null,s)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new j.Abort))},t.prototype.table=function(e){var n=this._memoizedTables||(this._memoizedTables={});if(ge(n,e))return n[e];var r=this.schema[e];if(!r)throw new j.NotFound("Table "+e+" not part of transaction");var i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i},t}();function qa(t){return Rt(Ja.prototype,function(n,r,i,a,o){var u=this;this.db=t,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=Pt(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new T(function(s,l){u._resolve=s,u._reject=l}),this._completion.then(function(){u.active=!1,u.on.complete.fire()},function(s){var l=u.active;return u.active=!1,u.on.error.fire(s),u.parent?u.parent._reject(s):l&&u.idbtrans&&u.idbtrans.abort(),oe(s)})})}function Ln(t,e,n,r,i,a,o){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:a,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+Si(e)}}function Si(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Ki(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:oi(n,function(r){return[r.name,r]})}}function Za(t){return t.length===1?t[0]:t}var At=function(t){try{return t.only([[]]),At=function(){return[[]]},[[]]}catch{return At=function(){return He},He}};function Vn(t){return t==null?function(){}:typeof t=="string"?eo(t):function(e){return Te(e,t)}}function eo(t){var e=t.split(".");return e.length===1?function(n){return n[t]}:function(n){return Te(n,t)}}function zr(t){return[].slice.call(t)}var to=0;function yt(t){return t==null?":id":typeof t=="string"?t:"["+t.join("+")+"]"}function no(t,e,n){function r(c,p){var g=zr(c.objectStoreNames);return{schema:{name:c.name,tables:g.map(function(v){return p.objectStore(v)}).map(function(v){var f=v.keyPath,y=v.autoIncrement,k=le(f),_=f==null,b={},w={name:v.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:_,compound:k,keyPath:f,autoIncrement:y,unique:!0,extractKey:Vn(f)},indexes:zr(v.indexNames).map(function(m){return v.index(m)}).map(function(m){var E=m.name,K=m.unique,x=m.multiEntry,S=m.keyPath,R=le(S),N={name:E,compound:R,keyPath:S,unique:K,multiEntry:x,extractKey:Vn(S)};return b[yt(S)]=N,N}),getIndexByKeyPath:function(m){return b[yt(m)]}};return b[":id"]=w.primaryKey,f!=null&&(b[yt(f)]=w.primaryKey),w})},hasGetAll:g.length>0&&"getAll"in p.objectStore(g[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(c){if(c.type===3)return null;if(c.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var p=c.lower,g=c.upper,v=c.lowerOpen,f=c.upperOpen,y=p===void 0?g===void 0?null:e.upperBound(g,!!f):g===void 0?e.lowerBound(p,!!v):e.bound(p,g,!!v,!!f);return y}function a(c){var p=c.name;function g(y){var k=y.trans,_=y.type,b=y.keys,w=y.values,m=y.range;return new Promise(function(E,K){E=te(E);var x=k.objectStore(p),S=x.keyPath==null,R=_==="put"||_==="add";if(!R&&_!=="delete"&&_!=="deleteRange")throw new Error("Invalid operation type: "+_);var N=(b||w||{length:1}).length;if(b&&w&&b.length!==w.length)throw new Error("Given keys array must have same length as given values array.");if(N===0)return E({numFailures:0,failures:{},results:[],lastResult:void 0});var $,M=[],B=[],I=0,P=function(ne){++I,xt(ne)};if(_==="deleteRange"){if(m.type===4)return E({numFailures:I,failures:B,results:[],lastResult:void 0});m.type===3?M.push($=x.clear()):M.push($=x.delete(i(m)))}else{var W=R?S?[w,b]:[w,null]:[b,null],J=W[0],q=W[1];if(R)for(var Y=0;Y<N;++Y)M.push($=q&&q[Y]!==void 0?x[_](J[Y],q[Y]):x[_](J[Y])),$.onerror=P;else for(var Y=0;Y<N;++Y)M.push($=x[_](J[Y])),$.onerror=P}var re=function(ne){var Q=ne.target.result;M.forEach(function(Z,ve){return Z.error!=null&&(B[ve]=Z.error)}),E({numFailures:I,failures:B,results:_==="delete"?b:M.map(function(Z){return Z.result}),lastResult:Q})};$.onerror=function(ne){P(ne),re(ne)},$.onsuccess=re})}function v(y){var k=y.trans,_=y.values,b=y.query,w=y.reverse,m=y.unique;return new Promise(function(E,K){E=te(E);var x=b.index,S=b.range,R=k.objectStore(p),N=x.isPrimaryKey?R:R.index(x.name),$=w?m?"prevunique":"prev":m?"nextunique":"next",M=_||!("openKeyCursor"in N)?N.openCursor(i(S),$):N.openKeyCursor(i(S),$);M.onerror=ke(K),M.onsuccess=te(function(B){var I=M.result;if(!I){E(null);return}I.___id=++to,I.done=!1;var P=I.continue.bind(I),W=I.continuePrimaryKey;W&&(W=W.bind(I));var J=I.advance.bind(I),q=function(){throw new Error("Cursor not started")},Y=function(){throw new Error("Cursor not stopped")};I.trans=k,I.stop=I.continue=I.continuePrimaryKey=I.advance=q,I.fail=te(K),I.next=function(){var re=this,ne=1;return this.start(function(){return ne--?re.continue():re.stop()}).then(function(){return re})},I.start=function(re){var ne=new Promise(function(Z,ve){Z=te(Z),M.onerror=ke(ve),I.fail=ve,I.stop=function(V){I.stop=I.continue=I.continuePrimaryKey=I.advance=Y,Z(V)}}),Q=function(){if(M.result)try{re()}catch(Z){I.fail(Z)}else I.done=!0,I.start=function(){throw new Error("Cursor behind last entry")},I.stop()};return M.onsuccess=te(function(Z){M.onsuccess=Q,Q()}),I.continue=P,I.continuePrimaryKey=W,I.advance=J,Q(),ne},E(I)},K)})}function f(y){return function(k){return new Promise(function(_,b){_=te(_);var w=k.trans,m=k.values,E=k.limit,K=k.query,x=E===1/0?void 0:E,S=K.index,R=K.range,N=w.objectStore(p),$=S.isPrimaryKey?N:N.index(S.name),M=i(R);if(E===0)return _({result:[]});if(y){var B=m?$.getAll(M,x):$.getAllKeys(M,x);B.onsuccess=function(J){return _({result:J.target.result})},B.onerror=ke(b)}else{var I=0,P=m||!("openKeyCursor"in $)?$.openCursor(M):$.openKeyCursor(M),W=[];P.onsuccess=function(J){var q=P.result;if(!q)return _({result:W});if(W.push(m?q.value:q.primaryKey),++I===E)return _({result:W});q.continue()},P.onerror=ke(b)}})}}return{name:p,schema:c,mutate:g,getMany:function(y){var k=y.trans,_=y.keys;return new Promise(function(b,w){b=te(b);for(var m=k.objectStore(p),E=_.length,K=new Array(E),x=0,S=0,R,N=function(I){var P=I.target;(K[P._pos]=P.result)!=null,++S===x&&b(K)},$=ke(w),M=0;M<E;++M){var B=_[M];B!=null&&(R=m.get(_[M]),R._pos=M,R.onsuccess=N,R.onerror=$,++x)}x===0&&b(K)})},get:function(y){var k=y.trans,_=y.key;return new Promise(function(b,w){b=te(b);var m=k.objectStore(p),E=m.get(_);E.onsuccess=function(K){return b(K.target.result)},E.onerror=ke(w)})},query:f(s),openCursor:v,count:function(y){var k=y.query,_=y.trans,b=k.index,w=k.range;return new Promise(function(m,E){var K=_.objectStore(p),x=b.isPrimaryKey?K:K.index(b.name),S=i(w),R=S?x.count(S):x.count();R.onsuccess=te(function(N){return m(N.target.result)}),R.onerror=ke(E)})}}}var o=r(t,n),u=o.schema,s=o.hasGetAll,l=u.tables.map(function(c){return a(c)}),h={};return l.forEach(function(c){return h[c.name]=c}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(c){var p=h[c];if(!p)throw new Error("Table '"+c+"' not found");return h[c]},MIN_KEY:-1/0,MAX_KEY:At(e),schema:u}}function ro(t,e){return e.reduce(function(n,r){var i=r.create;return H(H({},n),i(n))},t)}function io(t,e,n,r){var i=n.IDBKeyRange;n.indexedDB;var a=ro(no(e,i,r),t.dbcore);return{dbcore:a}}function cr(t,e){var n=t._novip,r=e.db,i=io(n._middlewares,r,n._deps,e);n.core=i.dbcore,n.tables.forEach(function(a){var o=a.name;n.core.schema.tables.some(function(u){return u.name===o})&&(a.core=n.core.table(o),n[o]instanceof n.Table&&(n[o].core=a.core))})}function un(t,e,n,r){var i=t._novip;n.forEach(function(a){var o=r[a];e.forEach(function(u){var s=tr(u,a);(!s||"value"in s&&s.value===void 0)&&(u===i.Transaction.prototype||u instanceof i.Transaction?De(u,a,{get:function(){return this.table(a)},set:function(l){ri(this,a,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):u[a]=new i.Table(a,o))})})}function zn(t,e){var n=t._novip;e.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function ao(t,e){return t._cfg.version-e._cfg.version}function oo(t,e,n,r){var i=t._dbSchema,a=t._createTransaction("readwrite",t._storeNames,i);a.create(n),a._completion.catch(r);var o=a._reject.bind(a),u=O.transless||O;Ne(function(){O.trans=a,O.transless=u,e===0?(ie(i).forEach(function(s){fr(n,s,i[s].primKey,i[s].indexes)}),cr(t,n),T.follow(function(){return t.on.populate.fire(a)}).catch(o)):uo(t,e,a,n).catch(o)})}function uo(t,e,n,r){var i=t._novip,a=[],o=i._versions,u=i._dbSchema=dr(i,i.idbdb,r),s=!1,l=o.filter(function(c){return c._cfg.version>=e});l.forEach(function(c){a.push(function(){var p=u,g=c._cfg.dbschema;Un(i,p,r),Un(i,g,r),u=i._dbSchema=g;var v=Ti(p,g);v.add.forEach(function(w){fr(r,w[0],w[1].primKey,w[1].indexes)}),v.change.forEach(function(w){if(w.recreate)throw new j.Upgrade("Not yet support for changing primary key");var m=r.objectStore(w.name);w.add.forEach(function(E){return Wn(m,E)}),w.change.forEach(function(E){m.deleteIndex(E.name),Wn(m,E)}),w.del.forEach(function(E){return m.deleteIndex(E)})});var f=c._cfg.contentUpgrade;if(f&&c._cfg.version>e){cr(i,r),n._memoizedTables={},s=!0;var y=ui(g);v.del.forEach(function(w){y[w]=p[w]}),zn(i,[i.Transaction.prototype]),un(i,[i.Transaction.prototype],ie(y),y),n.schema=y;var k=nr(f);k&&ut();var _,b=T.follow(function(){if(_=f(n),_&&k){var w=Pe.bind(null,null);_.then(w,w)}});return _&&typeof _.then=="function"?T.resolve(_):b.then(function(){return _})}}),a.push(function(p){if(!s||!Ma){var g=c._cfg.dbschema;lo(g,p)}zn(i,[i.Transaction.prototype]),un(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function h(){return a.length?T.resolve(a.shift()(n.idbtrans)).then(h):T.resolve()}return h().then(function(){so(u,r)})}function Ti(t,e){var n={del:[],add:[],change:[]},r;for(r in t)e[r]||n.del.push(r);for(r in e){var i=t[r],a=e[r];if(!i)n.add.push([r,a]);else{var o={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto&&!hn)o.recreate=!0,n.change.push(o);else{var u=i.idxByName,s=a.idxByName,l=void 0;for(l in u)s[l]||o.del.push(l);for(l in s){var h=u[l],c=s[l];h?h.src!==c.src&&o.change.push(c):o.add.push(c)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}}return n}function fr(t,e,n,r){var i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(a){return Wn(i,a)}),i}function so(t,e){ie(t).forEach(function(n){e.db.objectStoreNames.contains(n)||fr(e,n,t[n].primKey,t[n].indexes)})}function lo(t,e){[].slice.call(e.db.objectStoreNames).forEach(function(n){return t[n]==null&&e.db.deleteObjectStore(n)})}function Wn(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function dr(t,e,n){var r={},i=fn(e.objectStoreNames,0);return i.forEach(function(a){for(var o=n.objectStore(a),u=o.keyPath,s=Ln(Si(u),u||"",!1,!1,!!o.autoIncrement,u&&typeof u!="string",!0),l=[],h=0;h<o.indexNames.length;++h){var c=o.index(o.indexNames[h]);u=c.keyPath;var p=Ln(c.name,u,!!c.unique,!!c.multiEntry,!1,u&&typeof u!="string",!1);l.push(p)}r[a]=Ki(a,s,l)}),r}function co(t,e,n){var r=t._novip;r.verno=e.version/10;var i=r._dbSchema=dr(r,e,n);r._storeNames=fn(e.objectStoreNames,0),un(r,[r._allTables],ie(i),i)}function fo(t,e){var n=dr(t,t.idbdb,e),r=Ti(n,t._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function Un(t,e,n){for(var r=t._novip,i=n.db.objectStoreNames,a=0;a<i.length;++a){var o=i[a],u=n.objectStore(o);r._hasGetAll="getAll"in u;for(var s=0;s<u.indexNames.length;++s){var l=u.indexNames[s],h=u.index(l).keyPath,c=typeof h=="string"?h:"["+fn(h).join("+")+"]";if(e[o]){var p=e[o].idxByName[c];p&&(p.name=l,delete e[o].idxByName[c],e[o].idxByName[l]=p)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&ee.WorkerGlobalScope&&ee instanceof ee.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function ho(t){return t.split(",").map(function(e,n){e=e.trim();var r=e.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Ln(r,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),le(i),n===0)})}var po=function(){function t(){}return t.prototype._parseStoresSpec=function(e,n){ie(e).forEach(function(r){if(e[r]!==null){var i=ho(e[r]),a=i.shift();if(a.multi)throw new j.Schema("Primary key cannot be multi-valued");i.forEach(function(o){if(o.auto)throw new j.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new j.Schema("Index must have a name and cannot be an empty string")}),n[r]=Ki(r,a,i)}})},t.prototype.stores=function(e){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?de(this._cfg.storesSource,e):e;var r=n._versions,i={},a={};return r.forEach(function(o){de(i,o._cfg.storesSource),a=o._cfg.dbschema={},o._parseStoresSpec(i,a)}),n._dbSchema=a,zn(n,[n._allTables,n,n.Transaction.prototype]),un(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],ie(a),a),n._storeNames=ie(a),this},t.prototype.upgrade=function(e){return this._cfg.contentUpgrade=ar(this._cfg.contentUpgrade||X,e),this},t}();function vo(t){return Rt(po.prototype,function(n){this.db=t,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function hr(t,e){var n=t._dbNamesDB;return n||(n=t._dbNamesDB=new mr(pn,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function pr(t){return t&&typeof t.databases=="function"}function yo(t){var e=t.indexedDB,n=t.IDBKeyRange;return pr(e)?Promise.resolve(e.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==pn})}):hr(e,n).toCollection().primaryKeys()}function mo(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!pr(n)&&e!==pn&&hr(n,r).put({name:e}).catch(X)}function go(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!pr(n)&&e!==pn&&hr(n,r).delete(e).catch(X)}function Hn(t){return Ne(function(){return O.letThrough=!0,t()})}function bo(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var e;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};e=setInterval(r,100),r()}).finally(function(){return clearInterval(e)})}function _o(t){var e=t._state,n=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?oe(e.dbOpenError):t});Ee&&(e.openCanceller._stackHolder=qe()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new j.DatabaseClosed("db.open() was cancelled")}var a=e.dbReadyResolve,o=null,u=!1;return T.race([r,(typeof navigator=="undefined"?T.resolve():bo()).then(function(){return new T(function(s,l){if(i(),!n)throw new j.MissingAPI;var h=t.name,c=e.autoSchema?n.open(h):n.open(h,Math.round(t.verno*10));if(!c)throw new j.MissingAPI;c.onerror=ke(l),c.onblocked=te(t._fireOnBlocked),c.onupgradeneeded=te(function(p){if(o=c.transaction,e.autoSchema&&!t._options.allowEmptyDB){c.onerror=xt,o.abort(),c.result.close();var g=n.deleteDatabase(h);g.onsuccess=g.onerror=te(function(){l(new j.NoSuchDatabase("Database "+h+" doesnt exist"))})}else{o.onerror=ke(l);var v=p.oldVersion>Math.pow(2,62)?0:p.oldVersion;u=v<1,t._novip.idbdb=c.result,oo(t,v/10,o,l)}},l),c.onsuccess=te(function(){o=null;var p=t._novip.idbdb=c.result,g=fn(p.objectStoreNames);if(g.length>0)try{var v=p.transaction(Za(g),"readonly");e.autoSchema?co(t,p,v):(Un(t,t._dbSchema,v),fo(t,v)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),cr(t,v)}catch{}vt.push(t),p.onversionchange=te(function(f){e.vcFired=!0,t.on("versionchange").fire(f)}),p.onclose=te(function(f){t.on("close").fire(f)}),u&&mo(t._deps,h),s()},l)})})]).then(function(){return i(),e.onReadyBeingFired=[],T.resolve(Hn(function(){return t.on.ready.fire(t.vip)})).then(function s(){if(e.onReadyBeingFired.length>0){var l=e.onReadyBeingFired.reduce(ar,X);return e.onReadyBeingFired=[],T.resolve(Hn(function(){return l(t.vip)})).then(s)}})}).finally(function(){e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(function(){return t}).catch(function(s){e.dbOpenError=s;try{o&&o.abort()}catch{}return r===e.openCanceller&&t._close(),oe(s)}).finally(function(){e.openComplete=!0,a()})}function Yn(t){var e=function(o){return t.next(o)},n=function(o){return t.throw(o)},r=a(e),i=a(n);function a(o){return function(u){var s=o(u),l=s.value;return s.done?l:!l||typeof l.then!="function"?le(l)?Promise.all(l).then(r,i):r(l):l.then(r,i)}}return a(e)()}function wo(t,e,n){var r=arguments.length;if(r<2)throw new j.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var a=si(i);return[t,a,n]}function Di(t,e,n,r,i){return T.resolve().then(function(){var a=O.transless||O,o=t._createTransaction(e,n,t._dbSchema,r),u={trans:o,transless:a};if(r)o.idbtrans=r.idbtrans;else try{o.create(),t._state.PR1398_maxLoop=3}catch(c){return c.name===ir.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(function(){return Di(t,e,n,null,i)})):oe(c)}var s=nr(i);s&&ut();var l,h=T.follow(function(){if(l=i.call(o,o),l)if(s){var c=Pe.bind(null,null);l.then(c,c)}else typeof l.next=="function"&&typeof l.throw=="function"&&(l=Yn(l))},u);return(l&&typeof l.then=="function"?T.resolve(l).then(function(c){return o.active?c:oe(new j.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):h.then(function(){return l})).then(function(c){return r&&o._resolve(),o._completion.then(function(){return c})}).catch(function(c){return o._reject(c),oe(c)})})}function Lt(t,e,n){for(var r=le(t)?t.slice():[t],i=0;i<n;++i)r.push(e);return r}function ko(t){return H(H({},t),{table:function(e){var n=t.table(e),r=n.schema,i={},a=[];function o(f,y,k){var _=yt(f),b=i[_]=i[_]||[],w=f==null?0:typeof f=="string"?1:f.length,m=y>0,E=H(H({},k),{isVirtual:m,keyTail:y,keyLength:w,extractKey:Vn(f),unique:!m&&k.unique});if(b.push(E),E.isPrimaryKey||a.push(E),w>1){var K=w===2?f[0]:f.slice(0,w-1);o(K,y+1,k)}return b.sort(function(x,S){return x.keyTail-S.keyTail}),E}var u=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[u];for(var s=0,l=r.indexes;s<l.length;s++){var h=l[s];o(h.keyPath,0,h)}function c(f){var y=i[yt(f)];return y&&y[0]}function p(f,y){return{type:f.type===1?2:f.type,lower:Lt(f.lower,f.lowerOpen?t.MAX_KEY:t.MIN_KEY,y),lowerOpen:!0,upper:Lt(f.upper,f.upperOpen?t.MIN_KEY:t.MAX_KEY,y),upperOpen:!0}}function g(f){var y=f.query.index;return y.isVirtual?H(H({},f),{query:{index:y,range:p(f.query.range,y.keyTail)}}):f}var v=H(H({},n),{schema:H(H({},r),{primaryKey:u,indexes:a,getIndexByKeyPath:c}),count:function(f){return n.count(g(f))},query:function(f){return n.query(g(f))},openCursor:function(f){var y=f.query.index,k=y.keyTail,_=y.isVirtual,b=y.keyLength;if(!_)return n.openCursor(f);function w(m){function E(x){x!=null?m.continue(Lt(x,f.reverse?t.MAX_KEY:t.MIN_KEY,k)):f.unique?m.continue(m.key.slice(0,b).concat(f.reverse?t.MIN_KEY:t.MAX_KEY,k)):m.continue()}var K=Object.create(m,{continue:{value:E},continuePrimaryKey:{value:function(x,S){m.continuePrimaryKey(Lt(x,t.MAX_KEY,k),S)}},primaryKey:{get:function(){return m.primaryKey}},key:{get:function(){var x=m.key;return b===1?x[0]:x.slice(0,b)}},value:{get:function(){return m.value}}});return K}return n.openCursor(g(f)).then(function(m){return m&&w(m)})}});return v}})}var Eo={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:ko};function vr(t,e,n,r){return n=n||{},r=r||"",ie(t).forEach(function(i){if(!ge(e,i))n[r+i]=void 0;else{var a=t[i],o=e[i];if(typeof a=="object"&&typeof o=="object"&&a&&o){var u=Sn(a),s=Sn(o);u!==s?n[r+i]=e[i]:u==="Object"?vr(a,o,n,r+i+"."):a!==o&&(n[r+i]=e[i])}else a!==o&&(n[r+i]=e[i])}}),ie(e).forEach(function(i){ge(t,i)||(n[r+i]=e[i])}),n}function xo(t,e){return e.type==="delete"?e.keys:e.keys||e.values.map(t.extractKey)}var Co={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return H(H({},t),{table:function(e){var n=t.table(e),r=n.schema.primaryKey,i=H(H({},n),{mutate:function(a){var o=O.trans,u=o.table(e).hook,s=u.deleting,l=u.creating,h=u.updating;switch(a.type){case"add":if(l.fire===X)break;return o._promise("readwrite",function(){return c(a)},!0);case"put":if(l.fire===X&&h.fire===X)break;return o._promise("readwrite",function(){return c(a)},!0);case"delete":if(s.fire===X)break;return o._promise("readwrite",function(){return c(a)},!0);case"deleteRange":if(s.fire===X)break;return o._promise("readwrite",function(){return p(a)},!0)}return n.mutate(a);function c(v){var f=O.trans,y=v.keys||xo(r,v);if(!y)throw new Error("Keys missing");return v=v.type==="add"||v.type==="put"?H(H({},v),{keys:y}):H({},v),v.type!=="delete"&&(v.values=An([],v.values,!0)),v.keys&&(v.keys=An([],v.keys,!0)),Ao(n,v,y).then(function(k){var _=y.map(function(b,w){var m=k[w],E={onerror:null,onsuccess:null};if(v.type==="delete")s.fire.call(E,b,m,f);else if(v.type==="add"||m===void 0){var K=l.fire.call(E,b,v.values[w],f);b==null&&K!=null&&(b=K,v.keys[w]=b,r.outbound||_e(v.values[w],r.keyPath,b))}else{var x=vr(m,v.values[w]),S=h.fire.call(E,x,b,m,f);if(S){var R=v.values[w];Object.keys(S).forEach(function(N){ge(R,N)?R[N]=S[N]:_e(R,N,S[N])})}}return E});return n.mutate(v).then(function(b){for(var w=b.failures,m=b.results,E=b.numFailures,K=b.lastResult,x=0;x<y.length;++x){var S=m?m[x]:y[x],R=_[x];S==null?R.onerror&&R.onerror(w[x]):R.onsuccess&&R.onsuccess(v.type==="put"&&k[x]?v.values[x]:S)}return{failures:w,results:m,numFailures:E,lastResult:K}}).catch(function(b){return _.forEach(function(w){return w.onerror&&w.onerror(b)}),Promise.reject(b)})})}function p(v){return g(v.trans,v.range,1e4)}function g(v,f,y){return n.query({trans:v,values:!1,query:{index:r,range:f},limit:y}).then(function(k){var _=k.result;return c({type:"delete",keys:_,trans:v}).then(function(b){return b.numFailures>0?Promise.reject(b.failures[0]):_.length<y?{failures:[],numFailures:0,lastResult:void 0}:g(v,H(H({},f),{lower:_[_.length-1],lowerOpen:!0}),y)})})}}});return i}})}};function Ao(t,e,n){return e.type==="add"?Promise.resolve([]):t.getMany({trans:e.trans,keys:n,cache:"immutable"})}function Pi(t,e,n){try{if(!e||e.keys.length<t.length)return null;for(var r=[],i=0,a=0;i<e.keys.length&&a<t.length;++i)fe(e.keys[i],t[a])===0&&(r.push(n?St(e.values[i]):e.values[i]),++a);return r.length===t.length?r:null}catch{return null}}var Io={stack:"dbcore",level:-1,create:function(t){return{table:function(e){var n=t.table(e);return H(H({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=Pi(r.keys,r.trans._cache,r.cache==="clone");return i?T.resolve(i):n.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?St(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},En;function yr(t){return!("from"in t)}var Ae=function(t,e){if(this)de(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0});else{var n=new Ae;return t&&"d"in t&&de(n,t),n}};it(Ae.prototype,(En={add:function(t){return sn(this,t),this},addKey:function(t){return It(this,t,t),this},addKeys:function(t){var e=this;return t.forEach(function(n){return It(e,n,n)}),this}},En[Kn]=function(){return Gn(this)},En));function It(t,e,n){var r=fe(e,n);if(!isNaN(r)){if(r>0)throw RangeError();if(yr(t))return de(t,{from:e,to:n,d:1});var i=t.l,a=t.r;if(fe(n,t.from)<0)return i?It(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},Wr(t);if(fe(e,t.to)>0)return a?It(a,e,n):t.r={from:e,to:n,d:1,l:null,r:null},Wr(t);fe(e,t.from)<0&&(t.from=e,t.l=null,t.d=a?a.d+1:1),fe(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);var o=!t.r;i&&!t.l&&sn(t,i),a&&o&&sn(t,a)}}function sn(t,e){function n(r,i){var a=i.from,o=i.to,u=i.l,s=i.r;It(r,a,o),u&&n(r,u),s&&n(r,s)}yr(e)||n(t,e)}function So(t,e){var n=Gn(e),r=n.next();if(r.done)return!1;for(var i=r.value,a=Gn(t),o=a.next(i.from),u=o.value;!r.done&&!o.done;){if(fe(u.from,i.to)<=0&&fe(u.to,i.from)>=0)return!0;fe(i.from,u.from)<0?i=(r=n.next(u.from)).value:u=(o=a.next(i.from)).value}return!1}function Gn(t){var e=yr(t)?null:{s:0,n:t};return{next:function(n){for(var r=arguments.length>0;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&fe(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||fe(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Wr(t){var e,n,r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var a=i==="r"?"l":"r",o=H({},t),u=t[i];t.from=u.from,t.to=u.to,t[i]=u[i],o[i]=u[a],t[a]=o,o.d=Ur(o)}t.d=Ur(t)}function Ur(t){var e=t.r,n=t.l;return(e?n?Math.max(e.d,n.d):e.d:n?n.d:0)+1}var Ko={stack:"dbcore",level:0,create:function(t){var e=t.schema.name,n=new Ae(t.MIN_KEY,t.MAX_KEY);return H(H({},t),{table:function(r){var i=t.table(r),a=i.schema,o=a.primaryKey,u=o.extractKey,s=o.outbound,l=H(H({},i),{mutate:function(p){var g=p.trans,v=g.mutatedParts||(g.mutatedParts={}),f=function(K){var x="idb://"+e+"/"+r+"/"+K;return v[x]||(v[x]=new Ae)},y=f(""),k=f(":dels"),_=p.type,b=p.type==="deleteRange"?[p.range]:p.type==="delete"?[p.keys]:p.values.length<50?[[],p.values]:[],w=b[0],m=b[1],E=p.trans._cache;return i.mutate(p).then(function(K){if(le(w)){_!=="delete"&&(w=K.results),y.addKeys(w);var x=Pi(w,E);!x&&_!=="add"&&k.addKeys(w),(x||m)&&To(f,a,x,m)}else if(w){var S={from:w.lower,to:w.upper};k.add(S),y.add(S)}else y.add(n),k.add(n),a.indexes.forEach(function(R){return f(R.name).add(n)});return K})}}),h=function(p){var g,v,f=p.query,y=f.index,k=f.range;return[y,new Ae((g=k.lower)!==null&&g!==void 0?g:t.MIN_KEY,(v=k.upper)!==null&&v!==void 0?v:t.MAX_KEY)]},c={get:function(p){return[o,new Ae(p.key)]},getMany:function(p){return[o,new Ae().addKeys(p.keys)]},count:h,query:h,openCursor:h};return ie(c).forEach(function(p){l[p]=function(g){var v=O.subscr;if(v){var f=function(E){var K="idb://"+e+"/"+r+"/"+E;return v[K]||(v[K]=new Ae)},y=f(""),k=f(":dels"),_=c[p](g),b=_[0],w=_[1];if(f(b.name||"").add(w),!b.isPrimaryKey)if(p==="count")k.add(n);else{var m=p==="query"&&s&&g.values&&i.query(H(H({},g),{values:!1}));return i[p].apply(this,arguments).then(function(E){if(p==="query"){if(s&&g.values)return m.then(function(R){var N=R.result;return y.addKeys(N),E});var K=g.values?E.result.map(u):E.result;g.values?y.addKeys(K):k.addKeys(K)}else if(p==="openCursor"){var x=E,S=g.values;return x&&Object.create(x,{key:{get:function(){return k.addKey(x.primaryKey),x.key}},primaryKey:{get:function(){var R=x.primaryKey;return k.addKey(R),R}},value:{get:function(){return S&&y.addKey(x.primaryKey),x.value}}})}return E})}}return i[p].apply(this,arguments)}}),l}})}};function To(t,e,n,r){function i(a){var o=t(a.name||"");function u(l){return l!=null?a.extractKey(l):null}var s=function(l){return a.multiEntry&&le(l)?l.forEach(function(h){return o.addKey(h)}):o.addKey(l)};(n||r).forEach(function(l,h){var c=n&&u(n[h]),p=r&&u(r[h]);fe(c,p)!==0&&(c!=null&&s(c),p!=null&&s(p))})}e.indexes.forEach(i)}var mr=function(){function t(e,n){var r=this;this._middlewares={},this.verno=0;var i=t.dependencies;this._options=n=H({addons:t.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var a=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:X,dbReadyPromise:null,cancelOpen:X,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};o.dbReadyPromise=new T(function(u){o.dbReadyResolve=u}),o.openCanceller=new T(function(u,s){o.cancelOpen=s}),this._state=o,this.name=e,this.on=Pt(this,"populate","blocked","versionchange","close",{ready:[ar,X]}),this.on.ready.subscribe=ii(this.on.ready.subscribe,function(u){return function(s,l){t.vip(function(){var h=r._state;if(h.openComplete)h.dbOpenError||T.resolve().then(s),l&&u(s);else if(h.onReadyBeingFired)h.onReadyBeingFired.push(s),l&&u(s);else{u(s);var c=r;l||u(function p(){c.on.ready.unsubscribe(s),c.on.ready.unsubscribe(p)})}})}}),this.Collection=Wa(this),this.Table=Na(this),this.Transaction=qa(this),this.Version=vo(this),this.WhereClause=Xa(this),this.on("versionchange",function(u){u.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(u){!u.newVersion||u.newVersion<u.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+u.oldVersion/10)}),this._maxKey=At(n.IDBKeyRange),this._createTransaction=function(u,s,l,h){return new r.Transaction(u,s,l,r._options.chromeTransactionDurability,h)},this._fireOnBlocked=function(u){r.on("blocked").fire(u),vt.filter(function(s){return s.name===r.name&&s!==r&&!s._state.vcFired}).map(function(s){return s.on("versionchange").fire(u)})},this.use(Eo),this.use(Co),this.use(Ko),this.use(Io),this.vip=Object.create(this,{_vip:{value:!0}}),a.forEach(function(u){return u(r)})}return t.prototype.version=function(e){if(isNaN(e)||e<.1)throw new j.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new j.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var n=this._versions,r=n.filter(function(i){return i._cfg.version===e})[0];return r||(r=new this.Version(e),n.push(r),n.sort(ao),r.stores({}),this._state.autoSchema=!1,r)},t.prototype._whenReady=function(e){var n=this;return this.idbdb&&(this._state.openComplete||O.letThrough||this._vip)?e():new T(function(r,i){if(n._state.openComplete)return i(new j.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new j.DatabaseClosed);return}n.open().catch(X)}n._state.dbReadyPromise.then(r,i)}).then(e)},t.prototype.use=function(e){var n=e.stack,r=e.create,i=e.level,a=e.name;a&&this.unuse({stack:n,name:a});var o=this._middlewares[n]||(this._middlewares[n]=[]);return o.push({stack:n,create:r,level:i==null?10:i,name:a}),o.sort(function(u,s){return u.level-s.level}),this},t.prototype.unuse=function(e){var n=e.stack,r=e.name,i=e.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(a){return i?a.create!==i:r?a.name!==r:!1})),this},t.prototype.open=function(){return _o(this)},t.prototype._close=function(){var e=this._state,n=vt.indexOf(this);if(n>=0&&vt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new T(function(r){e.dbReadyResolve=r}),e.openCanceller=new T(function(r,i){e.cancelOpen=i})},t.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new j.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)},t.prototype.delete=function(){var e=this,n=arguments.length>0,r=this._state;return new T(function(i,a){var o=function(){e.close();var u=e._deps.indexedDB.deleteDatabase(e.name);u.onsuccess=te(function(){go(e._deps,e.name),i()}),u.onerror=ke(a),u.onblocked=e._fireOnBlocked};if(n)throw new j.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var e=this;return ie(this._allTables).map(function(n){return e._allTables[n]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var e=wo.apply(this,arguments);return this._transaction.apply(this,e)},t.prototype._transaction=function(e,n,r){var i=this,a=O.trans;(!a||a.db!==this||e.indexOf("!")!==-1)&&(a=null);var o=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var u,s;try{if(s=n.map(function(h){var c=h instanceof i.Table?h.name:h;if(typeof c!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return c}),e=="r"||e===gn)u=gn;else if(e=="rw"||e==bn)u=bn;else throw new j.InvalidArgument("Invalid transaction mode: "+e);if(a){if(a.mode===gn&&u===bn)if(o)a=null;else throw new j.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a&&s.forEach(function(h){if(a&&a.storeNames.indexOf(h)===-1)if(o)a=null;else throw new j.SubTransaction("Table "+h+" not included in parent transaction.")}),o&&a&&!a.active&&(a=null)}}catch(h){return a?a._promise(null,function(c,p){p(h)}):oe(h)}var l=Di.bind(null,this,u,s,a,r);return a?a._promise(u,l,"lock"):O.trans?st(O.transless,function(){return i._whenReady(l)}):this._whenReady(l)},t.prototype.table=function(e){if(!ge(this._allTables,e))throw new j.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},t}(),Do=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",Po=function(){function t(e){this._subscribe=e}return t.prototype.subscribe=function(e,n,r){return this._subscribe(!e||typeof e=="function"?{next:e,error:n,complete:r}:e)},t.prototype[Do]=function(){return this},t}();function Ri(t,e){return ie(e).forEach(function(n){var r=t[n]||(t[n]=new Ae);sn(r,e[n])}),t}function Ro(t){return new Po(function(e){var n=nr(t);function r(g){n&&ut();var v=function(){return Ne(t,{subscr:g,trans:null})},f=O.trans?st(O.transless,v):v();return n&&f.then(Pe,Pe),f}var i=!1,a={},o={},u={get closed(){return i},unsubscribe:function(){i=!0,Le.storagemutated.unsubscribe(c)}};e.start&&e.start(u);var s=!1,l=!1;function h(){return ie(o).some(function(g){return a[g]&&So(a[g],o[g])})}var c=function(g){Ri(a,g),h()&&p()},p=function(){if(!(s||i)){a={};var g={},v=r(g);l||(Le(Ct,c),l=!0),s=!0,Promise.resolve(v).then(function(f){s=!1,!i&&(h()?p():(a={},o=g,e.next&&e.next(f)))},function(f){s=!1,e.error&&e.error(f),u.unsubscribe()})}};return p(),u})}var Qn;try{Qn={indexedDB:ee.indexedDB||ee.mozIndexedDB||ee.webkitIndexedDB||ee.msIndexedDB,IDBKeyRange:ee.IDBKeyRange||ee.webkitIDBKeyRange}}catch{Qn={indexedDB:null,IDBKeyRange:null}}var ze=mr;it(ze,H(H({},dn),{delete:function(t){var e=new ze(t,{addons:[]});return e.delete()},exists:function(t){return new ze(t,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return yo(ze.dependencies).then(t)}catch{return oe(new j.MissingAPI)}},defineClass:function(){function t(e){de(this,e)}return t},ignoreTransaction:function(t){return O.trans?st(O.transless,t):t()},vip:Hn,async:function(t){return function(){try{var e=Yn(t.apply(this,arguments));return!e||typeof e.then!="function"?T.resolve(e):e}catch(n){return oe(n)}}},spawn:function(t,e,n){try{var r=Yn(t.apply(n,e||[]));return!r||typeof r.then!="function"?T.resolve(r):r}catch(i){return oe(i)}},currentTransaction:{get:function(){return O.trans||null}},waitFor:function(t,e){var n=T.resolve(typeof t=="function"?ze.ignoreTransaction(t):t).timeout(e||6e4);return O.trans?O.trans.waitFor(n):n},Promise:T,debug:{get:function(){return Ee},set:function(t){ci(t,t==="dexie"?function(){return!0}:xi)}},derive:at,extend:de,props:it,override:ii,Events:Pt,on:Le,liveQuery:Ro,extendObservabilitySet:Ri,getByKeyPath:Te,setByKeyPath:_e,delByKeyPath:ca,shallowClone:ui,deepClone:St,getObjectDiff:vr,cmp:fe,asap:ai,minKey:$n,addons:[],connections:vt,errnames:ir,dependencies:Qn,semVer:jr,version:jr.split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,n){return t+e/Math.pow(10,n*2)})}));ze.maxKey=At(ze.dependencies.IDBKeyRange);typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(Le(Ct,function(t){if(!Ke){var e;hn?(e=document.createEvent("CustomEvent"),e.initCustomEvent(Fe,!0,!0,t)):e=new CustomEvent(Fe,{detail:t}),Ke=!0,dispatchEvent(e),Ke=!1}}),addEventListener(Fe,function(t){var e=t.detail;Ke||ln(e)}));function ln(t){var e=Ke;try{Ke=!0,Le.storagemutated.fire(t)}finally{Ke=e}}var Ke=!1;if(typeof BroadcastChannel!="undefined"){var Hr=new BroadcastChannel(Fe);Le(Ct,function(t){Ke||Hr.postMessage(t)}),Hr.onmessage=function(t){t.data&&ln(t.data)}}else if(typeof self!="undefined"&&typeof navigator!="undefined"){Le(Ct,function(t){try{Ke||(typeof localStorage!="undefined"&&localStorage.setItem(Fe,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&An([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(e){return e.postMessage({type:Fe,changedParts:t})}))}catch{}}),typeof addEventListener!="undefined"&&addEventListener("storage",function(t){if(t.key===Fe){var e=JSON.parse(t.newValue);e&&ln(e.changedParts)}});var Yr=self.document&&navigator.serviceWorker;Yr&&Yr.addEventListener("message",Bo)}function Bo(t){var e=t.data;e&&e.type===Fe&&ln(e.changedParts)}T.rejectionMapper=ba;ci(Ee,xi);class We{constructor(e,n,r,i,a){be(this,"id");be(this,"carbohydrate");be(this,"cholesterol");be(this,"fat");be(this,"protein");be(this,"sodium");this.carbohydrate=e,this.cholesterol=n,this.fat=r,this.protein=i,this.sodium=a}}class Bi{constructor(e,n){be(this,"name");be(this,"nutrition");this.name=e,this.nutrition=n}}class Oo extends mr{constructor(n){super(n);be(this,"foodItems");be(this,"nutritionValues");this.version(1).stores({foodItems:"name",nutritionValues:"++id"})}}const pe=new Oo("main");pe.foodItems.mapToClass(Bi);pe.nutritionValues.mapToClass(We);function Mo(t){var re,ne,Q,Z,ve;let e,n,r=((re=t[1])==null?void 0:re.carbohydrate)+"",i,a,o,u,s,l=((ne=t[1])==null?void 0:ne.cholesterol)+"",h,c,p,g,v,f=((Q=t[1])==null?void 0:Q.fat)+"",y,k,_,b,w,m=((Z=t[1])==null?void 0:Z.protein)+"",E,K,x,S,R,N=((ve=t[1])==null?void 0:ve.sodium)+"",$,M,B,I,P,W,J,q,Y;return{c(){e=A("p"),n=F("Carbohydrate: "),i=F(r),a=F("g"),o=D(),u=A("p"),s=F("Cholesterol: "),h=F(l),c=F("mg"),p=D(),g=A("p"),v=F("Fat: "),y=F(f),k=F("g"),_=D(),b=A("p"),w=F("Protein: "),E=F(m),K=F("g"),x=D(),S=A("p"),R=F("Sodium: "),$=F(N),M=F("mg"),B=D(),I=A("div"),P=A("button"),P.textContent="Consume",W=D(),J=A("button"),J.textContent="Remove",C(P,"class","button-add svelte-1k0jh6l"),C(J,"class","button-remove svelte-1k0jh6l"),C(I,"class","food_item-buttons svelte-1k0jh6l")},m(V,G){z(V,e,G),d(e,n),d(e,i),d(e,a),z(V,o,G),z(V,u,G),d(u,s),d(u,h),d(u,c),z(V,p,G),z(V,g,G),d(g,v),d(g,y),d(g,k),z(V,_,G),z(V,b,G),d(b,w),d(b,E),d(b,K),z(V,x,G),z(V,S,G),d(S,R),d(S,$),d(S,M),z(V,B,G),z(V,I,G),d(I,P),d(I,W),d(I,J),q||(Y=[je(P,"click",t[2]),je(J,"click",t[3])],q=!0)},p(V,G){var he,ue,we,lt,ct;G&2&&r!==(r=((he=V[1])==null?void 0:he.carbohydrate)+"")&&tt(i,r),G&2&&l!==(l=((ue=V[1])==null?void 0:ue.cholesterol)+"")&&tt(h,l),G&2&&f!==(f=((we=V[1])==null?void 0:we.fat)+"")&&tt(y,f),G&2&&m!==(m=((lt=V[1])==null?void 0:lt.protein)+"")&&tt(E,m),G&2&&N!==(N=((ct=V[1])==null?void 0:ct.sodium)+"")&&tt($,N)},d(V){V&&L(e),V&&L(o),V&&L(u),V&&L(p),V&&L(g),V&&L(_),V&&L(b),V&&L(x),V&&L(S),V&&L(B),V&&L(I),q=!1,Je(Y)}}}function Fo(t){let e,n={ctx:t,current:null,token:null,hasCatch:!1,pending:Wo,then:No,catch:jo,value:5};return Jn(pe.nutritionValues.get(1),n),{c(){e=cn(),n.block.c()},m(r,i){z(r,e,i),n.block.m(r,n.anchor=i),n.mount=()=>e.parentNode,n.anchor=e},p(r,i){t=r,qn(n,t,i)},d(r){r&&L(e),n.block.d(r),n.token=null,n=null}}}function jo(t){return{c:U,m:U,p:U,d:U}}function No(t){let e,n={ctx:t,current:null,token:null,hasCatch:!1,pending:zo,then:Lo,catch:$o,value:6};return Jn(pe.nutritionValues.get(2),n),{c(){e=cn(),n.block.c()},m(r,i){z(r,e,i),n.block.m(r,n.anchor=i),n.mount=()=>e.parentNode,n.anchor=e},p(r,i){t=r,qn(n,t,i)},d(r){r&&L(e),n.block.d(r),n.token=null,n=null}}}function $o(t){return{c:U,m:U,p:U,d:U}}function Lo(t){let e,n=t[5]!=null&&t[6]!=null&&Vo(t);return{c(){n&&n.c(),e=cn()},m(r,i){n&&n.m(r,i),z(r,e,i)},p(r,i){r[5]!=null&&r[6]!=null&&n.p(r,i)},d(r){n&&n.d(r),r&&L(e)}}}function Vo(t){var Kr,Tr;let e,n,r,i=t[6].carbohydrate+"",a,o,u=t[5].carbohydrate+"",s,l,h,c,p=t[6].carbohydrate>=t[5].carbohydrate?"\u2713":"\u2715",g,v,f,y,k,_=t[6].cholesterol+"",b,w,m=t[5].cholesterol+"",E,K,x,S,R=((Kr=t[6])==null?void 0:Kr.cholesterol)>=((Tr=t[5])==null?void 0:Tr.cholesterol)?"\u2713":"\u2715",N,$,M,B,I,P=t[6].fat+"",W,J,q=t[5].fat+"",Y,re,ne,Q,Z=t[6].fat>=t[5].fat?"\u2713":"\u2715",ve,V,G,he,ue,we=t[6].protein+"",lt,ct,Mi=t[5].protein+"",gr,br,_r,Bt,Fi=t[6].protein>=t[5].protein?"\u2713":"\u2715",wr,vn,Re,Be,kr,ji=t[6].sodium+"",Er,xr,Ni=t[5].sodium+"",Cr,Ar,Ir,Ot,$i=t[6].sodium>=t[5].sodium?"\u2713":"\u2715",Sr;return{c(){e=A("div"),n=A("p"),r=F("Carbohydrate: "),a=F(i),o=F("g / "),s=F(u),l=F("g"),h=D(),c=A("p"),g=F(p),v=D(),f=A("div"),y=A("p"),k=F("Cholesterol: "),b=F(_),w=F("mg / "),E=F(m),K=F("mg"),x=D(),S=A("p"),N=F(R),$=D(),M=A("div"),B=A("p"),I=F("Fat: "),W=F(P),J=F("g / "),Y=F(q),re=F("g"),ne=D(),Q=A("p"),ve=F(Z),V=D(),G=A("div"),he=A("p"),ue=F("Protein: "),lt=F(we),ct=F("g / "),gr=F(Mi),br=F("g"),_r=D(),Bt=A("p"),wr=F(Fi),vn=D(),Re=A("div"),Be=A("p"),kr=F("Sodium: "),Er=F(ji),xr=F("mg / "),Cr=F(Ni),Ar=F("mg"),Ir=D(),Ot=A("p"),Sr=F($i),C(n,"class","svelte-1k0jh6l"),C(c,"class","svelte-1k0jh6l"),C(e,"class","goal-item svelte-1k0jh6l"),Ve(e,"completed",t[6].carbohydrate>=t[5].carbohydrate),C(y,"class","svelte-1k0jh6l"),C(S,"class","svelte-1k0jh6l"),C(f,"class","goal-item svelte-1k0jh6l"),Ve(f,"completed",t[6].cholesterol>=t[5].cholesterol),C(B,"class","svelte-1k0jh6l"),C(Q,"class","svelte-1k0jh6l"),C(M,"class","goal-item svelte-1k0jh6l"),Ve(M,"completed",t[6].fat>=t[5].fat),C(he,"class","svelte-1k0jh6l"),C(Bt,"class","svelte-1k0jh6l"),C(G,"class","goal-item svelte-1k0jh6l"),Ve(G,"completed",t[6].protein>=t[5].protein),C(Be,"class","svelte-1k0jh6l"),C(Ot,"class","svelte-1k0jh6l"),C(Re,"class","goal-item svelte-1k0jh6l"),Ve(Re,"completed",t[6].sodium>=t[5].sodium)},m(ae,xe){z(ae,e,xe),d(e,n),d(n,r),d(n,a),d(n,o),d(n,s),d(n,l),d(e,h),d(e,c),d(c,g),z(ae,v,xe),z(ae,f,xe),d(f,y),d(y,k),d(y,b),d(y,w),d(y,E),d(y,K),d(f,x),d(f,S),d(S,N),z(ae,$,xe),z(ae,M,xe),d(M,B),d(B,I),d(B,W),d(B,J),d(B,Y),d(B,re),d(M,ne),d(M,Q),d(Q,ve),z(ae,V,xe),z(ae,G,xe),d(G,he),d(he,ue),d(he,lt),d(he,ct),d(he,gr),d(he,br),d(G,_r),d(G,Bt),d(Bt,wr),z(ae,vn,xe),z(ae,Re,xe),d(Re,Be),d(Be,kr),d(Be,Er),d(Be,xr),d(Be,Cr),d(Be,Ar),d(Re,Ir),d(Re,Ot),d(Ot,Sr)},p:U,d(ae){ae&&L(e),ae&&L(v),ae&&L(f),ae&&L($),ae&&L(M),ae&&L(V),ae&&L(G),ae&&L(vn),ae&&L(Re)}}}function zo(t){return{c:U,m:U,p:U,d:U}}function Wo(t){return{c:U,m:U,p:U,d:U}}function Uo(t){let e,n,r,i;function a(s,l){return s[1]===null?Fo:Mo}let o=a(t),u=o(t);return{c(){e=A("div"),n=A("h1"),r=F(t[0]),i=D(),u.c(),C(n,"class","svelte-1k0jh6l"),C(e,"class","hover food_item svelte-1k0jh6l"),Ve(e,"center",t[1]===null)},m(s,l){z(s,e,l),d(e,n),d(n,r),d(e,i),u.m(e,null)},p(s,[l]){l&1&&tt(r,s[0]),o===(o=a(s))&&u?u.p(s,l):(u.d(1),u=o(s),u&&(u.c(),u.m(e,null))),l&2&&Ve(e,"center",s[1]===null)},i:U,o:U,d(s){s&&L(e),u.d()}}}function Ho(t,e,n){let{name:r="Goal"}=e,{nutrition:i=null}=e;const a=ta();async function o(){const s=await pe.nutritionValues.get(2);let l=new We(s.carbohydrate+i.carbohydrate,s.cholesterol+i.cholesterol,s.fat+i.fat,s.protein+i.protein,s.sodium+i.sodium);l.id=2,pe.nutritionValues.put(l),a("goal")}async function u(){await pe.foodItems.delete(r),a("items")}return t.$$set=s=>{"name"in s&&n(0,r=s.name),"nutrition"in s&&n(1,i=s.nutrition)},[r,i,o,u]}class Oi extends er{constructor(e){super(),Zn(this,e,Ho,Uo,mt,{name:0,nutrition:1})}}function Yo(t){let e,n,r,i;const a=t[2].default,o=Gi(a,t,t[1],null);return{c(){e=A("div"),o&&o.c(),C(e,"id",t[0]),C(e,"class","svelte-1v6tlyl")},m(u,s){z(u,e,s),o&&o.m(e,null),n=!0,r||(i=je(e,"click",Vt(Go)),r=!0)},p(u,[s]){o&&o.p&&(!n||s&2)&&Xi(o,a,u,u[1],n?Qi(a,u[1],s,null):Ji(u[1]),null),(!n||s&1)&&C(e,"id",u[0])},i(u){n||(ce(o,u),n=!0)},o(u){me(o,u),n=!1},d(u){u&&L(e),o&&o.d(u),r=!1,i()}}}const Go=()=>{};function Qo(t,e,n){let{$$slots:r={},$$scope:i}=e,{id_:a=(Math.random()+1).toString(36).substring(3)}=e;return t.$$set=o=>{"id_"in o&&n(0,a=o.id_),"$$scope"in o&&n(1,i=o.$$scope)},[a,i,r]}class Gr extends er{constructor(e){super(),Zn(this,e,Qo,Yo,mt,{id_:0})}}function Qr(t,e,n){const r=t.slice();return r[13]=e[n],r}function Xo(t){let e,n,r,i,a,o,u,s,l,h,c,p,g,v,f,y,k,_,b,w,m,E,K,x,S,R,N,$,M,B,I,P,W,J,q,Y,re,ne,Q,Z,ve,V,G,he;return{c(){e=A("h2"),e.textContent="Add Item",n=D(),r=A("br"),i=D(),a=A("form"),o=A("input"),u=D(),s=A("br"),l=D(),h=A("br"),c=D(),p=A("input"),g=D(),v=A("br"),f=D(),y=A("br"),k=D(),_=A("input"),b=D(),w=A("br"),m=D(),E=A("br"),K=D(),x=A("input"),S=D(),R=A("br"),N=D(),$=A("br"),M=D(),B=A("input"),I=D(),P=A("br"),W=D(),J=A("br"),q=D(),Y=A("input"),re=D(),ne=A("br"),Q=D(),Z=A("br"),ve=D(),V=A("button"),V.textContent="Add",C(o,"autocomplete","off"),C(o,"name","name"),C(o,"placeholder","Name"),C(o,"type","text"),C(o,"class","svelte-1vd6ulv"),C(p,"name","carbohydrate"),C(p,"placeholder","Carbohydrate (g)"),C(p,"type","number"),C(p,"class","svelte-1vd6ulv"),C(_,"name","cholesterol"),C(_,"placeholder","Cholesterol (mg)"),C(_,"type","number"),C(_,"class","svelte-1vd6ulv"),C(x,"name","fat"),C(x,"placeholder","Fat (g)"),C(x,"type","number"),C(x,"class","svelte-1vd6ulv"),C(B,"name","protein"),C(B,"placeholder","Protein (g)"),C(B,"type","number"),C(B,"class","svelte-1vd6ulv"),C(Y,"name","sodium"),C(Y,"placeholder","Sodium (mg)"),C(Y,"type","number"),C(Y,"class","svelte-1vd6ulv"),C(V,"type","submit"),C(V,"class","svelte-1vd6ulv")},m(ue,we){z(ue,e,we),z(ue,n,we),z(ue,r,we),z(ue,i,we),z(ue,a,we),d(a,o),d(a,u),d(a,s),d(a,l),d(a,h),d(a,c),d(a,p),d(a,g),d(a,v),d(a,f),d(a,y),d(a,k),d(a,_),d(a,b),d(a,w),d(a,m),d(a,E),d(a,K),d(a,x),d(a,S),d(a,R),d(a,N),d(a,$),d(a,M),d(a,B),d(a,I),d(a,P),d(a,W),d(a,J),d(a,q),d(a,Y),d(a,re),d(a,ne),d(a,Q),d(a,Z),d(a,ve),d(a,V),G||(he=je(V,"click",ti(t[2])),G=!0)},p:U,d(ue){ue&&L(e),ue&&L(n),ue&&L(r),ue&&L(i),ue&&L(a),G=!1,he()}}}function Jo(t){let e,n,r,i,a,o,u,s,l,h,c,p,g,v,f,y,k,_,b,w,m,E,K,x,S,R,N,$,M,B,I,P,W,J,q,Y,re,ne;return{c(){e=A("h2"),e.textContent="Edit Goal",n=D(),r=A("br"),i=D(),a=A("form"),o=A("input"),u=D(),s=A("br"),l=D(),h=A("br"),c=D(),p=A("input"),g=D(),v=A("br"),f=D(),y=A("br"),k=D(),_=A("input"),b=D(),w=A("br"),m=D(),E=A("br"),K=D(),x=A("input"),S=D(),R=A("br"),N=D(),$=A("br"),M=D(),B=A("input"),I=D(),P=A("br"),W=D(),J=A("br"),q=D(),Y=A("button"),Y.textContent="Edit",C(o,"name","carbohydrate"),C(o,"placeholder","Carbohydrate (g)"),C(o,"type","number"),C(o,"class","svelte-1vd6ulv"),C(p,"name","cholesterol"),C(p,"placeholder","Cholesterol (mg)"),C(p,"type","number"),C(p,"class","svelte-1vd6ulv"),C(_,"name","fat"),C(_,"placeholder","Fat (g)"),C(_,"type","number"),C(_,"class","svelte-1vd6ulv"),C(x,"name","protein"),C(x,"placeholder","Protein (g)"),C(x,"type","number"),C(x,"class","svelte-1vd6ulv"),C(B,"name","sodium"),C(B,"placeholder","Sodium (mg)"),C(B,"type","number"),C(B,"class","svelte-1vd6ulv"),C(Y,"type","submit"),C(Y,"class","svelte-1vd6ulv")},m(Q,Z){z(Q,e,Z),z(Q,n,Z),z(Q,r,Z),z(Q,i,Z),z(Q,a,Z),d(a,o),d(a,u),d(a,s),d(a,l),d(a,h),d(a,c),d(a,p),d(a,g),d(a,v),d(a,f),d(a,y),d(a,k),d(a,_),d(a,b),d(a,w),d(a,m),d(a,E),d(a,K),d(a,x),d(a,S),d(a,R),d(a,N),d(a,$),d(a,M),d(a,B),d(a,I),d(a,P),d(a,W),d(a,J),d(a,q),d(a,Y),re||(ne=je(Y,"click",ti(t[3])),re=!0)},p:U,d(Q){Q&&L(e),Q&&L(n),Q&&L(r),Q&&L(i),Q&&L(a),re=!1,ne()}}}function Xr(t){let e,n;return e=new Oi({}),{c(){Zt(e.$$.fragment)},m(r,i){bt(e,r,i),n=!0},p:U,i(r){n||(ce(e.$$.fragment,r),n=!0)},o(r){me(e.$$.fragment,r),n=!1},d(r){_t(e,r)}}}function qo(t){return{c:U,m:U,p:U,i:U,o:U,d:U}}function Zo(t){let e,n,r=t[12],i=[];for(let o=0;o<r.length;o+=1)i[o]=Jr(Qr(t,r,o));const a=o=>me(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=cn()},m(o,u){for(let s=0;s<i.length;s+=1)i[s].m(o,u);z(o,e,u),n=!0},p(o,u){if(u&3){r=o[12];let s;for(s=0;s<r.length;s+=1){const l=Qr(o,r,s);i[s]?(i[s].p(l,u),ce(i[s],1)):(i[s]=Jr(l),i[s].c(),ce(i[s],1),i[s].m(e.parentNode,e))}for(Jt(),s=r.length;s<i.length;s+=1)a(s);qt()}},i(o){if(!n){for(let u=0;u<r.length;u+=1)ce(i[u]);n=!0}},o(o){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)me(i[u]);n=!1},d(o){qi(i,o),o&&L(e)}}}function Jr(t){let e,n;return e=new Oi({props:{name:t[13].name,nutrition:t[13].nutrition}}),e.$on("goal",t[8]),e.$on("items",t[9]),{c(){Zt(e.$$.fragment)},m(r,i){bt(e,r,i),n=!0},p:U,i(r){n||(ce(e.$$.fragment,r),n=!0)},o(r){me(e.$$.fragment,r),n=!1},d(r){_t(e,r)}}}function eu(t){return{c:U,m:U,p:U,i:U,o:U,d:U}}function qr(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!1,pending:eu,then:Zo,catch:qo,value:12,blocks:[,,,]};return Jn(pe.foodItems.toArray(),r),{c(){e=A("div"),r.block.c(),C(e,"id","items"),C(e,"class","svelte-1vd6ulv")},m(i,a){z(i,e,a),r.block.m(e,r.anchor=null),r.mount=()=>e,r.anchor=null,n=!0},p(i,a){t=i,qn(r,t,a)},i(i){n||(ce(r.block),n=!0)},o(i){for(let a=0;a<3;a+=1){const o=r.blocks[a];me(o)}n=!1},d(i){i&&L(e),r.block.d(),r.token=null,r=null}}}function tu(t){let e,n,r,i,a,o,u,s,l,h,c,p=t[0],g,v,f,y,k,_,b,w,m,E,K,x,S,R=t[1],N,$,M;e=new Gr({props:{id_:"overlay-add",$$slots:{default:[Xo]},$$scope:{ctx:t}}}),r=new Gr({props:{id_:"overlay-goal",$$slots:{default:[Jo]},$$scope:{ctx:t}}});let B=Xr(),I=qr(t);return{c(){Zt(e.$$.fragment),n=D(),Zt(r.$$.fragment),i=D(),a=A("div"),o=D(),u=A("main"),s=A("br"),l=D(),h=A("br"),c=D(),B.c(),g=D(),v=A("br"),f=D(),y=A("button"),y.textContent="Add Item",k=D(),_=A("button"),_.textContent="Edit Goal",b=D(),w=A("button"),w.textContent="Reset",m=D(),E=A("br"),K=D(),x=A("br"),S=D(),I.c(),C(a,"id","shadow"),C(a,"class","svelte-1vd6ulv"),C(y,"class","hover svelte-1vd6ulv"),C(_,"class","hover svelte-1vd6ulv"),C(w,"class","hover svelte-1vd6ulv"),C(u,"class","svelte-1vd6ulv")},m(P,W){bt(e,P,W),z(P,n,W),bt(r,P,W),z(P,i,W),z(P,a,W),z(P,o,W),z(P,u,W),d(u,s),d(u,l),d(u,h),d(u,c),B.m(u,null),d(u,g),d(u,v),d(u,f),d(u,y),d(u,k),d(u,_),d(u,b),d(u,w),d(u,m),d(u,E),d(u,K),d(u,x),d(u,S),I.m(u,null),N=!0,$||(M=[je(y,"click",Vt(t[6])),je(_,"click",Vt(t[7])),je(w,"click",Vt(t[4]))],$=!0)},p(P,[W]){const J={};W&65536&&(J.$$scope={dirty:W,ctx:P}),e.$set(J);const q={};W&65536&&(q.$$scope={dirty:W,ctx:P}),r.$set(q),W&1&&mt(p,p=P[0])?(Jt(),me(B,1,1,U),qt(),B=Xr(),B.c(),ce(B,1),B.m(u,g)):B.p(P,W),W&2&&mt(R,R=P[1])?(Jt(),me(I,1,1,U),qt(),I=qr(P),I.c(),ce(I,1),I.m(u,null)):I.p(P,W)},i(P){N||(ce(e.$$.fragment,P),ce(r.$$.fragment,P),ce(B),ce(I),N=!0)},o(P){me(e.$$.fragment,P),me(r.$$.fragment,P),me(B),me(I),N=!1},d(P){_t(e,P),P&&L(n),_t(r,P),P&&L(i),P&&L(a),P&&L(o),P&&L(u),B.d(P),I.d(P),$=!1,Je(M)}}}function nu(t,e,n){let r=!1,i=!1,a="";async function o(){const f=document.getElementById("overlay-add").children[2].elements,y=f.namedItem("name").value;await pe.foodItems.get(y)===void 0&&await pe.foodItems.add(new Bi(y,new We(parseInt(f.namedItem("carbohydrate").value),parseInt(f.namedItem("cholesterol").value),parseInt(f.namedItem("fat").value),parseInt(f.namedItem("protein").value),parseInt(f.namedItem("sodium").value)))),n(1,i=!i),document.getElementById("overlay-add").children[2].reset(),s()}async function u(){const f=document.getElementById("overlay-goal").children[2].elements,y=new We(parseInt(f.namedItem("carbohydrate").value),parseInt(f.namedItem("cholesterol").value),parseInt(f.namedItem("fat").value),parseInt(f.namedItem("protein").value),parseInt(f.namedItem("sodium").value));y.id=1,pe.nutritionValues.put(y),n(0,r=!r),document.getElementById("overlay-goal").children[2].reset(),s()}function s(){a!==""&&(document.getElementById("shadow").style.display="none",document.getElementById(a).style.display="none")}function l(){const f=new We(0,0,0,0,0);f.id=2,pe.nutritionValues.put(f),n(0,r=!r)}function h(f){document.getElementById("shadow").style.display="block",document.getElementById(f).style.display="block",a=f}return pe.nutritionValues.count().then(f=>{f||(pe.nutritionValues.bulkAdd([new We(300,300,60,150,2e3),new We(0,0,0,0,0)]),n(0,r=!r))}),document.body.addEventListener("click",()=>{s()}),[r,i,o,u,l,h,()=>h("overlay-add"),()=>h("overlay-goal"),()=>{n(0,r=!r)},()=>n(1,i=!i)]}class ru extends er{constructor(e){super(),Zn(this,e,nu,tu,mt,{})}}new ru({target:document.body});
