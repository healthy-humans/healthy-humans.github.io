var $r=Object.defineProperty;var Vr=(e,t,n)=>t in e?$r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var J=(e,t,n)=>(Vr(e,typeof t!="symbol"?t+"":t,n),n);const zr=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}};zr();function Ve(){}function tr(e){return e()}function Bn(){return Object.create(null)}function Ct(e){e.forEach(tr)}function Wr(e){return typeof e=="function"}function nr(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ur(e){return Object.keys(e).length===0}function Hr(e,t){e.appendChild(t)}function rr(e,t,n){e.insertBefore(t,n||null)}function yn(e){e.parentNode.removeChild(e)}function Yr(e){return document.createElement(e)}function ir(e){return document.createTextNode(e)}function Xr(){return ir(" ")}function Qr(e){return Array.from(e.childNodes)}function Gr(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}let mn;function Ne(e){mn=e}const Be=[],Mn=[],ct=[],Fn=[],Jr=Promise.resolve();let Lt=!1;function qr(){Lt||(Lt=!0,Jr.then(ar))}function $t(e){ct.push(e)}const Pt=new Set;let rt=0;function ar(){const e=mn;do{for(;rt<Be.length;){const t=Be[rt];rt++,Ne(t),Zr(t.$$)}for(Ne(null),Be.length=0,rt=0;Mn.length;)Mn.pop()();for(let t=0;t<ct.length;t+=1){const n=ct[t];Pt.has(n)||(Pt.add(n),n())}ct.length=0}while(Be.length);for(;Fn.length;)Fn.pop()();Lt=!1,Pt.clear(),Ne(e)}function Zr(e){if(e.fragment!==null){e.update(),Ct(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach($t)}}const lt=new Set;let ei;function Vt(e,t){e&&e.i&&(lt.delete(e),e.i(t))}function Nn(e,t,n,r){if(e&&e.o){if(lt.has(e))return;lt.add(e),ei.c.push(()=>{lt.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}function jn(e){e&&e.c()}function zt(e,t,n,r){const{fragment:i,on_mount:a,on_destroy:u,after_update:o}=e.$$;i&&i.m(t,n),r||$t(()=>{const s=a.map(tr).filter(Wr);u?u.push(...s):Ct(s),e.$$.on_mount=[]}),o.forEach($t)}function Wt(e,t){const n=e.$$;n.fragment!==null&&(Ct(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ti(e,t){e.$$.dirty[0]===-1&&(Be.push(e),qr(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ur(e,t,n,r,i,a,u,o=[-1]){const s=mn;Ne(e);const c=e.$$={fragment:null,ctx:null,props:a,update:Ve,not_equal:i,bound:Bn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:Bn(),dirty:o,skip_bound:!1,root:t.target||s.$$.root};u&&u(c.root);let f=!1;if(c.ctx=n?n(e,t.props||{},(l,h,..._)=>{const d=_.length?_[0]:h;return c.ctx&&i(c.ctx[l],c.ctx[l]=d)&&(!c.skip_bound&&c.bound[l]&&c.bound[l](d),f&&ti(e,l)),h}):[],c.update(),f=!0,Ct(c.before_update),c.fragment=r?r(c.ctx):!1,t.target){if(t.hydrate){const l=Qr(t.target);c.fragment&&c.fragment.l(l),l.forEach(yn)}else c.fragment&&c.fragment.c();t.intro&&Vt(e.$$.fragment),zt(e,t.target,t.anchor,t.customElement),ar()}Ne(s)}class or{$destroy(){Wt(this,1),this.$destroy=Ve}$on(t,n){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Ur(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ni(e){let t,n;return{c(){t=Yr("h1"),n=ir(e[0])},m(r,i){rr(r,t,i),Hr(t,n)},p(r,[i]){i&1&&Gr(n,r[0])},i:Ve,o:Ve,d(r){r&&yn(t)}}}function ri(e,t,n){let{name:r=""}=t;return e.$$set=i=>{"name"in i&&n(0,r=i.name)},[r]}class Ln extends or{constructor(t){super(),ur(this,t,ri,ni,nr,{name:0})}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var I=function(){return I=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},I.apply(this,arguments)};function Ut(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var M=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,N=Object.keys,V=Array.isArray;typeof Promise!="undefined"&&!M.Promise&&(M.Promise=Promise);function W(e,t){return typeof t!="object"||N(t).forEach(function(n){e[n]=t[n]}),e}var ze=Object.getPrototypeOf,ii={}.hasOwnProperty;function H(e,t){return ii.call(e,t)}function Te(e,t){typeof t=="function"&&(t=t(ze(e))),(typeof Reflect=="undefined"?N:Reflect.ownKeys)(t).forEach(function(n){se(e,n,t[n])})}var sr=Object.defineProperty;function se(e,t,n,r){sr(e,t,W(n&&H(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function De(e){return{from:function(t){return e.prototype=Object.create(t.prototype),se(e.prototype,"constructor",e),{extend:Te.bind(null,e.prototype)}}}}var ai=Object.getOwnPropertyDescriptor;function gn(e,t){var n=ai(e,t),r;return n||(r=ze(e))&&gn(r,t)}var ui=[].slice;function kt(e,t,n){return ui.call(e,t,n)}function cr(e,t){return t(e)}function Me(e){if(!e)throw new Error("Assertion Failed")}function lr(e){M.setImmediate?setImmediate(e):setTimeout(e,0)}function fr(e,t){return e.reduce(function(n,r,i){var a=t(r,i);return a&&(n[a[0]]=a[1]),n},{})}function oi(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function oe(e,t){if(H(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var a=oe(e,t[r]);n.push(a)}return n}var u=t.indexOf(".");if(u!==-1){var o=e[t.substr(0,u)];return o===void 0?void 0:oe(o,t.substr(u+1))}}function q(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Me(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)q(e,t[r],n[r])}else{var a=t.indexOf(".");if(a!==-1){var u=t.substr(0,a),o=t.substr(a+1);if(o==="")n===void 0?V(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=n;else{var s=e[u];(!s||!H(e,u))&&(s=e[u]={}),q(s,o,n)}}else n===void 0?V(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function si(e,t){typeof t=="string"?q(e,t,void 0):"length"in t&&[].map.call(t,function(n){q(e,n,void 0)})}function hr(e){var t={};for(var n in e)H(e,n)&&(t[n]=e[n]);return t}var ci=[].concat;function dr(e){return ci.apply([],e)}var pr="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(dr([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return M[e]}),li=pr.map(function(e){return M[e]});fr(pr,function(e){return[e,!0]});var de=null;function Ge(e){de=typeof WeakMap!="undefined"&&new WeakMap;var t=Ht(e);return de=null,t}function Ht(e){if(!e||typeof e!="object")return e;var t=de&&de.get(e);if(t)return t;if(V(e)){t=[],de&&de.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Ht(e[n]))}else if(li.indexOf(e.constructor)>=0)t=e;else{var i=ze(e);t=i===Object.prototype?{}:Object.create(i),de&&de.set(e,t);for(var a in e)H(e,a)&&(t[a]=Ht(e[a]))}return t}var fi={}.toString;function Yt(e){return fi.call(e).slice(8,-1)}var Xt=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",hi=typeof Xt=="symbol"?function(e){var t;return e!=null&&(t=e[Xt])&&t.apply(e)}:function(){return null},Ce={};function ae(e){var t,n,r,i;if(arguments.length===1){if(V(e))return e.slice();if(this===Ce&&typeof e=="string")return[e];if(i=hi(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var _n=typeof Symbol!="undefined"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ne=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function vr(e,t){ne=e,yr=t}var yr=function(){return!0},di=!new Error("").stack;function Ae(){if(di)try{throw Ae.arguments,new Error}catch(e){return e}return new Error}function Qt(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(yr).map(function(r){return`
`+r}).join("")):""}var pi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],mr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],bn=pi.concat(mr),vi={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ie(e,t){this._e=Ae(),this.name=e,this.message=t}De(Ie).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Qt(this._e,2))}},toString:function(){return this.name+": "+this.message}});function gr(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function mt(e,t,n,r){this._e=Ae(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=gr(e,t)}De(mt).from(Ie);function je(e,t){this._e=Ae(),this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=gr(e,t)}De(je).from(Ie);var wn=bn.reduce(function(e,t){return e[t]=t+"Error",e},{}),yi=Ie,k=bn.reduce(function(e,t){var n=t+"Error";function r(i,a){this._e=Ae(),this.name=n,i?typeof i=="string"?(this.message=""+i+(a?`
 `+a:""),this.inner=a||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=vi[t]||n,this.inner=null)}return De(r).from(yi),e[t]=r,e},{});k.Syntax=SyntaxError;k.Type=TypeError;k.Range=RangeError;var $n=mr.reduce(function(e,t){return e[t+"Error"]=k[t],e},{});function mi(e,t){if(!e||e instanceof Ie||e instanceof TypeError||e instanceof SyntaxError||!e.name||!$n[e.name])return e;var n=new $n[e.name](t||e.message,e);return"stack"in e&&se(n,"stack",{get:function(){return this.inner.stack}}),n}var Tt=bn.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=k[t]),e},{});Tt.ModifyError=mt;Tt.DexieError=Ie;Tt.BulkError=je;function B(){}function Je(e){return e}function gi(e,t){return e==null||e===Je?t:function(n){return t(e(n))}}function xe(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function _i(e,t){return e===B?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?xe(r,this.onsuccess):r),i&&(this.onerror=this.onerror?xe(i,this.onerror):i),a!==void 0?a:n}}function bi(e,t){return e===B?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?xe(n,this.onsuccess):n),r&&(this.onerror=this.onerror?xe(r,this.onerror):r)}}function wi(e,t){return e===B?t:function(n){var r=e.apply(this,arguments);W(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var u=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?xe(i,this.onsuccess):i),a&&(this.onerror=this.onerror?xe(a,this.onerror):a),r===void 0?u===void 0?void 0:u:W(r,u)}}function xi(e,t){return e===B?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function xn(e,t){return e===B?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}var We={},Ei=100,Ai=20,_r=100,En=typeof Promise=="undefined"?[]:function(){var e=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[e,ze(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,ze(t),e]}(),Gt=En[0],gt=En[1],Jt=En[2],br=gt&&gt.then,ft=Gt&&Gt.constructor,An=!!Jt,qt=!1,Si=Jt?function(){Jt.then(it)}:M.setImmediate?setImmediate.bind(null,it):M.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){it(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(it,0)},Ue=function(e,t){Fe.push([e,t]),_t&&(Si(),_t=!1)},Zt=!0,_t=!0,be=[],ht=[],en=null,tn=Je,ke={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Wn,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{Wn(e[0],e[1])}catch{}})}},S=ke,Fe=[],we=0,dt=[];function A(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=B,this._lib=!1;var t=this._PSD=S;if(ne&&(this._stackHolder=Ae(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==We)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&rn(this,this._value);return}this._state=null,this._value=null,++t.ref,xr(this,e)}var nn={get:function(){var e=S,t=bt;function n(r,i){var a=this,u=!e.global&&(e!==S||t!==bt),o=u&&!ce(),s=new A(function(c,f){Sn(a,new wr(xt(r,e,u,o),xt(i,e,u,o),c,f,e))});return ne&&Sr(s,this),s}return n.prototype=We,n},set:function(e){se(this,"then",e&&e.prototype===We?nn:{get:function(){return e},set:nn.set})}};Te(A.prototype,{then:nn,_then:function(e,t){Sn(this,new wr(null,null,e,t,S))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):pt(r)}):this.then(null,function(r){return r&&r.name===t?n(r):pt(r)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),pt(t)})},stack:{get:function(){if(this._stack)return this._stack;try{qt=!0;var e=Ar(this,[],Ai),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{qt=!1}}},timeout:function(e,t){var n=this;return e<1/0?new A(function(r,i){var a=setTimeout(function(){return i(new k.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,a))}):this}});typeof Symbol!="undefined"&&Symbol.toStringTag&&se(A.prototype,Symbol.toStringTag,"Dexie.Promise");ke.env=Kr();function wr(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}Te(A,{all:function(){var e=ae.apply(null,arguments).map(wt);return new A(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,a){return A.resolve(i).then(function(u){e[a]=u,--r||t(e)},n)})})},resolve:function(e){if(e instanceof A)return e;if(e&&typeof e.then=="function")return new A(function(n,r){e.then(n,r)});var t=new A(We,!0,e);return Sr(t,en),t},reject:pt,race:function(){var e=ae.apply(null,arguments).map(wt);return new A(function(t,n){e.map(function(r){return A.resolve(r).then(t,n)})})},PSD:{get:function(){return S},set:function(e){return S=e}},totalEchoes:{get:function(){return bt}},newPSD:ve,usePSD:Re,scheduler:{get:function(){return Ue},set:function(e){Ue=e}},rejectionMapper:{get:function(){return tn},set:function(e){tn=e}},follow:function(e,t){return new A(function(n,r){return ve(function(i,a){var u=S;u.unhandleds=[],u.onunhandled=a,u.finalize=xe(function(){var o=this;Ci(function(){o.unhandleds.length===0?i():a(o.unhandleds[0])})},u.finalize),e()},t,n,r)})}});ft&&(ft.allSettled&&se(A,"allSettled",function(){var e=ae.apply(null,arguments).map(wt);return new A(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,a){return A.resolve(i).then(function(u){return r[a]={status:"fulfilled",value:u}},function(u){return r[a]={status:"rejected",reason:u}}).then(function(){return--n||t(r)})})})}),ft.any&&typeof AggregateError!="undefined"&&se(A,"any",function(){var e=ae.apply(null,arguments).map(wt);return new A(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(a,u){return A.resolve(a).then(function(o){return t(o)},function(o){i[u]=o,--r||n(new AggregateError(i))})})})}));function xr(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&qe();n&&typeof n.then=="function"?xr(e,function(i,a){n instanceof A?n._then(i,a):n.then(i,a)}):(e._state=!0,e._value=n,Er(e)),r&&Ze()}},rn.bind(null,e))}catch(n){rn(e,n)}}function rn(e,t){if(ht.push(t),e._state===null){var n=e._lib&&qe();t=tn(t),e._state=!1,e._value=t,ne&&t!==null&&typeof t=="object"&&!t._promise&&oi(function(){var r=gn(t,"stack");t._promise=e,se(t,"stack",{get:function(){return qt?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),ki(e),Er(e),n&&Ze()}}function Er(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Sn(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),we===0&&(++we,Ue(function(){--we===0&&Kn()},[]))}function Sn(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++we,Ue(Ki,[n,e,t])}function Ki(e,t,n){try{en=t;var r,i=t._value;t._state?r=e(i):(ht.length&&(ht=[]),r=e(i),ht.indexOf(i)===-1&&Ti(t)),n.resolve(r)}catch(a){n.reject(a)}finally{en=null,--we===0&&Kn(),--n.psd.ref||n.psd.finalize()}}function Ar(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i=e._value,a,u;i!=null?(a=i.name||"Error",u=i.message||i,r=Qt(i,0)):(a=i,u=""),t.push(a+(u?": "+u:"")+r)}return ne&&(r=Qt(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&Ar(e._prev,t,n)),t}function Sr(e,t){var n=t?t._numPrev+1:0;n<Ei&&(e._prev=t,e._numPrev=n)}function it(){qe()&&Ze()}function qe(){var e=Zt;return Zt=!1,_t=!1,e}function Ze(){var e,t,n;do for(;Fe.length>0;)for(e=Fe,Fe=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Fe.length>0);Zt=!0,_t=!0}function Kn(){var e=be;be=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=dt.slice(0),n=t.length;n;)t[--n]()}function Ci(e){function t(){e(),dt.splice(dt.indexOf(t),1)}dt.push(t),++we,Ue(function(){--we===0&&Kn()},[])}function ki(e){be.some(function(t){return t._value===e._value})||be.push(e)}function Ti(e){for(var t=be.length;t;)if(be[--t]._value===e._value){be.splice(t,1);return}}function pt(e){return new A(We,!1,e)}function F(e,t){var n=S;return function(){var r=qe(),i=S;try{return ye(n,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{ye(i,!1),r&&Ze()}}}var $={awaits:0,echoes:0,id:0},Di=0,vt=[],Rt=0,bt=0,Ii=0;function ve(e,t,n,r){var i=S,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++Ii;var u=ke.env;a.env=An?{Promise:A,PromiseProp:{value:A,configurable:!0,writable:!0},all:A.all,race:A.race,allSettled:A.allSettled,any:A.any,resolve:A.resolve,reject:A.reject,nthen:Vn(u.nthen,a),gthen:Vn(u.gthen,a)}:{},t&&W(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=Re(a,e,n,r);return a.ref===0&&a.finalize(),o}function Pe(){return $.id||($.id=++Di),++$.awaits,$.echoes+=_r,$.id}function ce(){return $.awaits?(--$.awaits===0&&($.id=0),$.echoes=$.awaits*_r,!0):!1}(""+br).indexOf("[native code]")===-1&&(Pe=ce=B);function wt(e){return $.echoes&&e&&e.constructor===ft?(Pe(),e.then(function(t){return ce(),t},function(t){return ce(),j(t)})):e}function Pi(e){++bt,(!$.echoes||--$.echoes===0)&&($.echoes=$.id=0),vt.push(S),ye(e,!0)}function Ri(){var e=vt[vt.length-1];vt.pop(),ye(e,!1)}function ye(e,t){var n=S;if((t?$.echoes&&(!Rt++||e!==S):Rt&&(!--Rt||e!==S))&&Cr(t?Pi.bind(null,e):Ri),e!==S&&(S=e,n===ke&&(ke.env=Kr()),An)){var r=ke.env.Promise,i=e.env;gt.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(M,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Kr(){var e=M.Promise;return An?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(M,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:gt.then,gthen:e.prototype.then}:{}}function Re(e,t,n,r,i){var a=S;try{return ye(e,!0),t(n,r,i)}finally{ye(a,!1)}}function Cr(e){br.call(Gt,e)}function xt(e,t,n,r){return typeof e!="function"?e:function(){var i=S;n&&Pe(),ye(t,!0);try{return e.apply(this,arguments)}finally{ye(i,!1),r&&Cr(ce)}}}function Vn(e,t){return function(n,r){return e.call(this,xt(n,t),xt(r,t))}}var zn="unhandledrejection";function Wn(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(M.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(zn,!0,!0),W(r,i)):M.CustomEvent&&(r=new CustomEvent(zn,{detail:i}),W(r,i)),r&&M.dispatchEvent&&(dispatchEvent(r),!M.PromiseRejectionEvent&&M.onunhandledrejection))try{M.onunhandledrejection(r)}catch{}ne&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch{}}var j=A.reject;function an(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!S.letThrough&&!e._vip){if(e._state.openComplete)return j(new k.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return j(new k.DatabaseClosed);e.open().catch(B)}return e._state.dbReadyPromise.then(function(){return an(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(a){return a.name===wn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return an(e,t,n,r)})):j(a)}return i._promise(t,function(a,u){return ve(function(){return S.trans=i,r(a,u,i)})}).then(function(a){return i._completion.then(function(){return a})})}}var Un="3.2.2",_e=String.fromCharCode(65535),un=-1/0,re="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",kr="String expected.",Le=[],Dt=typeof navigator!="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Oi=Dt,Bi=Dt,Tr=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},It="__dbnames",Ot="readonly",Bt="readwrite";function Ee(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Dr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function at(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=Ge(t),delete t[e]),t}:function(t){return t}}var Mi=function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||S.trans,a=this.name;function u(s,c,f){if(!f.schema[a])throw new k.NotFound("Table "+a+" not part of transaction");return n(f.idbtrans,f)}var o=qe();try{return i&&i.db===this.db?i===S.trans?i._promise(t,u,r):ve(function(){return i._promise(t,u,r)},{trans:i,transless:S.transless||S}):an(this.db,t,[this.name],u)}finally{o&&Ze()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(a){return r.hook.reading.fire(a)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(V(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var n=N(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(f){return f.compound&&n.every(function(l){return f.keyPath.indexOf(l)>=0})&&f.keyPath.every(function(l){return n.indexOf(l)>=0})})[0];if(r&&this.db._maxKey!==_e)return this.where(r.name).equals(r.keyPath.map(function(f){return t[f]}));!r&&ne&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,a=this.db._deps.indexedDB;function u(f,l){try{return a.cmp(f,l)===0}catch{return!1}}var o=n.reduce(function(f,l){var h=f[0],_=f[1],d=i[l],p=t[l];return[h||d,h||!d?Ee(_,d&&d.multi?function(y){var b=oe(y,l);return V(b)&&b.some(function(w){return u(p,w)})}:function(y){return u(p,oe(y,l))}):_]},[null,null]),s=o[0],c=o[1];return s?this.where(s.name).equals(t[s.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,V(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var n=function(r){if(!r)return r;var i=Object.create(t.prototype);for(var a in r)if(H(r,a))try{i[a]=r[a]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t},e.prototype.defineClass=function(){function t(n){W(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,u=i.keyPath,o=t;return u&&a&&(o=at(u)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[o]})}).then(function(s){return s.numFailures?A.reject(s.failures[0]):s.lastResult}).then(function(s){if(u)try{q(t,u,s)}catch{}return s})},e.prototype.update=function(t,n){if(typeof t=="object"&&!V(t)){var r=oe(t,this.schema.primKey.keyPath);if(r===void 0)return j(new k.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?N(n).forEach(function(i){q(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,u=i.keyPath,o=t;return u&&a&&(o=at(u)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"put",values:[o],keys:n!=null?[n]:null})}).then(function(s){return s.numFailures?A.reject(s.failures[0]):s.lastResult}).then(function(s){if(u)try{q(t,u,s)}catch{}return s})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?A.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:Dr})}).then(function(n){return n.numFailures?A.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(a){return n.hook.reading.fire(a)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var u=r?r.allKeys:void 0;return this._trans("readwrite",function(o){var s=i.schema.primKey,c=s.auto,f=s.keyPath;if(f&&a)throw new k.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new k.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,h=f&&c?t.map(at(f)):t;return i.core.mutate({trans:o,type:"add",keys:a,values:h,wantResults:u}).then(function(_){var d=_.numFailures,p=_.results,y=_.lastResult,b=_.failures,w=u?p:y;if(d===0)return w;throw new je(i.name+".bulkAdd(): "+d+" of "+l+" operations failed",b)})})},e.prototype.bulkPut=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var u=r?r.allKeys:void 0;return this._trans("readwrite",function(o){var s=i.schema.primKey,c=s.auto,f=s.keyPath;if(f&&a)throw new k.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new k.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,h=f&&c?t.map(at(f)):t;return i.core.mutate({trans:o,type:"put",keys:a,values:h,wantResults:u}).then(function(_){var d=_.numFailures,p=_.results,y=_.lastResult,b=_.failures,w=u?p:y;if(d===0)return w;throw new je(i.name+".bulkPut(): "+d+" of "+l+" operations failed",b)})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var a=i.numFailures,u=i.lastResult,o=i.failures;if(a===0)return u;throw new je(n.name+".bulkDelete(): "+a+" of "+r+" operations failed",o)})},e}();function et(e){var t={},n=function(o,s){if(s){for(var c=arguments.length,f=new Array(c-1);--c;)f[c-1]=arguments[c];return t[o].subscribe.apply(null,f),e}else if(typeof o=="string")return t[o]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(o,s,c){if(typeof o=="object")return u(o);s||(s=xi),c||(c=B);var f={subscribers:[],fire:c,subscribe:function(l){f.subscribers.indexOf(l)===-1&&(f.subscribers.push(l),f.fire=s(f.fire,l))},unsubscribe:function(l){f.subscribers=f.subscribers.filter(function(h){return h!==l}),f.fire=f.subscribers.reduce(s,c)}};return t[o]=n[o]=f,f}function u(o){N(o).forEach(function(s){var c=o[s];if(V(c))a(s,o[s][0],o[s][1]);else if(c==="asap")var f=a(s,Je,function(){for(var h=arguments.length,_=new Array(h);h--;)_[h]=arguments[h];f.subscribers.forEach(function(d){lr(function(){d.apply(null,_)})})});else throw new k.InvalidArgument("Invalid event config")})}}function tt(e,t){return De(t).from({prototype:e}),t}function Fi(e){return tt(Mi.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:et(null,{creating:[_i,B],reading:[gi,Je],updating:[wi,B],deleting:[bi,B]})})}function Se(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Mt(e,t){e.filter=Ee(e.filter,t)}function Ft(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Ee(r(),t())}:t,e.justLimit=n&&!r}function Ni(e,t){e.isMatch=Ee(e.isMatch,t)}function yt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new k.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Hn(e,t,n){var r=yt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function ut(e,t,n,r){var i=e.replayFilter?Ee(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},u=function(o,s,c){if(!i||i(s,c,function(h){return s.stop(h)},function(h){return s.fail(h)})){var f=s.primaryKey,l=""+f;l==="[object ArrayBuffer]"&&(l=""+new Uint8Array(f)),H(a,l)||(a[l]=!0,t(o,s,c))}};return Promise.all([e.or._iterate(u,n),Yn(Hn(e,r,n),e.algorithm,u,!e.keysOnly&&e.valueMapper)])}else return Yn(Hn(e,r,n),Ee(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Yn(e,t,n,r){var i=r?function(u,o,s){return n(r(u),o,s)}:n,a=F(i);return e.then(function(u){if(u)return u.start(function(){var o=function(){return u.continue()};(!t||t(u,function(s){return o=s},function(s){u.stop(s),o=B},function(s){u.fail(s),o=B}))&&a(u.value,u,function(s){return o=s}),o()})})}function z(e,t){try{var n=Xn(e),r=Xn(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return Li(Qn(e),Qn(t));case"Array":return ji(e,t)}}catch{}return NaN}function ji(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a){var u=z(e[a],t[a]);if(u!==0)return u}return n===r?0:n<r?-1:1}function Li(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return n===r?0:n<r?-1:1}function Xn(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=Yt(e);return n==="ArrayBuffer"?"binary":n}function Qn(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var $i=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,j.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,j.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Ee(n.algorithm,t)},e.prototype._iterate=function(t,n){return ut(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&W(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return ut(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,a=i.table.core;if(Se(i,!0))return a.count({trans:r,query:{index:yt(i,a.schema),range:i.range}}).then(function(o){return Math.min(o,i.limit)});var u=0;return ut(i,function(){return++u,!1},r,a).then(function(){return u})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],a=r.length-1;function u(c,f){return f?u(c[r[f]],f-1):c[i]}var o=this._ctx.dir==="next"?1:-1;function s(c,f){var l=u(c,a),h=u(f,a);return l<h?-o:l>h?o:0}return this.toArray(function(c){return c.sort(s)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&Se(i,!0)&&i.limit>0){var a=i.valueMapper,u=yt(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:u,range:i.range}}).then(function(s){var c=s.result;return a?c.map(a):c})}else{var o=[];return ut(i,function(s){return o.push(s)},r,i.table.core).then(function(){return o})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,Se(n)?Ft(n,function(){var r=t;return function(i,a){return r===0?!0:r===1?(--r,!1):(a(function(){i.advance(r),r=0}),!1)}}):Ft(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Ft(this._ctx,function(){var n=t;return function(r,i,a){return--n<=0&&i(a),n>=0}},!0),this},e.prototype.until=function(t,n){return Mt(this._ctx,function(r,i,a){return t(r.value)?(i(a),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return Mt(this._ctx,function(n){return t(n.value)}),Ni(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&Se(n,!0)&&n.limit>0)return this._read(function(i){var a=yt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:a,range:n.range}})}).then(function(i){var a=i.result;return a}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return Mt(this._ctx,function(i){var a=i.primaryKey.toString(),u=H(r,a);return r[a]=!0,!u}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var a;if(typeof t=="function")a=t;else{var u=N(t),o=u.length;a=function(b){for(var w=!1,m=0;m<o;++m){var g=u[m],v=t[g];oe(b,g)!==v&&(q(b,g,v),w=!0)}return w}}var s=r.table.core,c=s.schema.primaryKey,f=c.outbound,l=c.extractKey,h=n.db._options.modifyChunkSize||200,_=[],d=0,p=[],y=function(b,w){var m=w.failures,g=w.numFailures;d+=b-g;for(var v=0,x=N(m);v<x.length;v++){var K=x[v];_.push(m[K])}};return n.clone().primaryKeys().then(function(b){var w=function(m){var g=Math.min(h,b.length-m);return s.getMany({trans:i,keys:b.slice(m,m+g),cache:"immutable"}).then(function(v){for(var x=[],K=[],E=f?[]:null,C=[],T=0;T<g;++T){var R=v[T],O={value:Ge(R),primKey:b[m+T]};a.call(O,O.value,O)!==!1&&(O.value==null?C.push(b[m+T]):!f&&z(l(R),l(O.value))!==0?(C.push(b[m+T]),x.push(O.value)):(K.push(O.value),f&&E.push(b[m+T])))}var P=Se(r)&&r.limit===1/0&&(typeof t!="function"||t===Nt)&&{index:r.index,range:r.range};return Promise.resolve(x.length>0&&s.mutate({trans:i,type:"add",values:x}).then(function(L){for(var D in L.failures)C.splice(parseInt(D),1);y(x.length,L)})).then(function(){return(K.length>0||P&&typeof t=="object")&&s.mutate({trans:i,type:"put",keys:E,values:K,criteria:P,changeSpec:typeof t!="function"&&t}).then(function(L){return y(K.length,L)})}).then(function(){return(C.length>0||P&&t===Nt)&&s.mutate({trans:i,type:"delete",keys:C,criteria:P}).then(function(L){return y(C.length,L)})}).then(function(){return b.length>m+g&&w(m+h)})})};return w(0).then(function(){if(_.length>0)throw new mt("Error modifying one or more objects",_,d,p);return b.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return Se(t)&&(t.isPrimKey&&!Bi||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,a=n;return t.table.core.count({trans:r,query:{index:i,range:a}}).then(function(u){return t.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(function(o){var s=o.failures;o.lastResult,o.results;var c=o.numFailures;if(c)throw new mt("Could not delete some values",Object.keys(s).map(function(f){return s[f]}),u-c);return u-c})})}):this.modify(Nt)},e}(),Nt=function(e,t){return t.value=null};function Vi(e){return tt($i.prototype,function(n,r){this.db=e;var i=Dr,a=null;if(r)try{i=r()}catch(c){a=c}var u=n._ctx,o=u.table,s=o.hook.reading.fire;this._ctx={table:o,index:u.index,isPrimKey:!u.index||o.schema.primKey.keyPath&&u.index===o.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:a,or:u.or,valueMapper:s!==Je?s:null}})}function zi(e,t){return e<t?-1:e===t?0:1}function Wi(e,t){return e>t?-1:e===t?0:1}function U(e,t,n){var r=e instanceof Pr?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Ke(e){return new e.Collection(e,function(){return Ir("")}).limit(0)}function Ui(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function Hi(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function Yi(e,t,n,r,i,a){for(var u=Math.min(e.length,r.length),o=-1,s=0;s<u;++s){var c=t[s];if(c!==r[s])return i(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):i(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):o>=0?e.substr(0,o)+t[o]+n.substr(o+1):null;i(e[s],c)<0&&(o=s)}return u<r.length&&a==="next"?e+n.substr(e.length):u<e.length&&a==="prev"?e.substr(0,n.length):o<0?null:e.substr(0,o)+r[o]+n.substr(o+1)}function ot(e,t,n,r){var i,a,u,o,s,c,f,l=n.length;if(!n.every(function(p){return typeof p=="string"}))return U(e,kr);function h(p){i=Ui(p),a=Hi(p),u=p==="next"?zi:Wi;var y=n.map(function(b){return{lower:a(b),upper:i(b)}}).sort(function(b,w){return u(b.lower,w.lower)});o=y.map(function(b){return b.upper}),s=y.map(function(b){return b.lower}),c=p,f=p==="next"?"":r}h("next");var _=new e.Collection(e,function(){return he(o[0],s[l-1]+r)});_._ondirectionchange=function(p){h(p)};var d=0;return _._addAlgorithm(function(p,y,b){var w=p.key;if(typeof w!="string")return!1;var m=a(w);if(t(m,s,d))return!0;for(var g=null,v=d;v<l;++v){var x=Yi(w,m,o[v],s[v],u,c);x===null&&g===null?d=v+1:(g===null||u(g,x)>0)&&(g=x)}return y(g!==null?function(){p.continue(g+f)}:b),!1}),_}function he(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Ir(e){return{type:1,lower:e,upper:e}}var Pr=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?Ke(this):new this.Collection(this,function(){return he(t,n,!r,!i)})}catch{return U(this,re)}},e.prototype.equals=function(t){return t==null?U(this,re):new this.Collection(this,function(){return Ir(t)})},e.prototype.above=function(t){return t==null?U(this,re):new this.Collection(this,function(){return he(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?U(this,re):new this.Collection(this,function(){return he(t,void 0,!1)})},e.prototype.below=function(t){return t==null?U(this,re):new this.Collection(this,function(){return he(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?U(this,re):new this.Collection(this,function(){return he(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?U(this,kr):this.between(t,t+_e,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):ot(this,function(n,r){return n.indexOf(r[0])===0},[t],_e)},e.prototype.equalsIgnoreCase=function(t){return ot(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=ae.apply(Ce,arguments);return t.length===0?Ke(this):ot(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=ae.apply(Ce,arguments);return t.length===0?Ke(this):ot(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,_e)},e.prototype.anyOf=function(){var t=this,n=ae.apply(Ce,arguments),r=this._cmp;try{n.sort(r)}catch{return U(this,re)}if(n.length===0)return Ke(this);var i=new this.Collection(this,function(){return he(n[0],n[n.length-1])});i._ondirectionchange=function(u){r=u==="next"?t._ascending:t._descending,n.sort(r)};var a=0;return i._addAlgorithm(function(u,o,s){for(var c=u.key;r(c,n[a])>0;)if(++a,a===n.length)return o(s),!1;return r(c,n[a])===0?!0:(o(function(){u.continue(n[a])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[un,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=ae.apply(Ce,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return U(this,re)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[un,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,a=this._ascending,u=this._descending,o=this._min,s=this._max;if(t.length===0)return Ke(this);if(!t.every(function(v){return v[0]!==void 0&&v[1]!==void 0&&a(v[0],v[1])<=0}))return U(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",k.InvalidArgument);var c=!n||n.includeLowers!==!1,f=n&&n.includeUppers===!0;function l(v,x){for(var K=0,E=v.length;K<E;++K){var C=v[K];if(i(x[0],C[1])<0&&i(x[1],C[0])>0){C[0]=o(C[0],x[0]),C[1]=s(C[1],x[1]);break}}return K===E&&v.push(x),v}var h=a;function _(v,x){return h(v[0],x[0])}var d;try{d=t.reduce(l,[]),d.sort(_)}catch{return U(this,re)}var p=0,y=f?function(v){return a(v,d[p][1])>0}:function(v){return a(v,d[p][1])>=0},b=c?function(v){return u(v,d[p][0])>0}:function(v){return u(v,d[p][0])>=0};function w(v){return!y(v)&&!b(v)}var m=y,g=new this.Collection(this,function(){return he(d[0][0],d[d.length-1][1],!c,!f)});return g._ondirectionchange=function(v){v==="next"?(m=y,h=a):(m=b,h=u),d.sort(_)},g._addAlgorithm(function(v,x,K){for(var E=v.key;m(E);)if(++p,p===d.length)return x(K),!1;return w(E)?!0:(r._cmp(E,d[p][1])===0||r._cmp(E,d[p][0])===0||x(function(){h===a?v.continue(d[p][0]):v.continue(d[p][1])}),!1)}),g},e.prototype.startsWithAnyOf=function(){var t=ae.apply(Ce,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?Ke(this):this.inAnyRange(t.map(function(n){return[n,n+_e]})):U(this,"startsWithAnyOf() only works with strings")},e}();function Xi(e){return tt(Pr.prototype,function(n,r,i){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i};var a=e._deps.indexedDB;if(!a)throw new k.MissingAPI;this._cmp=this._ascending=a.cmp.bind(a),this._descending=function(u,o){return a.cmp(o,u)},this._max=function(u,o){return a.cmp(u,o)>0?u:o},this._min=function(u,o){return a.cmp(u,o)<0?u:o},this._IDBKeyRange=e._deps.IDBKeyRange})}function te(e){return F(function(t){return He(t),e(t.target.error),!1})}function He(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Ye="storagemutated",pe="x-storagemutated-1",me=et(null,Ye),Qi=function(){function e(){}return e.prototype._lock=function(){return Me(!S.global),++this._reculock,this._reculock===1&&!S.global&&(S.lockOwnerFor=this),this},e.prototype._unlock=function(){if(Me(!S.global),--this._reculock===0)for(S.global||(S.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Re(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&S.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(Me(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new k.DatabaseClosed(i);case"MissingAPIError":throw new k.MissingAPI(i.message,i);default:throw new k.OpenFailed(i)}if(!this.active)throw new k.TransactionInactive;return Me(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=F(function(a){He(a),n._reject(t.error)}),t.onabort=F(function(a){He(a),n.active&&n._reject(new k.Abort(t.error)),n.active=!1,n.on("abort").fire(a)}),t.oncomplete=F(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&me.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return j(new k.ReadOnly("Transaction is readonly"));if(!this.active)return j(new k.TransactionInactive);if(this._locked())return new A(function(u,o){i._blockedFuncs.push([function(){i._promise(t,n,r).then(u,o)},S])});if(r)return ve(function(){var u=new A(function(o,s){i._lock();var c=n(o,s,i);c&&c.then&&c.then(o,s)});return u.finally(function(){return i._unlock()}),u._lib=!0,u});var a=new A(function(u,o){var s=n(u,o,i);s&&s.then&&s.then(u,o)});return a._lib=!0,a},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=A.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function u(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=u)})()}var a=n._waitingFor;return new A(function(u,o){r.then(function(s){return n._waitingQueue.push(F(u.bind(null,s)))},function(s){return n._waitingQueue.push(F(o.bind(null,s)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new k.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(H(n,t))return n[t];var r=this.schema[t];if(!r)throw new k.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e}();function Gi(e){return tt(Qi.prototype,function(n,r,i,a,u){var o=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=et(this,"complete","error","abort"),this.parent=u||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new A(function(s,c){o._resolve=s,o._reject=c}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(s){var c=o.active;return o.active=!1,o.on.error.fire(s),o.parent?o.parent._reject(s):c&&o.idbtrans&&o.idbtrans.abort(),j(s)})})}function on(e,t,n,r,i,a,u){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:a,src:(n&&!u?"&":"")+(r?"*":"")+(i?"++":"")+Rr(t)}}function Rr(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Or(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:fr(n,function(r){return[r.name,r]})}}function Ji(e){return e.length===1?e[0]:e}var Xe=function(e){try{return e.only([[]]),Xe=function(){return[[]]},[[]]}catch{return Xe=function(){return _e},_e}};function sn(e){return e==null?function(){}:typeof e=="string"?qi(e):function(t){return oe(t,e)}}function qi(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return oe(n,e)}}function Gn(e){return[].slice.call(e)}var Zi=0;function $e(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function ea(e,t,n){function r(l,h){var _=Gn(l.objectStoreNames);return{schema:{name:l.name,tables:_.map(function(d){return h.objectStore(d)}).map(function(d){var p=d.keyPath,y=d.autoIncrement,b=V(p),w=p==null,m={},g={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w,compound:b,keyPath:p,autoIncrement:y,unique:!0,extractKey:sn(p)},indexes:Gn(d.indexNames).map(function(v){return d.index(v)}).map(function(v){var x=v.name,K=v.unique,E=v.multiEntry,C=v.keyPath,T=V(C),R={name:x,compound:T,keyPath:C,unique:K,multiEntry:E,extractKey:sn(C)};return m[$e(C)]=R,R}),getIndexByKeyPath:function(v){return m[$e(v)]}};return m[":id"]=g.primaryKey,p!=null&&(m[$e(p)]=g.primaryKey),g})},hasGetAll:_.length>0&&"getAll"in h.objectStore(_[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var h=l.lower,_=l.upper,d=l.lowerOpen,p=l.upperOpen,y=h===void 0?_===void 0?null:t.upperBound(_,!!p):_===void 0?t.lowerBound(h,!!d):t.bound(h,_,!!d,!!p);return y}function a(l){var h=l.name;function _(y){var b=y.trans,w=y.type,m=y.keys,g=y.values,v=y.range;return new Promise(function(x,K){x=F(x);var E=b.objectStore(h),C=E.keyPath==null,T=w==="put"||w==="add";if(!T&&w!=="delete"&&w!=="deleteRange")throw new Error("Invalid operation type: "+w);var R=(m||g||{length:1}).length;if(m&&g&&m.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(R===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});var O,P=[],L=[],D=0,Y=function(ee){++D,He(ee)};if(w==="deleteRange"){if(v.type===4)return x({numFailures:D,failures:L,results:[],lastResult:void 0});v.type===3?P.push(O=E.clear()):P.push(O=E.delete(i(v)))}else{var Q=T?C?[g,m]:[g,null]:[m,null],le=Q[0],Z=Q[1];if(T)for(var X=0;X<R;++X)P.push(O=Z&&Z[X]!==void 0?E[w](le[X],Z[X]):E[w](le[X])),O.onerror=Y;else for(var X=0;X<R;++X)P.push(O=E[w](le[X])),O.onerror=Y}var fe=function(ee){var Oe=ee.target.result;P.forEach(function(G,nt){return G.error!=null&&(L[nt]=G.error)}),x({numFailures:D,failures:L,results:w==="delete"?m:P.map(function(G){return G.result}),lastResult:Oe})};O.onerror=function(ee){Y(ee),fe(ee)},O.onsuccess=fe})}function d(y){var b=y.trans,w=y.values,m=y.query,g=y.reverse,v=y.unique;return new Promise(function(x,K){x=F(x);var E=m.index,C=m.range,T=b.objectStore(h),R=E.isPrimaryKey?T:T.index(E.name),O=g?v?"prevunique":"prev":v?"nextunique":"next",P=w||!("openKeyCursor"in R)?R.openCursor(i(C),O):R.openKeyCursor(i(C),O);P.onerror=te(K),P.onsuccess=F(function(L){var D=P.result;if(!D){x(null);return}D.___id=++Zi,D.done=!1;var Y=D.continue.bind(D),Q=D.continuePrimaryKey;Q&&(Q=Q.bind(D));var le=D.advance.bind(D),Z=function(){throw new Error("Cursor not started")},X=function(){throw new Error("Cursor not stopped")};D.trans=b,D.stop=D.continue=D.continuePrimaryKey=D.advance=Z,D.fail=F(K),D.next=function(){var fe=this,ee=1;return this.start(function(){return ee--?fe.continue():fe.stop()}).then(function(){return fe})},D.start=function(fe){var ee=new Promise(function(G,nt){G=F(G),P.onerror=te(nt),D.fail=nt,D.stop=function(Lr){D.stop=D.continue=D.continuePrimaryKey=D.advance=X,G(Lr)}}),Oe=function(){if(P.result)try{fe()}catch(G){D.fail(G)}else D.done=!0,D.start=function(){throw new Error("Cursor behind last entry")},D.stop()};return P.onsuccess=F(function(G){P.onsuccess=Oe,Oe()}),D.continue=Y,D.continuePrimaryKey=Q,D.advance=le,Oe(),ee},x(D)},K)})}function p(y){return function(b){return new Promise(function(w,m){w=F(w);var g=b.trans,v=b.values,x=b.limit,K=b.query,E=x===1/0?void 0:x,C=K.index,T=K.range,R=g.objectStore(h),O=C.isPrimaryKey?R:R.index(C.name),P=i(T);if(x===0)return w({result:[]});if(y){var L=v?O.getAll(P,E):O.getAllKeys(P,E);L.onsuccess=function(le){return w({result:le.target.result})},L.onerror=te(m)}else{var D=0,Y=v||!("openKeyCursor"in O)?O.openCursor(P):O.openKeyCursor(P),Q=[];Y.onsuccess=function(le){var Z=Y.result;if(!Z)return w({result:Q});if(Q.push(v?Z.value:Z.primaryKey),++D===x)return w({result:Q});Z.continue()},Y.onerror=te(m)}})}}return{name:h,schema:l,mutate:_,getMany:function(y){var b=y.trans,w=y.keys;return new Promise(function(m,g){m=F(m);for(var v=b.objectStore(h),x=w.length,K=new Array(x),E=0,C=0,T,R=function(D){var Y=D.target;(K[Y._pos]=Y.result)!=null,++C===E&&m(K)},O=te(g),P=0;P<x;++P){var L=w[P];L!=null&&(T=v.get(w[P]),T._pos=P,T.onsuccess=R,T.onerror=O,++E)}E===0&&m(K)})},get:function(y){var b=y.trans,w=y.key;return new Promise(function(m,g){m=F(m);var v=b.objectStore(h),x=v.get(w);x.onsuccess=function(K){return m(K.target.result)},x.onerror=te(g)})},query:p(s),openCursor:d,count:function(y){var b=y.query,w=y.trans,m=b.index,g=b.range;return new Promise(function(v,x){var K=w.objectStore(h),E=m.isPrimaryKey?K:K.index(m.name),C=i(g),T=C?E.count(C):E.count();T.onsuccess=F(function(R){return v(R.target.result)}),T.onerror=te(x)})}}}var u=r(e,n),o=u.schema,s=u.hasGetAll,c=o.tables.map(function(l){return a(l)}),f={};return c.forEach(function(l){return f[l.name]=l}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(l){var h=f[l];if(!h)throw new Error("Table '"+l+"' not found");return f[l]},MIN_KEY:-1/0,MAX_KEY:Xe(t),schema:o}}function ta(e,t){return t.reduce(function(n,r){var i=r.create;return I(I({},n),i(n))},e)}function na(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var a=ta(ea(t,i,r),e.dbcore);return{dbcore:a}}function Cn(e,t){var n=e._novip,r=t.db,i=na(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach(function(a){var u=a.name;n.core.schema.tables.some(function(o){return o.name===u})&&(a.core=n.core.table(u),n[u]instanceof n.Table&&(n[u].core=a.core))})}function Et(e,t,n,r){var i=e._novip;n.forEach(function(a){var u=r[a];t.forEach(function(o){var s=gn(o,a);(!s||"value"in s&&s.value===void 0)&&(o===i.Transaction.prototype||o instanceof i.Transaction?se(o,a,{get:function(){return this.table(a)},set:function(c){sr(this,a,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):o[a]=new i.Table(a,u))})})}function cn(e,t){var n=e._novip;t.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function ra(e,t){return e._cfg.version-t._cfg.version}function ia(e,t,n,r){var i=e._dbSchema,a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var u=a._reject.bind(a),o=S.transless||S;ve(function(){S.trans=a,S.transless=o,t===0?(N(i).forEach(function(s){kn(n,s,i[s].primKey,i[s].indexes)}),Cn(e,n),A.follow(function(){return e.on.populate.fire(a)}).catch(u)):aa(e,t,a,n).catch(u)})}function aa(e,t,n,r){var i=e._novip,a=[],u=i._versions,o=i._dbSchema=Tn(i,i.idbdb,r),s=!1,c=u.filter(function(l){return l._cfg.version>=t});c.forEach(function(l){a.push(function(){var h=o,_=l._cfg.dbschema;fn(i,h,r),fn(i,_,r),o=i._dbSchema=_;var d=Br(h,_);d.add.forEach(function(g){kn(r,g[0],g[1].primKey,g[1].indexes)}),d.change.forEach(function(g){if(g.recreate)throw new k.Upgrade("Not yet support for changing primary key");var v=r.objectStore(g.name);g.add.forEach(function(x){return ln(v,x)}),g.change.forEach(function(x){v.deleteIndex(x.name),ln(v,x)}),g.del.forEach(function(x){return v.deleteIndex(x)})});var p=l._cfg.contentUpgrade;if(p&&l._cfg.version>t){Cn(i,r),n._memoizedTables={},s=!0;var y=hr(_);d.del.forEach(function(g){y[g]=h[g]}),cn(i,[i.Transaction.prototype]),Et(i,[i.Transaction.prototype],N(y),y),n.schema=y;var b=_n(p);b&&Pe();var w,m=A.follow(function(){if(w=p(n),w&&b){var g=ce.bind(null,null);w.then(g,g)}});return w&&typeof w.then=="function"?A.resolve(w):m.then(function(){return w})}}),a.push(function(h){if(!s||!Oi){var _=l._cfg.dbschema;oa(_,h)}cn(i,[i.Transaction.prototype]),Et(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function f(){return a.length?A.resolve(a.shift()(n.idbtrans)).then(f):A.resolve()}return f().then(function(){ua(o,r)})}function Br(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],a=t[r];if(!i)n.add.push([r,a]);else{var u={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto&&!Dt)u.recreate=!0,n.change.push(u);else{var o=i.idxByName,s=a.idxByName,c=void 0;for(c in o)s[c]||u.del.push(c);for(c in s){var f=o[c],l=s[c];f?f.src!==l.src&&u.change.push(l):u.add.push(l)}(u.del.length>0||u.add.length>0||u.change.length>0)&&n.change.push(u)}}}return n}function kn(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(a){return ln(i,a)}),i}function ua(e,t){N(e).forEach(function(n){t.db.objectStoreNames.contains(n)||kn(t,n,e[n].primKey,e[n].indexes)})}function oa(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function ln(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Tn(e,t,n){var r={},i=kt(t.objectStoreNames,0);return i.forEach(function(a){for(var u=n.objectStore(a),o=u.keyPath,s=on(Rr(o),o||"",!1,!1,!!u.autoIncrement,o&&typeof o!="string",!0),c=[],f=0;f<u.indexNames.length;++f){var l=u.index(u.indexNames[f]);o=l.keyPath;var h=on(l.name,o,!!l.unique,!!l.multiEntry,!1,o&&typeof o!="string",!1);c.push(h)}r[a]=Or(a,s,c)}),r}function sa(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=Tn(r,t,n);r._storeNames=kt(t.objectStoreNames,0),Et(r,[r._allTables],N(i),i)}function ca(e,t){var n=Tn(e,e.idbdb,t),r=Br(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function fn(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,a=0;a<i.length;++a){var u=i[a],o=n.objectStore(u);r._hasGetAll="getAll"in o;for(var s=0;s<o.indexNames.length;++s){var c=o.indexNames[s],f=o.index(c).keyPath,l=typeof f=="string"?f:"["+kt(f).join("+")+"]";if(t[u]){var h=t[u].idxByName[l];h&&(h.name=c,delete t[u].idxByName[l],t[u].idxByName[c]=h)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&M.WorkerGlobalScope&&M instanceof M.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function la(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return on(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),V(i),n===0)})}var fa=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){N(t).forEach(function(r){if(t[r]!==null){var i=la(t[r]),a=i.shift();if(a.multi)throw new k.Schema("Primary key cannot be multi-valued");i.forEach(function(u){if(u.auto)throw new k.Schema("Only primary key can be marked as autoIncrement (++)");if(!u.keyPath)throw new k.Schema("Index must have a name and cannot be an empty string")}),n[r]=Or(r,a,i)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?W(this._cfg.storesSource,t):t;var r=n._versions,i={},a={};return r.forEach(function(u){W(i,u._cfg.storesSource),a=u._cfg.dbschema={},u._parseStoresSpec(i,a)}),n._dbSchema=a,cn(n,[n._allTables,n,n.Transaction.prototype]),Et(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],N(a),a),n._storeNames=N(a),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=xn(this._cfg.contentUpgrade||B,t),this},e}();function ha(e){return tt(fa.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Dn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new On(It,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function In(e){return e&&typeof e.databases=="function"}function da(e){var t=e.indexedDB,n=e.IDBKeyRange;return In(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==It})}):Dn(t,n).toCollection().primaryKeys()}function pa(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!In(n)&&t!==It&&Dn(n,r).put({name:t}).catch(B)}function va(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!In(n)&&t!==It&&Dn(n,r).delete(t).catch(B)}function hn(e){return ve(function(){return S.letThrough=!0,e()})}function ya(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function ma(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?j(t.dbOpenError):e});ne&&(t.openCanceller._stackHolder=Ae()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new k.DatabaseClosed("db.open() was cancelled")}var a=t.dbReadyResolve,u=null,o=!1;return A.race([r,(typeof navigator=="undefined"?A.resolve():ya()).then(function(){return new A(function(s,c){if(i(),!n)throw new k.MissingAPI;var f=e.name,l=t.autoSchema?n.open(f):n.open(f,Math.round(e.verno*10));if(!l)throw new k.MissingAPI;l.onerror=te(c),l.onblocked=F(e._fireOnBlocked),l.onupgradeneeded=F(function(h){if(u=l.transaction,t.autoSchema&&!e._options.allowEmptyDB){l.onerror=He,u.abort(),l.result.close();var _=n.deleteDatabase(f);_.onsuccess=_.onerror=F(function(){c(new k.NoSuchDatabase("Database "+f+" doesnt exist"))})}else{u.onerror=te(c);var d=h.oldVersion>Math.pow(2,62)?0:h.oldVersion;o=d<1,e._novip.idbdb=l.result,ia(e,d/10,u,c)}},c),l.onsuccess=F(function(){u=null;var h=e._novip.idbdb=l.result,_=kt(h.objectStoreNames);if(_.length>0)try{var d=h.transaction(Ji(_),"readonly");t.autoSchema?sa(e,h,d):(fn(e,e._dbSchema,d),ca(e,d)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Cn(e,d)}catch{}Le.push(e),h.onversionchange=F(function(p){t.vcFired=!0,e.on("versionchange").fire(p)}),h.onclose=F(function(p){e.on("close").fire(p)}),o&&pa(e._deps,f),s()},c)})})]).then(function(){return i(),t.onReadyBeingFired=[],A.resolve(hn(function(){return e.on.ready.fire(e.vip)})).then(function s(){if(t.onReadyBeingFired.length>0){var c=t.onReadyBeingFired.reduce(xn,B);return t.onReadyBeingFired=[],A.resolve(hn(function(){return c(e.vip)})).then(s)}})}).finally(function(){t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(function(){return e}).catch(function(s){t.dbOpenError=s;try{u&&u.abort()}catch{}return r===t.openCanceller&&e._close(),j(s)}).finally(function(){t.openComplete=!0,a()})}function dn(e){var t=function(u){return e.next(u)},n=function(u){return e.throw(u)},r=a(t),i=a(n);function a(u){return function(o){var s=u(o),c=s.value;return s.done?c:!c||typeof c.then!="function"?V(c)?Promise.all(c).then(r,i):r(c):c.then(r,i)}}return a(t)()}function ga(e,t,n){var r=arguments.length;if(r<2)throw new k.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var a=dr(i);return[e,a,n]}function Mr(e,t,n,r,i){return A.resolve().then(function(){var a=S.transless||S,u=e._createTransaction(t,n,e._dbSchema,r),o={trans:u,transless:a};if(r)u.idbtrans=r.idbtrans;else try{u.create(),e._state.PR1398_maxLoop=3}catch(l){return l.name===wn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return Mr(e,t,n,null,i)})):j(l)}var s=_n(i);s&&Pe();var c,f=A.follow(function(){if(c=i.call(u,u),c)if(s){var l=ce.bind(null,null);c.then(l,l)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=dn(c))},o);return(c&&typeof c.then=="function"?A.resolve(c).then(function(l){return u.active?l:j(new k.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):f.then(function(){return c})).then(function(l){return r&&u._resolve(),u._completion.then(function(){return l})}).catch(function(l){return u._reject(l),j(l)})})}function st(e,t,n){for(var r=V(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function _a(e){return I(I({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},a=[];function u(p,y,b){var w=$e(p),m=i[w]=i[w]||[],g=p==null?0:typeof p=="string"?1:p.length,v=y>0,x=I(I({},b),{isVirtual:v,keyTail:y,keyLength:g,extractKey:sn(p),unique:!v&&b.unique});if(m.push(x),x.isPrimaryKey||a.push(x),g>1){var K=g===2?p[0]:p.slice(0,g-1);u(K,y+1,b)}return m.sort(function(E,C){return E.keyTail-C.keyTail}),x}var o=u(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[o];for(var s=0,c=r.indexes;s<c.length;s++){var f=c[s];u(f.keyPath,0,f)}function l(p){var y=i[$e(p)];return y&&y[0]}function h(p,y){return{type:p.type===1?2:p.type,lower:st(p.lower,p.lowerOpen?e.MAX_KEY:e.MIN_KEY,y),lowerOpen:!0,upper:st(p.upper,p.upperOpen?e.MIN_KEY:e.MAX_KEY,y),upperOpen:!0}}function _(p){var y=p.query.index;return y.isVirtual?I(I({},p),{query:{index:y,range:h(p.query.range,y.keyTail)}}):p}var d=I(I({},n),{schema:I(I({},r),{primaryKey:o,indexes:a,getIndexByKeyPath:l}),count:function(p){return n.count(_(p))},query:function(p){return n.query(_(p))},openCursor:function(p){var y=p.query.index,b=y.keyTail,w=y.isVirtual,m=y.keyLength;if(!w)return n.openCursor(p);function g(v){function x(E){E!=null?v.continue(st(E,p.reverse?e.MAX_KEY:e.MIN_KEY,b)):p.unique?v.continue(v.key.slice(0,m).concat(p.reverse?e.MIN_KEY:e.MAX_KEY,b)):v.continue()}var K=Object.create(v,{continue:{value:x},continuePrimaryKey:{value:function(E,C){v.continuePrimaryKey(st(E,e.MAX_KEY,b),C)}},primaryKey:{get:function(){return v.primaryKey}},key:{get:function(){var E=v.key;return m===1?E[0]:E.slice(0,m)}},value:{get:function(){return v.value}}});return K}return n.openCursor(_(p)).then(function(v){return v&&g(v)})}});return d}})}var ba={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:_a};function Pn(e,t,n,r){return n=n||{},r=r||"",N(e).forEach(function(i){if(!H(t,i))n[r+i]=void 0;else{var a=e[i],u=t[i];if(typeof a=="object"&&typeof u=="object"&&a&&u){var o=Yt(a),s=Yt(u);o!==s?n[r+i]=t[i]:o==="Object"?Pn(a,u,n,r+i+"."):a!==u&&(n[r+i]=t[i])}else a!==u&&(n[r+i]=t[i])}}),N(t).forEach(function(i){H(e,i)||(n[r+i]=t[i])}),n}function wa(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var xa={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return I(I({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=I(I({},n),{mutate:function(a){var u=S.trans,o=u.table(t).hook,s=o.deleting,c=o.creating,f=o.updating;switch(a.type){case"add":if(c.fire===B)break;return u._promise("readwrite",function(){return l(a)},!0);case"put":if(c.fire===B&&f.fire===B)break;return u._promise("readwrite",function(){return l(a)},!0);case"delete":if(s.fire===B)break;return u._promise("readwrite",function(){return l(a)},!0);case"deleteRange":if(s.fire===B)break;return u._promise("readwrite",function(){return h(a)},!0)}return n.mutate(a);function l(d){var p=S.trans,y=d.keys||wa(r,d);if(!y)throw new Error("Keys missing");return d=d.type==="add"||d.type==="put"?I(I({},d),{keys:y}):I({},d),d.type!=="delete"&&(d.values=Ut([],d.values,!0)),d.keys&&(d.keys=Ut([],d.keys,!0)),Ea(n,d,y).then(function(b){var w=y.map(function(m,g){var v=b[g],x={onerror:null,onsuccess:null};if(d.type==="delete")s.fire.call(x,m,v,p);else if(d.type==="add"||v===void 0){var K=c.fire.call(x,m,d.values[g],p);m==null&&K!=null&&(m=K,d.keys[g]=m,r.outbound||q(d.values[g],r.keyPath,m))}else{var E=Pn(v,d.values[g]),C=f.fire.call(x,E,m,v,p);if(C){var T=d.values[g];Object.keys(C).forEach(function(R){H(T,R)?T[R]=C[R]:q(T,R,C[R])})}}return x});return n.mutate(d).then(function(m){for(var g=m.failures,v=m.results,x=m.numFailures,K=m.lastResult,E=0;E<y.length;++E){var C=v?v[E]:y[E],T=w[E];C==null?T.onerror&&T.onerror(g[E]):T.onsuccess&&T.onsuccess(d.type==="put"&&b[E]?d.values[E]:C)}return{failures:g,results:v,numFailures:x,lastResult:K}}).catch(function(m){return w.forEach(function(g){return g.onerror&&g.onerror(m)}),Promise.reject(m)})})}function h(d){return _(d.trans,d.range,1e4)}function _(d,p,y){return n.query({trans:d,values:!1,query:{index:r,range:p},limit:y}).then(function(b){var w=b.result;return l({type:"delete",keys:w,trans:d}).then(function(m){return m.numFailures>0?Promise.reject(m.failures[0]):w.length<y?{failures:[],numFailures:0,lastResult:void 0}:_(d,I(I({},p),{lower:w[w.length-1],lowerOpen:!0}),y)})})}}});return i}})}};function Ea(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function Fr(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,a=0;i<t.keys.length&&a<e.length;++i)z(t.keys[i],e[a])===0&&(r.push(n?Ge(t.values[i]):t.values[i]),++a);return r.length===e.length?r:null}catch{return null}}var Aa={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return I(I({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=Fr(r.keys,r.trans._cache,r.cache==="clone");return i?A.resolve(i):n.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?Ge(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},jt;function Rn(e){return!("from"in e)}var ie=function(e,t){if(this)W(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new ie;return e&&"d"in e&&W(n,e),n}};Te(ie.prototype,(jt={add:function(e){return At(this,e),this},addKey:function(e){return Qe(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return Qe(t,n,n)}),this}},jt[Xt]=function(){return pn(this)},jt));function Qe(e,t,n){var r=z(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(Rn(e))return W(e,{from:t,to:n,d:1});var i=e.l,a=e.r;if(z(n,e.from)<0)return i?Qe(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Jn(e);if(z(t,e.to)>0)return a?Qe(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Jn(e);z(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),z(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var u=!e.r;i&&!e.l&&At(e,i),a&&u&&At(e,a)}}function At(e,t){function n(r,i){var a=i.from,u=i.to,o=i.l,s=i.r;Qe(r,a,u),o&&n(r,o),s&&n(r,s)}Rn(t)||n(e,t)}function Sa(e,t){var n=pn(t),r=n.next();if(r.done)return!1;for(var i=r.value,a=pn(e),u=a.next(i.from),o=u.value;!r.done&&!u.done;){if(z(o.from,i.to)<=0&&z(o.to,i.from)>=0)return!0;z(i.from,o.from)<0?i=(r=n.next(o.from)).value:o=(u=a.next(i.from)).value}return!1}function pn(e){var t=Rn(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&z(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||z(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Jn(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var a=i==="r"?"l":"r",u=I({},e),o=e[i];e.from=o.from,e.to=o.to,e[i]=o[i],u[i]=o[a],e[a]=u,u.d=qn(u)}e.d=qn(e)}function qn(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}var Ka={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new ie(e.MIN_KEY,e.MAX_KEY);return I(I({},e),{table:function(r){var i=e.table(r),a=i.schema,u=a.primaryKey,o=u.extractKey,s=u.outbound,c=I(I({},i),{mutate:function(h){var _=h.trans,d=_.mutatedParts||(_.mutatedParts={}),p=function(K){var E="idb://"+t+"/"+r+"/"+K;return d[E]||(d[E]=new ie)},y=p(""),b=p(":dels"),w=h.type,m=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[],g=m[0],v=m[1],x=h.trans._cache;return i.mutate(h).then(function(K){if(V(g)){w!=="delete"&&(g=K.results),y.addKeys(g);var E=Fr(g,x);!E&&w!=="add"&&b.addKeys(g),(E||v)&&Ca(p,a,E,v)}else if(g){var C={from:g.lower,to:g.upper};b.add(C),y.add(C)}else y.add(n),b.add(n),a.indexes.forEach(function(T){return p(T.name).add(n)});return K})}}),f=function(h){var _,d,p=h.query,y=p.index,b=p.range;return[y,new ie((_=b.lower)!==null&&_!==void 0?_:e.MIN_KEY,(d=b.upper)!==null&&d!==void 0?d:e.MAX_KEY)]},l={get:function(h){return[u,new ie(h.key)]},getMany:function(h){return[u,new ie().addKeys(h.keys)]},count:f,query:f,openCursor:f};return N(l).forEach(function(h){c[h]=function(_){var d=S.subscr;if(d){var p=function(x){var K="idb://"+t+"/"+r+"/"+x;return d[K]||(d[K]=new ie)},y=p(""),b=p(":dels"),w=l[h](_),m=w[0],g=w[1];if(p(m.name||"").add(g),!m.isPrimaryKey)if(h==="count")b.add(n);else{var v=h==="query"&&s&&_.values&&i.query(I(I({},_),{values:!1}));return i[h].apply(this,arguments).then(function(x){if(h==="query"){if(s&&_.values)return v.then(function(T){var R=T.result;return y.addKeys(R),x});var K=_.values?x.result.map(o):x.result;_.values?y.addKeys(K):b.addKeys(K)}else if(h==="openCursor"){var E=x,C=_.values;return E&&Object.create(E,{key:{get:function(){return b.addKey(E.primaryKey),E.key}},primaryKey:{get:function(){var T=E.primaryKey;return b.addKey(T),T}},value:{get:function(){return C&&y.addKey(E.primaryKey),E.value}}})}return x})}}return i[h].apply(this,arguments)}}),c}})}};function Ca(e,t,n,r){function i(a){var u=e(a.name||"");function o(c){return c!=null?a.extractKey(c):null}var s=function(c){return a.multiEntry&&V(c)?c.forEach(function(f){return u.addKey(f)}):u.addKey(c)};(n||r).forEach(function(c,f){var l=n&&o(n[f]),h=r&&o(r[f]);z(l,h)!==0&&(l!=null&&s(l),h!=null&&s(h))})}t.indexes.forEach(i)}var On=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=I({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var a=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:B,dbReadyPromise:null,cancelOpen:B,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};u.dbReadyPromise=new A(function(o){u.dbReadyResolve=o}),u.openCanceller=new A(function(o,s){u.cancelOpen=s}),this._state=u,this.name=t,this.on=et(this,"populate","blocked","versionchange","close",{ready:[xn,B]}),this.on.ready.subscribe=cr(this.on.ready.subscribe,function(o){return function(s,c){e.vip(function(){var f=r._state;if(f.openComplete)f.dbOpenError||A.resolve().then(s),c&&o(s);else if(f.onReadyBeingFired)f.onReadyBeingFired.push(s),c&&o(s);else{o(s);var l=r;c||o(function h(){l.on.ready.unsubscribe(s),l.on.ready.unsubscribe(h)})}})}}),this.Collection=Vi(this),this.Table=Fi(this),this.Transaction=Gi(this),this.Version=ha(this),this.WhereClause=Xi(this),this.on("versionchange",function(o){o.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(o){!o.newVersion||o.newVersion<o.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+o.oldVersion/10)}),this._maxKey=Xe(n.IDBKeyRange),this._createTransaction=function(o,s,c,f){return new r.Transaction(o,s,c,r._options.chromeTransactionDurability,f)},this._fireOnBlocked=function(o){r.on("blocked").fire(o),Le.filter(function(s){return s.name===r.name&&s!==r&&!s._state.vcFired}).map(function(s){return s.on("versionchange").fire(o)})},this.use(ba),this.use(xa),this.use(Ka),this.use(Aa),this.vip=Object.create(this,{_vip:{value:!0}}),a.forEach(function(o){return o(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new k.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new k.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(ra),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||S.letThrough||this._vip)?t():new A(function(r,i){if(n._state.openComplete)return i(new k.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new k.DatabaseClosed);return}n.open().catch(B)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,a=t.name;a&&this.unuse({stack:n,name:a});var u=this._middlewares[n]||(this._middlewares[n]=[]);return u.push({stack:n,create:r,level:i==null?10:i,name:a}),u.sort(function(o,s){return o.level-s.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(a){return i?a.create!==i:r?a.name!==r:!1})),this},e.prototype.open=function(){return ma(this)},e.prototype._close=function(){var t=this._state,n=Le.indexOf(this);if(n>=0&&Le.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new A(function(r){t.dbReadyResolve=r}),t.openCanceller=new A(function(r,i){t.cancelOpen=i})},e.prototype.close=function(){this._close();var t=this._state;this._options.autoOpen=!1,t.dbOpenError=new k.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)},e.prototype.delete=function(){var t=this,n=arguments.length>0,r=this._state;return new A(function(i,a){var u=function(){t.close();var o=t._deps.indexedDB.deleteDatabase(t.name);o.onsuccess=F(function(){va(t._deps,t.name),i()}),o.onerror=te(a),o.onblocked=t._fireOnBlocked};if(n)throw new k.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(u):u()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return N(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=ga.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,a=S.trans;(!a||a.db!==this||t.indexOf("!")!==-1)&&(a=null);var u=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var o,s;try{if(s=n.map(function(f){var l=f instanceof i.Table?f.name:f;if(typeof l!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return l}),t=="r"||t===Ot)o=Ot;else if(t=="rw"||t==Bt)o=Bt;else throw new k.InvalidArgument("Invalid transaction mode: "+t);if(a){if(a.mode===Ot&&o===Bt)if(u)a=null;else throw new k.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a&&s.forEach(function(f){if(a&&a.storeNames.indexOf(f)===-1)if(u)a=null;else throw new k.SubTransaction("Table "+f+" not included in parent transaction.")}),u&&a&&!a.active&&(a=null)}}catch(f){return a?a._promise(null,function(l,h){h(f)}):j(f)}var c=Mr.bind(null,this,o,s,a,r);return a?a._promise(o,c,"lock"):S.trans?Re(S.transless,function(){return i._whenReady(c)}):this._whenReady(c)},e.prototype.table=function(t){if(!H(this._allTables,t))throw new k.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),ka=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",Ta=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[ka]=function(){return this},e}();function Nr(e,t){return N(t).forEach(function(n){var r=e[n]||(e[n]=new ie);At(r,t[n])}),e}function Da(e){return new Ta(function(t){var n=_n(e);function r(_){n&&Pe();var d=function(){return ve(e,{subscr:_,trans:null})},p=S.trans?Re(S.transless,d):d();return n&&p.then(ce,ce),p}var i=!1,a={},u={},o={get closed(){return i},unsubscribe:function(){i=!0,me.storagemutated.unsubscribe(l)}};t.start&&t.start(o);var s=!1,c=!1;function f(){return N(u).some(function(_){return a[_]&&Sa(a[_],u[_])})}var l=function(_){Nr(a,_),f()&&h()},h=function(){if(!(s||i)){a={};var _={},d=r(_);c||(me(Ye,l),c=!0),s=!0,Promise.resolve(d).then(function(p){s=!1,!i&&(f()?h():(a={},u=_,t.next&&t.next(p)))},function(p){s=!1,t.error&&t.error(p),o.unsubscribe()})}};return h(),o})}var vn;try{vn={indexedDB:M.indexedDB||M.mozIndexedDB||M.webkitIndexedDB||M.msIndexedDB,IDBKeyRange:M.IDBKeyRange||M.webkitIDBKeyRange}}catch{vn={indexedDB:null,IDBKeyRange:null}}var ge=On;Te(ge,I(I({},Tt),{delete:function(e){var t=new ge(e,{addons:[]});return t.delete()},exists:function(e){return new ge(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return da(ge.dependencies).then(e)}catch{return j(new k.MissingAPI)}},defineClass:function(){function e(t){W(this,t)}return e},ignoreTransaction:function(e){return S.trans?Re(S.transless,e):e()},vip:hn,async:function(e){return function(){try{var t=dn(e.apply(this,arguments));return!t||typeof t.then!="function"?A.resolve(t):t}catch(n){return j(n)}}},spawn:function(e,t,n){try{var r=dn(e.apply(n,t||[]));return!r||typeof r.then!="function"?A.resolve(r):r}catch(i){return j(i)}},currentTransaction:{get:function(){return S.trans||null}},waitFor:function(e,t){var n=A.resolve(typeof e=="function"?ge.ignoreTransaction(e):e).timeout(t||6e4);return S.trans?S.trans.waitFor(n):n},Promise:A,debug:{get:function(){return ne},set:function(e){vr(e,e==="dexie"?function(){return!0}:Tr)}},derive:De,extend:W,props:Te,override:cr,Events:et,on:me,liveQuery:Da,extendObservabilitySet:Nr,getByKeyPath:oe,setByKeyPath:q,delByKeyPath:si,shallowClone:hr,deepClone:Ge,getObjectDiff:Pn,cmp:z,asap:lr,minKey:un,addons:[],connections:Le,errnames:wn,dependencies:vn,semVer:Un,version:Un.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})}));ge.maxKey=Xe(ge.dependencies.IDBKeyRange);typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(me(Ye,function(e){if(!ue){var t;Dt?(t=document.createEvent("CustomEvent"),t.initCustomEvent(pe,!0,!0,e)):t=new CustomEvent(pe,{detail:e}),ue=!0,dispatchEvent(t),ue=!1}}),addEventListener(pe,function(e){var t=e.detail;ue||St(t)}));function St(e){var t=ue;try{ue=!0,me.storagemutated.fire(e)}finally{ue=t}}var ue=!1;if(typeof BroadcastChannel!="undefined"){var Zn=new BroadcastChannel(pe);me(Ye,function(e){ue||Zn.postMessage(e)}),Zn.onmessage=function(e){e.data&&St(e.data)}}else if(typeof self!="undefined"&&typeof navigator!="undefined"){me(Ye,function(e){try{ue||(typeof localStorage!="undefined"&&localStorage.setItem(pe,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&Ut([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(t){return t.postMessage({type:pe,changedParts:e})}))}catch{}}),typeof addEventListener!="undefined"&&addEventListener("storage",function(e){if(e.key===pe){var t=JSON.parse(e.newValue);t&&St(t.changedParts)}});var er=self.document&&navigator.serviceWorker;er&&er.addEventListener("message",Ia)}function Ia(e){var t=e.data;t&&t.type===pe&&St(t.changedParts)}A.rejectionMapper=mi;vr(ne,Tr);class jr{constructor(t,n,r,i,a){J(this,"id");J(this,"carbohydrate");J(this,"cholesterol");J(this,"fat");J(this,"protein");J(this,"sodium");this.carbohydrate=t,this.cholesterol=n,this.fat=r,this.protein=i,this.sodium=a}}class Pa{constructor(t,n){J(this,"name");J(this,"nutrition");this.name=t,this.nutrition=n}}class Ra extends On{constructor(n){super(n);J(this,"foodItems");J(this,"nutritionValues");this.version(1).stores({foodItems:"name",nutritionValues:"++id"})}}const Kt=new Ra("main");Kt.foodItems.mapToClass(Pa);Kt.nutritionValues.mapToClass(jr);function Oa(e){let t,n,r,i;return t=new Ln({props:{name:"Brian Law"}}),r=new Ln({props:{name:"Matthew Xia"}}),{c(){jn(t.$$.fragment),n=Xr(),jn(r.$$.fragment)},m(a,u){zt(t,a,u),rr(a,n,u),zt(r,a,u),i=!0},p:Ve,i(a){i||(Vt(t.$$.fragment,a),Vt(r.$$.fragment,a),i=!0)},o(a){Nn(t.$$.fragment,a),Nn(r.$$.fragment,a),i=!1},d(a){Wt(t,a),a&&yn(n),Wt(r,a)}}}function Ba(e){return Kt.nutritionValues.count().then(t=>{t||Kt.nutritionValues.add(new jr(300,300,60,150,2e3),1)}),[]}class Ma extends or{constructor(t){super(),ur(this,t,Ba,Oa,nr,{})}}new Ma({target:document.body});
