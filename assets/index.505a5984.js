var qi=Object.defineProperty;var Ji=(e,t,n)=>t in e?qi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var _e=(e,t,n)=>(Ji(e,typeof t!="symbol"?t+"":t,n),n);const Zi=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}};Zi();function z(){}function eo(e,t){for(const n in t)e[n]=t[n];return e}function to(e){return e&&typeof e=="object"&&typeof e.then=="function"}function li(e){return e()}function Fr(){return Object.create(null)}function Je(e){e.forEach(li)}function no(e){return typeof e=="function"}function at(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ro(e){return Object.keys(e).length===0}function io(e,t,n,r){if(e){const i=ci(e,t,n,r);return e[0](i)}}function ci(e,t,n,r){return e[1]&&r?eo(n.ctx.slice(),e[1](r(t))):n.ctx}function oo(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const o=[],a=Math.max(t.dirty.length,i.length);for(let u=0;u<a;u+=1)o[u]=t.dirty[u]|i[u];return o}return t.dirty|i}return t.dirty}function ao(e,t,n,r,i,o){if(i){const a=ci(t,n,r,o);e.p(a,i)}}function uo(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function v(e,t){e.appendChild(t)}function U(e,t,n){e.insertBefore(t,n||null)}function W(e){e.parentNode.removeChild(e)}function so(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function I(e){return document.createElement(e)}function j(e){return document.createTextNode(e)}function P(){return j(" ")}function vn(){return j("")}function Le(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function fi(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Ht(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function A(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function lo(e){return Array.from(e.childNodes)}function rt(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Ve(e,t,n){e.classList[n?"add":"remove"](t)}function co(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}let wt;function Ke(e){wt=e}function di(){if(!wt)throw new Error("Function called outside component initialization");return wt}function fo(){const e=di();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=co(t,n,{cancelable:r});return i.slice().forEach(a=>{a.call(e,o)}),!o.defaultPrevented}return!0}}const pt=[],Lr=[],Yt=[],Nr=[],ho=Promise.resolve();let Pn=!1;function vo(){Pn||(Pn=!0,ho.then(rr))}function Tn(e){Yt.push(e)}const _n=new Set;let Lt=0;function rr(){const e=wt;do{for(;Lt<pt.length;){const t=pt[Lt];Lt++,Ke(t),po(t.$$)}for(Ke(null),pt.length=0,Lt=0;Lr.length;)Lr.pop()();for(let t=0;t<Yt.length;t+=1){const n=Yt[t];_n.has(n)||(_n.add(n),n())}Yt.length=0}while(pt.length);for(;Nr.length;)Nr.pop()();Pn=!1,_n.clear(),Ke(e)}function po(e){if(e.fragment!==null){e.update(),Je(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Tn)}}const Gt=new Set;let He;function tn(){He={r:0,c:[],p:He}}function nn(){He.r||Je(He.c),He=He.p}function fe(e,t){e&&e.i&&(Gt.delete(e),e.i(t))}function ge(e,t,n,r){if(e&&e.o){if(Gt.has(e))return;Gt.add(e),He.c.push(()=>{Gt.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}function ir(e,t){const n=t.token={};function r(i,o,a,u){if(t.token!==n)return;t.resolved=u;let s=t.ctx;a!==void 0&&(s=s.slice(),s[a]=u);const l=i&&(t.current=i)(s);let c=!1;t.block&&(t.blocks?t.blocks.forEach((f,d)=>{d!==o&&f&&(tn(),ge(f,1,1,()=>{t.blocks[d]===f&&(t.blocks[d]=null)}),nn())}):t.block.d(1),l.c(),fe(l,1),l.m(t.mount(),t.anchor),c=!0),t.block=l,t.blocks&&(t.blocks[o]=l),c&&rr()}if(to(e)){const i=di();if(e.then(o=>{Ke(i),r(t.then,1,t.value,o),Ke(null)},o=>{if(Ke(i),r(t.catch,2,t.error,o),Ke(null),!t.hasCatch)throw o}),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}}function or(e,t,n){const r=t.slice(),{resolved:i}=e;e.current===e.then&&(r[e.value]=i),e.current===e.catch&&(r[e.error]=i),e.block.p(r,n)}function rn(e){e&&e.c()}function kt(e,t,n,r){const{fragment:i,on_mount:o,on_destroy:a,after_update:u}=e.$$;i&&i.m(t,n),r||Tn(()=>{const s=o.map(li).filter(no);a?a.push(...s):Je(s),e.$$.on_mount=[]}),u.forEach(Tn)}function Et(e,t){const n=e.$$;n.fragment!==null&&(Je(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function yo(e,t){e.$$.dirty[0]===-1&&(pt.push(e),vo(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ar(e,t,n,r,i,o,a,u=[-1]){const s=wt;Ke(e);const l=e.$$={fragment:null,ctx:null,props:o,update:z,not_equal:i,bound:Fr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:Fr(),dirty:u,skip_bound:!1,root:t.target||s.$$.root};a&&a(l.root);let c=!1;if(l.ctx=n?n(e,t.props||{},(f,d,...m)=>{const p=m.length?m[0]:d;return l.ctx&&i(l.ctx[f],l.ctx[f]=p)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](p),c&&yo(e,f)),d}):[],l.update(),c=!0,Je(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const f=lo(t.target);l.fragment&&l.fragment.l(f),f.forEach(W)}else l.fragment&&l.fragment.c();t.intro&&fe(e.$$.fragment),kt(e,t.target,t.anchor,t.customElement),rr()}Ke(s)}class ur{$destroy(){Et(this,1),this.$destroy=z}$on(t,n){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!ro(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var X=function(){return X=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},X.apply(this,arguments)};function Rn(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var te=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,oe=Object.keys,ce=Array.isArray;typeof Promise!="undefined"&&!te.Promise&&(te.Promise=Promise);function he(e,t){return typeof t!="object"||oe(t).forEach(function(n){e[n]=t[n]}),e}var xt=Object.getPrototypeOf,mo={}.hasOwnProperty;function be(e,t){return mo.call(e,t)}function ut(e,t){typeof t=="function"&&(t=t(xt(e))),(typeof Reflect=="undefined"?oe:Reflect.ownKeys)(t).forEach(function(n){Re(e,n,t[n])})}var hi=Object.defineProperty;function Re(e,t,n,r){hi(e,t,he(n&&be(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function st(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Re(e.prototype,"constructor",e),{extend:ut.bind(null,e.prototype)}}}}var go=Object.getOwnPropertyDescriptor;function sr(e,t){var n=go(e,t),r;return n||(r=xt(e))&&sr(r,t)}var bo=[].slice;function pn(e,t,n){return bo.call(e,t,n)}function vi(e,t){return t(e)}function yt(e){if(!e)throw new Error("Assertion Failed")}function pi(e){te.setImmediate?setImmediate(e):setTimeout(e,0)}function yi(e,t){return e.reduce(function(n,r,i){var o=t(r,i);return o&&(n[o[0]]=o[1]),n},{})}function _o(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function Te(e,t){if(be(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var o=Te(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(a!==-1){var u=e[t.substr(0,a)];return u===void 0?void 0:Te(u,t.substr(a+1))}}function we(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){yt(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)we(e,t[r],n[r])}else{var o=t.indexOf(".");if(o!==-1){var a=t.substr(0,o),u=t.substr(o+1);if(u==="")n===void 0?ce(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var s=e[a];(!s||!be(e,a))&&(s=e[a]={}),we(s,u,n)}}else n===void 0?ce(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function wo(e,t){typeof t=="string"?we(e,t,void 0):"length"in t&&[].map.call(t,function(n){we(e,n,void 0)})}function mi(e){var t={};for(var n in e)be(e,n)&&(t[n]=e[n]);return t}var ko=[].concat;function gi(e){return ko.apply([],e)}var bi="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(gi([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return te[e]}),Eo=bi.map(function(e){return te[e]});yi(bi,function(e){return[e,!0]});var je=null;function Tt(e){je=typeof WeakMap!="undefined"&&new WeakMap;var t=Dn(e);return je=null,t}function Dn(e){if(!e||typeof e!="object")return e;var t=je&&je.get(e);if(t)return t;if(ce(e)){t=[],je&&je.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Dn(e[n]))}else if(Eo.indexOf(e.constructor)>=0)t=e;else{var i=xt(e);t=i===Object.prototype?{}:Object.create(i),je&&je.set(e,t);for(var o in e)be(e,o)&&(t[o]=Dn(e[o]))}return t}var xo={}.toString;function On(e){return xo.call(e).slice(8,-1)}var Bn=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",So=typeof Bn=="symbol"?function(e){var t;return e!=null&&(t=e[Bn])&&t.apply(e)}:function(){return null},it={};function Ce(e){var t,n,r,i;if(arguments.length===1){if(ce(e))return e.slice();if(this===it&&typeof e=="string")return[e];if(i=So(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var lr=typeof Symbol!="undefined"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},xe=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function _i(e,t){xe=e,wi=t}var wi=function(){return!0},Ao=!new Error("").stack;function Ze(){if(Ao)try{throw Ze.arguments,new Error}catch(e){return e}return new Error}function Mn(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(wi).map(function(r){return`
`+r}).join("")):""}var Io=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],ki=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],cr=Io.concat(ki),Co={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function lt(e,t){this._e=Ze(),this.name=e,this.message=t}st(lt).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Mn(this._e,2))}},toString:function(){return this.name+": "+this.message}});function Ei(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function on(e,t,n,r){this._e=Ze(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Ei(e,t)}st(on).from(lt);function gt(e,t){this._e=Ze(),this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=Ei(e,t)}st(gt).from(lt);var fr=cr.reduce(function(e,t){return e[t]=t+"Error",e},{}),Ko=lt,F=cr.reduce(function(e,t){var n=t+"Error";function r(i,o){this._e=Ze(),this.name=n,i?typeof i=="string"?(this.message=""+i+(o?`
 `+o:""),this.inner=o||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=Co[t]||n,this.inner=null)}return st(r).from(Ko),e[t]=r,e},{});F.Syntax=SyntaxError;F.Type=TypeError;F.Range=RangeError;var $r=ki.reduce(function(e,t){return e[t+"Error"]=F[t],e},{});function Po(e,t){if(!e||e instanceof lt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!$r[e.name])return e;var n=new $r[e.name](t||e.message,e);return"stack"in e&&Re(n,"stack",{get:function(){return this.inner.stack}}),n}var yn=cr.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=F[t]),e},{});yn.ModifyError=on;yn.DexieError=lt;yn.BulkError=gt;function Z(){}function Rt(e){return e}function To(e,t){return e==null||e===Rt?t:function(n){return t(e(n))}}function Xe(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Ro(e,t){return e===Z?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Xe(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Xe(i,this.onerror):i),o!==void 0?o:n}}function Do(e,t){return e===Z?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Xe(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Xe(r,this.onerror):r)}}function Oo(e,t){return e===Z?t:function(n){var r=e.apply(this,arguments);he(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Xe(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Xe(o,this.onerror):o),r===void 0?a===void 0?void 0:a:he(r,a)}}function Bo(e,t){return e===Z?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function dr(e,t){return e===Z?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}var St={},Mo=100,jo=20,xi=100,hr=typeof Promise=="undefined"?[]:function(){var e=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[e,xt(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,xt(t),e]}(),jn=hr[0],an=hr[1],Fn=hr[2],Si=an&&an.then,Qt=jn&&jn.constructor,vr=!!Fn,Ln=!1,Fo=Fn?function(){Fn.then(Nt)}:te.setImmediate?setImmediate.bind(null,Nt):te.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){Nt(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Nt,0)},At=function(e,t){mt.push([e,t]),un&&(Fo(),un=!1)},Nn=!0,un=!0,Ge=[],Xt=[],$n=null,Wn=Rt,ot={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ur,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{Ur(e[0],e[1])}catch{}})}},M=ot,mt=[],Qe=0,qt=[];function T(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Z,this._lib=!1;var t=this._PSD=M;if(xe&&(this._stackHolder=Ze(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==St)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Un(this,this._value);return}this._state=null,this._value=null,++t.ref,Ii(this,e)}var Vn={get:function(){var e=M,t=sn;function n(r,i){var o=this,a=!e.global&&(e!==M||t!==sn),u=a&&!De(),s=new T(function(l,c){pr(o,new Ai(cn(r,e,a,u),cn(i,e,a,u),l,c,e))});return xe&&Pi(s,this),s}return n.prototype=St,n},set:function(e){Re(this,"then",e&&e.prototype===St?Vn:{get:function(){return e},set:Vn.set})}};ut(T.prototype,{then:Vn,_then:function(e,t){pr(this,new Ai(null,null,e,t,M))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):Jt(r)}):this.then(null,function(r){return r&&r.name===t?n(r):Jt(r)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),Jt(t)})},stack:{get:function(){if(this._stack)return this._stack;try{Ln=!0;var e=Ki(this,[],jo),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{Ln=!1}}},timeout:function(e,t){var n=this;return e<1/0?new T(function(r,i){var o=setTimeout(function(){return i(new F.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,o))}):this}});typeof Symbol!="undefined"&&Symbol.toStringTag&&Re(T.prototype,Symbol.toStringTag,"Dexie.Promise");ot.env=Ti();function Ai(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}ut(T,{all:function(){var e=Ce.apply(null,arguments).map(ln);return new T(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,o){return T.resolve(i).then(function(a){e[o]=a,--r||t(e)},n)})})},resolve:function(e){if(e instanceof T)return e;if(e&&typeof e.then=="function")return new T(function(n,r){e.then(n,r)});var t=new T(St,!0,e);return Pi(t,$n),t},reject:Jt,race:function(){var e=Ce.apply(null,arguments).map(ln);return new T(function(t,n){e.map(function(r){return T.resolve(r).then(t,n)})})},PSD:{get:function(){return M},set:function(e){return M=e}},totalEchoes:{get:function(){return sn}},newPSD:Ne,usePSD:ft,scheduler:{get:function(){return At},set:function(e){At=e}},rejectionMapper:{get:function(){return Wn},set:function(e){Wn=e}},follow:function(e,t){return new T(function(n,r){return Ne(function(i,o){var a=M;a.unhandleds=[],a.onunhandled=o,a.finalize=Xe(function(){var u=this;No(function(){u.unhandleds.length===0?i():o(u.unhandleds[0])})},a.finalize),e()},t,n,r)})}});Qt&&(Qt.allSettled&&Re(T,"allSettled",function(){var e=Ce.apply(null,arguments).map(ln);return new T(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,o){return T.resolve(i).then(function(a){return r[o]={status:"fulfilled",value:a}},function(a){return r[o]={status:"rejected",reason:a}}).then(function(){return--n||t(r)})})})}),Qt.any&&typeof AggregateError!="undefined"&&Re(T,"any",function(){var e=Ce.apply(null,arguments).map(ln);return new T(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(o,a){return T.resolve(o).then(function(u){return t(u)},function(u){i[a]=u,--r||n(new AggregateError(i))})})})}));function Ii(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Dt();n&&typeof n.then=="function"?Ii(e,function(i,o){n instanceof T?n._then(i,o):n.then(i,o)}):(e._state=!0,e._value=n,Ci(e)),r&&Ot()}},Un.bind(null,e))}catch(n){Un(e,n)}}function Un(e,t){if(Xt.push(t),e._state===null){var n=e._lib&&Dt();t=Wn(t),e._state=!1,e._value=t,xe&&t!==null&&typeof t=="object"&&!t._promise&&_o(function(){var r=sr(t,"stack");t._promise=e,Re(t,"stack",{get:function(){return Ln?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),$o(e),Ci(e),n&&Ot()}}function Ci(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)pr(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Qe===0&&(++Qe,At(function(){--Qe===0&&yr()},[]))}function pr(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Qe,At(Lo,[n,e,t])}function Lo(e,t,n){try{$n=t;var r,i=t._value;t._state?r=e(i):(Xt.length&&(Xt=[]),r=e(i),Xt.indexOf(i)===-1&&Wo(t)),n.resolve(r)}catch(o){n.reject(o)}finally{$n=null,--Qe===0&&yr(),--n.psd.ref||n.psd.finalize()}}function Ki(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i=e._value,o,a;i!=null?(o=i.name||"Error",a=i.message||i,r=Mn(i,0)):(o=i,a=""),t.push(o+(a?": "+a:"")+r)}return xe&&(r=Mn(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&Ki(e._prev,t,n)),t}function Pi(e,t){var n=t?t._numPrev+1:0;n<Mo&&(e._prev=t,e._numPrev=n)}function Nt(){Dt()&&Ot()}function Dt(){var e=Nn;return Nn=!1,un=!1,e}function Ot(){var e,t,n;do for(;mt.length>0;)for(e=mt,mt=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(mt.length>0);Nn=!0,un=!0}function yr(){var e=Ge;Ge=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=qt.slice(0),n=t.length;n;)t[--n]()}function No(e){function t(){e(),qt.splice(qt.indexOf(t),1)}qt.push(t),++Qe,At(function(){--Qe===0&&yr()},[])}function $o(e){Ge.some(function(t){return t._value===e._value})||Ge.push(e)}function Wo(e){for(var t=Ge.length;t;)if(Ge[--t]._value===e._value){Ge.splice(t,1);return}}function Jt(e){return new T(St,!1,e)}function re(e,t){var n=M;return function(){var r=Dt(),i=M;try{return $e(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{$e(i,!1),r&&Ot()}}}var le={awaits:0,echoes:0,id:0},Vo=0,Zt=[],wn=0,sn=0,Uo=0;function Ne(e,t,n,r){var i=M,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Uo;var a=ot.env;o.env=vr?{Promise:T,PromiseProp:{value:T,configurable:!0,writable:!0},all:T.all,race:T.race,allSettled:T.allSettled,any:T.any,resolve:T.resolve,reject:T.reject,nthen:Wr(a.nthen,o),gthen:Wr(a.gthen,o)}:{},t&&he(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=ft(o,e,n,r);return o.ref===0&&o.finalize(),u}function ct(){return le.id||(le.id=++Vo),++le.awaits,le.echoes+=xi,le.id}function De(){return le.awaits?(--le.awaits===0&&(le.id=0),le.echoes=le.awaits*xi,!0):!1}(""+Si).indexOf("[native code]")===-1&&(ct=De=Z);function ln(e){return le.echoes&&e&&e.constructor===Qt?(ct(),e.then(function(t){return De(),t},function(t){return De(),ue(t)})):e}function zo(e){++sn,(!le.echoes||--le.echoes===0)&&(le.echoes=le.id=0),Zt.push(M),$e(e,!0)}function Ho(){var e=Zt[Zt.length-1];Zt.pop(),$e(e,!1)}function $e(e,t){var n=M;if((t?le.echoes&&(!wn++||e!==M):wn&&(!--wn||e!==M))&&Ri(t?zo.bind(null,e):Ho),e!==M&&(M=e,n===ot&&(ot.env=Ti()),vr)){var r=ot.env.Promise,i=e.env;an.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(te,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Ti(){var e=te.Promise;return vr?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(te,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:an.then,gthen:e.prototype.then}:{}}function ft(e,t,n,r,i){var o=M;try{return $e(e,!0),t(n,r,i)}finally{$e(o,!1)}}function Ri(e){Si.call(jn,e)}function cn(e,t,n,r){return typeof e!="function"?e:function(){var i=M;n&&ct(),$e(t,!0);try{return e.apply(this,arguments)}finally{$e(i,!1),r&&Ri(De)}}}function Wr(e,t){return function(n,r){return e.call(this,cn(n,t),cn(r,t))}}var Vr="unhandledrejection";function Ur(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(te.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Vr,!0,!0),he(r,i)):te.CustomEvent&&(r=new CustomEvent(Vr,{detail:i}),he(r,i)),r&&te.dispatchEvent&&(dispatchEvent(r),!te.PromiseRejectionEvent&&te.onunhandledrejection))try{te.onunhandledrejection(r)}catch{}xe&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch{}}var ue=T.reject;function zn(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!M.letThrough&&!e._vip){if(e._state.openComplete)return ue(new F.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return ue(new F.DatabaseClosed);e.open().catch(Z)}return e._state.dbReadyPromise.then(function(){return zn(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===fr.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return zn(e,t,n,r)})):ue(o)}return i._promise(t,function(o,a){return Ne(function(){return M.trans=i,r(o,a,i)})}).then(function(o){return i._completion.then(function(){return o})})}}var zr="3.2.2",Ye=String.fromCharCode(65535),Hn=-1/0,Ae="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Di="String expected.",bt=[],mn=typeof navigator!="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Yo=mn,Go=mn,Oi=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},gn="__dbnames",kn="readonly",En="readwrite";function qe(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Bi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function $t(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=Tt(t),delete t[e]),t}:function(t){return t}}var Qo=function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||M.trans,o=this.name;function a(s,l,c){if(!c.schema[o])throw new F.NotFound("Table "+o+" not part of transaction");return n(c.idbtrans,c)}var u=Dt();try{return i&&i.db===this.db?i===M.trans?i._promise(t,a,r):Ne(function(){return i._promise(t,a,r)},{trans:i,transless:M.transless||M}):zn(this.db,t,[this.name],a)}finally{u&&Ot()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(o){return r.hook.reading.fire(o)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(ce(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var n=oe(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(c){return c.compound&&n.every(function(f){return c.keyPath.indexOf(f)>=0})&&c.keyPath.every(function(f){return n.indexOf(f)>=0})})[0];if(r&&this.db._maxKey!==Ye)return this.where(r.name).equals(r.keyPath.map(function(c){return t[c]}));!r&&xe&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,o=this.db._deps.indexedDB;function a(c,f){try{return o.cmp(c,f)===0}catch{return!1}}var u=n.reduce(function(c,f){var d=c[0],m=c[1],p=i[f],h=t[f];return[d||p,d||!p?qe(m,p&&p.multi?function(y){var E=Te(y,f);return ce(E)&&E.some(function(w){return a(h,w)})}:function(y){return a(h,Te(y,f))}):m]},[null,null]),s=u[0],l=u[1];return s?this.where(s.name).equals(t[s.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,ce(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var n=function(r){if(!r)return r;var i=Object.create(t.prototype);for(var o in r)if(be(r,o))try{i[o]=r[o]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t},e.prototype.defineClass=function(){function t(n){he(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,o=i.auto,a=i.keyPath,u=t;return a&&o&&(u=$t(a)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[u]})}).then(function(s){return s.numFailures?T.reject(s.failures[0]):s.lastResult}).then(function(s){if(a)try{we(t,a,s)}catch{}return s})},e.prototype.update=function(t,n){if(typeof t=="object"&&!ce(t)){var r=Te(t,this.schema.primKey.keyPath);if(r===void 0)return ue(new F.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?oe(n).forEach(function(i){we(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,o=i.auto,a=i.keyPath,u=t;return a&&o&&(u=$t(a)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"put",values:[u],keys:n!=null?[n]:null})}).then(function(s){return s.numFailures?T.reject(s.failures[0]):s.lastResult}).then(function(s){if(a)try{we(t,a,s)}catch{}return s})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?T.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:Bi})}).then(function(n){return n.numFailures?T.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(o){return n.hook.reading.fire(o)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,l=s.auto,c=s.keyPath;if(c&&o)throw new F.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new F.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,d=c&&l?t.map($t(c)):t;return i.core.mutate({trans:u,type:"add",keys:o,values:d,wantResults:a}).then(function(m){var p=m.numFailures,h=m.results,y=m.lastResult,E=m.failures,w=a?h:y;if(p===0)return w;throw new gt(i.name+".bulkAdd(): "+p+" of "+f+" operations failed",E)})})},e.prototype.bulkPut=function(t,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,l=s.auto,c=s.keyPath;if(c&&o)throw new F.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new F.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,d=c&&l?t.map($t(c)):t;return i.core.mutate({trans:u,type:"put",keys:o,values:d,wantResults:a}).then(function(m){var p=m.numFailures,h=m.results,y=m.lastResult,E=m.failures,w=a?h:y;if(p===0)return w;throw new gt(i.name+".bulkPut(): "+p+" of "+f+" operations failed",E)})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var o=i.numFailures,a=i.lastResult,u=i.failures;if(o===0)return a;throw new gt(n.name+".bulkDelete(): "+o+" of "+r+" operations failed",u)})},e}();function Bt(e){var t={},n=function(u,s){if(s){for(var l=arguments.length,c=new Array(l-1);--l;)c[l-1]=arguments[l];return t[u].subscribe.apply(null,c),e}else if(typeof u=="string")return t[u]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(u,s,l){if(typeof u=="object")return a(u);s||(s=Bo),l||(l=Z);var c={subscribers:[],fire:l,subscribe:function(f){c.subscribers.indexOf(f)===-1&&(c.subscribers.push(f),c.fire=s(c.fire,f))},unsubscribe:function(f){c.subscribers=c.subscribers.filter(function(d){return d!==f}),c.fire=c.subscribers.reduce(s,l)}};return t[u]=n[u]=c,c}function a(u){oe(u).forEach(function(s){var l=u[s];if(ce(l))o(s,u[s][0],u[s][1]);else if(l==="asap")var c=o(s,Rt,function(){for(var d=arguments.length,m=new Array(d);d--;)m[d]=arguments[d];c.subscribers.forEach(function(p){pi(function(){p.apply(null,m)})})});else throw new F.InvalidArgument("Invalid event config")})}}function Mt(e,t){return st(t).from({prototype:e}),t}function Xo(e){return Mt(Qo.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:Bt(null,{creating:[Ro,Z],reading:[To,Rt],updating:[Oo,Z],deleting:[Do,Z]})})}function et(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function xn(e,t){e.filter=qe(e.filter,t)}function Sn(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return qe(r(),t())}:t,e.justLimit=n&&!r}function qo(e,t){e.isMatch=qe(e.isMatch,t)}function en(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new F.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Hr(e,t,n){var r=en(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Wt(e,t,n,r){var i=e.replayFilter?qe(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},a=function(u,s,l){if(!i||i(s,l,function(d){return s.stop(d)},function(d){return s.fail(d)})){var c=s.primaryKey,f=""+c;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(c)),be(o,f)||(o[f]=!0,t(u,s,l))}};return Promise.all([e.or._iterate(a,n),Yr(Hr(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}else return Yr(Hr(e,r,n),qe(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Yr(e,t,n,r){var i=r?function(a,u,s){return n(r(a),u,s)}:n,o=re(i);return e.then(function(a){if(a)return a.start(function(){var u=function(){return a.continue()};(!t||t(a,function(s){return u=s},function(s){a.stop(s),u=Z},function(s){a.fail(s),u=Z}))&&o(a.value,a,function(s){return u=s}),u()})})}function de(e,t){try{var n=Gr(e),r=Gr(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return Zo(Qr(e),Qr(t));case"Array":return Jo(e,t)}}catch{}return NaN}function Jo(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o){var a=de(e[o],t[o]);if(a!==0)return a}return n===r?0:n<r?-1:1}function Zo(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}function Gr(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=On(e);return n==="ArrayBuffer"?"binary":n}function Qr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var ea=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,ue.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,ue.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=qe(n.algorithm,t)},e.prototype._iterate=function(t,n){return Wt(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&he(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return Wt(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,o=i.table.core;if(et(i,!0))return o.count({trans:r,query:{index:en(i,o.schema),range:i.range}}).then(function(u){return Math.min(u,i.limit)});var a=0;return Wt(i,function(){return++a,!1},r,o).then(function(){return a})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],o=r.length-1;function a(l,c){return c?a(l[r[c]],c-1):l[i]}var u=this._ctx.dir==="next"?1:-1;function s(l,c){var f=a(l,o),d=a(c,o);return f<d?-u:f>d?u:0}return this.toArray(function(l){return l.sort(s)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&et(i,!0)&&i.limit>0){var o=i.valueMapper,a=en(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:a,range:i.range}}).then(function(s){var l=s.result;return o?l.map(o):l})}else{var u=[];return Wt(i,function(s){return u.push(s)},r,i.table.core).then(function(){return u})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,et(n)?Sn(n,function(){var r=t;return function(i,o){return r===0?!0:r===1?(--r,!1):(o(function(){i.advance(r),r=0}),!1)}}):Sn(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Sn(this._ctx,function(){var n=t;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this},e.prototype.until=function(t,n){return xn(this._ctx,function(r,i,o){return t(r.value)?(i(o),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return xn(this._ctx,function(n){return t(n.value)}),qo(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&et(n,!0)&&n.limit>0)return this._read(function(i){var o=en(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(function(i){var o=i.result;return o}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return xn(this._ctx,function(i){var o=i.primaryKey.toString(),a=be(r,o);return r[o]=!0,!a}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var o;if(typeof t=="function")o=t;else{var a=oe(t),u=a.length;o=function(E){for(var w=!1,b=0;b<u;++b){var k=a[b],g=t[k];Te(E,k)!==g&&(we(E,k,g),w=!0)}return w}}var s=r.table.core,l=s.schema.primaryKey,c=l.outbound,f=l.extractKey,d=n.db._options.modifyChunkSize||200,m=[],p=0,h=[],y=function(E,w){var b=w.failures,k=w.numFailures;p+=E-k;for(var g=0,x=oe(b);g<x.length;g++){var K=x[g];m.push(b[K])}};return n.clone().primaryKeys().then(function(E){var w=function(b){var k=Math.min(d,E.length-b);return s.getMany({trans:i,keys:E.slice(b,b+k),cache:"immutable"}).then(function(g){for(var x=[],K=[],S=c?[]:null,C=[],D=0;D<k;++D){var N=g[D],$={value:Tt(N),primKey:E[b+D]};o.call($,$.value,$)!==!1&&($.value==null?C.push(E[b+D]):!c&&de(f(N),f($.value))!==0?(C.push(E[b+D]),x.push($.value)):(K.push($.value),c&&S.push(E[b+D])))}var B=et(r)&&r.limit===1/0&&(typeof t!="function"||t===An)&&{index:r.index,range:r.range};return Promise.resolve(x.length>0&&s.mutate({trans:i,type:"add",values:x}).then(function(L){for(var R in L.failures)C.splice(parseInt(R),1);y(x.length,L)})).then(function(){return(K.length>0||B&&typeof t=="object")&&s.mutate({trans:i,type:"put",keys:S,values:K,criteria:B,changeSpec:typeof t!="function"&&t}).then(function(L){return y(K.length,L)})}).then(function(){return(C.length>0||B&&t===An)&&s.mutate({trans:i,type:"delete",keys:C,criteria:B}).then(function(L){return y(C.length,L)})}).then(function(){return E.length>b+k&&w(b+d)})})};return w(0).then(function(){if(m.length>0)throw new on("Error modifying one or more objects",m,p,h);return E.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return et(t)&&(t.isPrimKey&&!Go||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,o=n;return t.table.core.count({trans:r,query:{index:i,range:o}}).then(function(a){return t.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(function(u){var s=u.failures;u.lastResult,u.results;var l=u.numFailures;if(l)throw new on("Could not delete some values",Object.keys(s).map(function(c){return s[c]}),a-l);return a-l})})}):this.modify(An)},e}(),An=function(e,t){return t.value=null};function ta(e){return Mt(ea.prototype,function(n,r){this.db=e;var i=Bi,o=null;if(r)try{i=r()}catch(l){o=l}var a=n._ctx,u=a.table,s=u.hook.reading.fire;this._ctx={table:u,index:a.index,isPrimKey:!a.index||u.schema.primKey.keyPath&&a.index===u.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:a.or,valueMapper:s!==Rt?s:null}})}function na(e,t){return e<t?-1:e===t?0:1}function ra(e,t){return e>t?-1:e===t?0:1}function me(e,t,n){var r=e instanceof ji?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function tt(e){return new e.Collection(e,function(){return Mi("")}).limit(0)}function ia(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function oa(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function aa(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),u=-1,s=0;s<a;++s){var l=t[s];if(l!==r[s])return i(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):i(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):u>=0?e.substr(0,u)+t[u]+n.substr(u+1):null;i(e[s],l)<0&&(u=s)}return a<r.length&&o==="next"?e+n.substr(e.length):a<e.length&&o==="prev"?e.substr(0,n.length):u<0?null:e.substr(0,u)+r[u]+n.substr(u+1)}function Vt(e,t,n,r){var i,o,a,u,s,l,c,f=n.length;if(!n.every(function(h){return typeof h=="string"}))return me(e,Di);function d(h){i=ia(h),o=oa(h),a=h==="next"?na:ra;var y=n.map(function(E){return{lower:o(E),upper:i(E)}}).sort(function(E,w){return a(E.lower,w.lower)});u=y.map(function(E){return E.upper}),s=y.map(function(E){return E.lower}),l=h,c=h==="next"?"":r}d("next");var m=new e.Collection(e,function(){return Me(u[0],s[f-1]+r)});m._ondirectionchange=function(h){d(h)};var p=0;return m._addAlgorithm(function(h,y,E){var w=h.key;if(typeof w!="string")return!1;var b=o(w);if(t(b,s,p))return!0;for(var k=null,g=p;g<f;++g){var x=aa(w,b,u[g],s[g],a,l);x===null&&k===null?p=g+1:(k===null||a(k,x)>0)&&(k=x)}return y(k!==null?function(){h.continue(k+c)}:E),!1}),m}function Me(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Mi(e){return{type:1,lower:e,upper:e}}var ji=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?tt(this):new this.Collection(this,function(){return Me(t,n,!r,!i)})}catch{return me(this,Ae)}},e.prototype.equals=function(t){return t==null?me(this,Ae):new this.Collection(this,function(){return Mi(t)})},e.prototype.above=function(t){return t==null?me(this,Ae):new this.Collection(this,function(){return Me(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?me(this,Ae):new this.Collection(this,function(){return Me(t,void 0,!1)})},e.prototype.below=function(t){return t==null?me(this,Ae):new this.Collection(this,function(){return Me(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?me(this,Ae):new this.Collection(this,function(){return Me(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?me(this,Di):this.between(t,t+Ye,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):Vt(this,function(n,r){return n.indexOf(r[0])===0},[t],Ye)},e.prototype.equalsIgnoreCase=function(t){return Vt(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=Ce.apply(it,arguments);return t.length===0?tt(this):Vt(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=Ce.apply(it,arguments);return t.length===0?tt(this):Vt(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,Ye)},e.prototype.anyOf=function(){var t=this,n=Ce.apply(it,arguments),r=this._cmp;try{n.sort(r)}catch{return me(this,Ae)}if(n.length===0)return tt(this);var i=new this.Collection(this,function(){return Me(n[0],n[n.length-1])});i._ondirectionchange=function(a){r=a==="next"?t._ascending:t._descending,n.sort(r)};var o=0;return i._addAlgorithm(function(a,u,s){for(var l=a.key;r(l,n[o])>0;)if(++o,o===n.length)return u(s),!1;return r(l,n[o])===0?!0:(u(function(){a.continue(n[o])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[Hn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=Ce.apply(it,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return me(this,Ae)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[Hn,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,o=this._ascending,a=this._descending,u=this._min,s=this._max;if(t.length===0)return tt(this);if(!t.every(function(g){return g[0]!==void 0&&g[1]!==void 0&&o(g[0],g[1])<=0}))return me(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",F.InvalidArgument);var l=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;function f(g,x){for(var K=0,S=g.length;K<S;++K){var C=g[K];if(i(x[0],C[1])<0&&i(x[1],C[0])>0){C[0]=u(C[0],x[0]),C[1]=s(C[1],x[1]);break}}return K===S&&g.push(x),g}var d=o;function m(g,x){return d(g[0],x[0])}var p;try{p=t.reduce(f,[]),p.sort(m)}catch{return me(this,Ae)}var h=0,y=c?function(g){return o(g,p[h][1])>0}:function(g){return o(g,p[h][1])>=0},E=l?function(g){return a(g,p[h][0])>0}:function(g){return a(g,p[h][0])>=0};function w(g){return!y(g)&&!E(g)}var b=y,k=new this.Collection(this,function(){return Me(p[0][0],p[p.length-1][1],!l,!c)});return k._ondirectionchange=function(g){g==="next"?(b=y,d=o):(b=E,d=a),p.sort(m)},k._addAlgorithm(function(g,x,K){for(var S=g.key;b(S);)if(++h,h===p.length)return x(K),!1;return w(S)?!0:(r._cmp(S,p[h][1])===0||r._cmp(S,p[h][0])===0||x(function(){d===o?g.continue(p[h][0]):g.continue(p[h][1])}),!1)}),k},e.prototype.startsWithAnyOf=function(){var t=Ce.apply(it,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?tt(this):this.inAnyRange(t.map(function(n){return[n,n+Ye]})):me(this,"startsWithAnyOf() only works with strings")},e}();function ua(e){return Mt(ji.prototype,function(n,r,i){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i};var o=e._deps.indexedDB;if(!o)throw new F.MissingAPI;this._cmp=this._ascending=o.cmp.bind(o),this._descending=function(a,u){return o.cmp(u,a)},this._max=function(a,u){return o.cmp(a,u)>0?a:u},this._min=function(a,u){return o.cmp(a,u)<0?a:u},this._IDBKeyRange=e._deps.IDBKeyRange})}function Ee(e){return re(function(t){return It(t),e(t.target.error),!1})}function It(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Ct="storagemutated",Fe="x-storagemutated-1",We=Bt(null,Ct),sa=function(){function e(){}return e.prototype._lock=function(){return yt(!M.global),++this._reculock,this._reculock===1&&!M.global&&(M.lockOwnerFor=this),this},e.prototype._unlock=function(){if(yt(!M.global),--this._reculock===0)for(M.global||(M.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{ft(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&M.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(yt(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new F.DatabaseClosed(i);case"MissingAPIError":throw new F.MissingAPI(i.message,i);default:throw new F.OpenFailed(i)}if(!this.active)throw new F.TransactionInactive;return yt(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=re(function(o){It(o),n._reject(t.error)}),t.onabort=re(function(o){It(o),n.active&&n._reject(new F.Abort(t.error)),n.active=!1,n.on("abort").fire(o)}),t.oncomplete=re(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&We.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return ue(new F.ReadOnly("Transaction is readonly"));if(!this.active)return ue(new F.TransactionInactive);if(this._locked())return new T(function(a,u){i._blockedFuncs.push([function(){i._promise(t,n,r).then(a,u)},M])});if(r)return Ne(function(){var a=new T(function(u,s){i._lock();var l=n(u,s,i);l&&l.then&&l.then(u,s)});return a.finally(function(){return i._unlock()}),a._lib=!0,a});var o=new T(function(a,u){var s=n(a,u,i);s&&s.then&&s.then(a,u)});return o._lib=!0,o},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=T.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=a)})()}var o=n._waitingFor;return new T(function(a,u){r.then(function(s){return n._waitingQueue.push(re(a.bind(null,s)))},function(s){return n._waitingQueue.push(re(u.bind(null,s)))}).finally(function(){n._waitingFor===o&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new F.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(be(n,t))return n[t];var r=this.schema[t];if(!r)throw new F.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e}();function la(e){return Mt(sa.prototype,function(n,r,i,o,a){var u=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=o,this.idbtrans=null,this.on=Bt(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new T(function(s,l){u._resolve=s,u._reject=l}),this._completion.then(function(){u.active=!1,u.on.complete.fire()},function(s){var l=u.active;return u.active=!1,u.on.error.fire(s),u.parent?u.parent._reject(s):l&&u.idbtrans&&u.idbtrans.abort(),ue(s)})})}function Yn(e,t,n,r,i,o,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+Fi(t)}}function Fi(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Li(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:yi(n,function(r){return[r.name,r]})}}function ca(e){return e.length===1?e[0]:e}var Kt=function(e){try{return e.only([[]]),Kt=function(){return[[]]},[[]]}catch{return Kt=function(){return Ye},Ye}};function Gn(e){return e==null?function(){}:typeof e=="string"?fa(e):function(t){return Te(t,e)}}function fa(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return Te(n,e)}}function Xr(e){return[].slice.call(e)}var da=0;function _t(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function ha(e,t,n){function r(f,d){var m=Xr(f.objectStoreNames);return{schema:{name:f.name,tables:m.map(function(p){return d.objectStore(p)}).map(function(p){var h=p.keyPath,y=p.autoIncrement,E=ce(h),w=h==null,b={},k={name:p.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w,compound:E,keyPath:h,autoIncrement:y,unique:!0,extractKey:Gn(h)},indexes:Xr(p.indexNames).map(function(g){return p.index(g)}).map(function(g){var x=g.name,K=g.unique,S=g.multiEntry,C=g.keyPath,D=ce(C),N={name:x,compound:D,keyPath:C,unique:K,multiEntry:S,extractKey:Gn(C)};return b[_t(C)]=N,N}),getIndexByKeyPath:function(g){return b[_t(g)]}};return b[":id"]=k.primaryKey,h!=null&&(b[_t(h)]=k.primaryKey),k})},hasGetAll:m.length>0&&"getAll"in d.objectStore(m[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(f){if(f.type===3)return null;if(f.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var d=f.lower,m=f.upper,p=f.lowerOpen,h=f.upperOpen,y=d===void 0?m===void 0?null:t.upperBound(m,!!h):m===void 0?t.lowerBound(d,!!p):t.bound(d,m,!!p,!!h);return y}function o(f){var d=f.name;function m(y){var E=y.trans,w=y.type,b=y.keys,k=y.values,g=y.range;return new Promise(function(x,K){x=re(x);var S=E.objectStore(d),C=S.keyPath==null,D=w==="put"||w==="add";if(!D&&w!=="delete"&&w!=="deleteRange")throw new Error("Invalid operation type: "+w);var N=(b||k||{length:1}).length;if(b&&k&&b.length!==k.length)throw new Error("Given keys array must have same length as given values array.");if(N===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});var $,B=[],L=[],R=0,Y=function(ie){++R,It(ie)};if(w==="deleteRange"){if(g.type===4)return x({numFailures:R,failures:L,results:[],lastResult:void 0});g.type===3?B.push($=S.clear()):B.push($=S.delete(i(g)))}else{var G=D?C?[k,b]:[k,null]:[b,null],O=G[0],H=G[1];if(D)for(var Q=0;Q<N;++Q)B.push($=H&&H[Q]!==void 0?S[w](O[Q],H[Q]):S[w](O[Q])),$.onerror=Y;else for(var Q=0;Q<N;++Q)B.push($=S[w](O[Q])),$.onerror=Y}var ne=function(ie){var J=ie.target.result;B.forEach(function(ee,ye){return ee.error!=null&&(L[ye]=ee.error)}),x({numFailures:R,failures:L,results:w==="delete"?b:B.map(function(ee){return ee.result}),lastResult:J})};$.onerror=function(ie){Y(ie),ne(ie)},$.onsuccess=ne})}function p(y){var E=y.trans,w=y.values,b=y.query,k=y.reverse,g=y.unique;return new Promise(function(x,K){x=re(x);var S=b.index,C=b.range,D=E.objectStore(d),N=S.isPrimaryKey?D:D.index(S.name),$=k?g?"prevunique":"prev":g?"nextunique":"next",B=w||!("openKeyCursor"in N)?N.openCursor(i(C),$):N.openKeyCursor(i(C),$);B.onerror=Ee(K),B.onsuccess=re(function(L){var R=B.result;if(!R){x(null);return}R.___id=++da,R.done=!1;var Y=R.continue.bind(R),G=R.continuePrimaryKey;G&&(G=G.bind(R));var O=R.advance.bind(R),H=function(){throw new Error("Cursor not started")},Q=function(){throw new Error("Cursor not stopped")};R.trans=E,R.stop=R.continue=R.continuePrimaryKey=R.advance=H,R.fail=re(K),R.next=function(){var ne=this,ie=1;return this.start(function(){return ie--?ne.continue():ne.stop()}).then(function(){return ne})},R.start=function(ne){var ie=new Promise(function(ee,ye){ee=re(ee),B.onerror=Ee(ye),R.fail=ye,R.stop=function(V){R.stop=R.continue=R.continuePrimaryKey=R.advance=Q,ee(V)}}),J=function(){if(B.result)try{ne()}catch(ee){R.fail(ee)}else R.done=!0,R.start=function(){throw new Error("Cursor behind last entry")},R.stop()};return B.onsuccess=re(function(ee){B.onsuccess=J,J()}),R.continue=Y,R.continuePrimaryKey=G,R.advance=O,J(),ie},x(R)},K)})}function h(y){return function(E){return new Promise(function(w,b){w=re(w);var k=E.trans,g=E.values,x=E.limit,K=E.query,S=x===1/0?void 0:x,C=K.index,D=K.range,N=k.objectStore(d),$=C.isPrimaryKey?N:N.index(C.name),B=i(D);if(x===0)return w({result:[]});if(y){var L=g?$.getAll(B,S):$.getAllKeys(B,S);L.onsuccess=function(O){return w({result:O.target.result})},L.onerror=Ee(b)}else{var R=0,Y=g||!("openKeyCursor"in $)?$.openCursor(B):$.openKeyCursor(B),G=[];Y.onsuccess=function(O){var H=Y.result;if(!H)return w({result:G});if(G.push(g?H.value:H.primaryKey),++R===x)return w({result:G});H.continue()},Y.onerror=Ee(b)}})}}return{name:d,schema:f,mutate:m,getMany:function(y){var E=y.trans,w=y.keys;return new Promise(function(b,k){b=re(b);for(var g=E.objectStore(d),x=w.length,K=new Array(x),S=0,C=0,D,N=function(R){var Y=R.target;(K[Y._pos]=Y.result)!=null,++C===S&&b(K)},$=Ee(k),B=0;B<x;++B){var L=w[B];L!=null&&(D=g.get(w[B]),D._pos=B,D.onsuccess=N,D.onerror=$,++S)}S===0&&b(K)})},get:function(y){var E=y.trans,w=y.key;return new Promise(function(b,k){b=re(b);var g=E.objectStore(d),x=g.get(w);x.onsuccess=function(K){return b(K.target.result)},x.onerror=Ee(k)})},query:h(s),openCursor:p,count:function(y){var E=y.query,w=y.trans,b=E.index,k=E.range;return new Promise(function(g,x){var K=w.objectStore(d),S=b.isPrimaryKey?K:K.index(b.name),C=i(k),D=C?S.count(C):S.count();D.onsuccess=re(function(N){return g(N.target.result)}),D.onerror=Ee(x)})}}}var a=r(e,n),u=a.schema,s=a.hasGetAll,l=u.tables.map(function(f){return o(f)}),c={};return l.forEach(function(f){return c[f.name]=f}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(f){var d=c[f];if(!d)throw new Error("Table '"+f+"' not found");return c[f]},MIN_KEY:-1/0,MAX_KEY:Kt(t),schema:u}}function va(e,t){return t.reduce(function(n,r){var i=r.create;return X(X({},n),i(n))},e)}function pa(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var o=va(ha(t,i,r),e.dbcore);return{dbcore:o}}function mr(e,t){var n=e._novip,r=t.db,i=pa(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach(function(o){var a=o.name;n.core.schema.tables.some(function(u){return u.name===a})&&(o.core=n.core.table(a),n[a]instanceof n.Table&&(n[a].core=o.core))})}function fn(e,t,n,r){var i=e._novip;n.forEach(function(o){var a=r[o];t.forEach(function(u){var s=sr(u,o);(!s||"value"in s&&s.value===void 0)&&(u===i.Transaction.prototype||u instanceof i.Transaction?Re(u,o,{get:function(){return this.table(o)},set:function(l){hi(this,o,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):u[o]=new i.Table(o,a))})})}function Qn(e,t){var n=e._novip;t.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function ya(e,t){return e._cfg.version-t._cfg.version}function ma(e,t,n,r){var i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);var a=o._reject.bind(o),u=M.transless||M;Ne(function(){M.trans=o,M.transless=u,t===0?(oe(i).forEach(function(s){gr(n,s,i[s].primKey,i[s].indexes)}),mr(e,n),T.follow(function(){return e.on.populate.fire(o)}).catch(a)):ga(e,t,o,n).catch(a)})}function ga(e,t,n,r){var i=e._novip,o=[],a=i._versions,u=i._dbSchema=br(i,i.idbdb,r),s=!1,l=a.filter(function(f){return f._cfg.version>=t});l.forEach(function(f){o.push(function(){var d=u,m=f._cfg.dbschema;qn(i,d,r),qn(i,m,r),u=i._dbSchema=m;var p=Ni(d,m);p.add.forEach(function(k){gr(r,k[0],k[1].primKey,k[1].indexes)}),p.change.forEach(function(k){if(k.recreate)throw new F.Upgrade("Not yet support for changing primary key");var g=r.objectStore(k.name);k.add.forEach(function(x){return Xn(g,x)}),k.change.forEach(function(x){g.deleteIndex(x.name),Xn(g,x)}),k.del.forEach(function(x){return g.deleteIndex(x)})});var h=f._cfg.contentUpgrade;if(h&&f._cfg.version>t){mr(i,r),n._memoizedTables={},s=!0;var y=mi(m);p.del.forEach(function(k){y[k]=d[k]}),Qn(i,[i.Transaction.prototype]),fn(i,[i.Transaction.prototype],oe(y),y),n.schema=y;var E=lr(h);E&&ct();var w,b=T.follow(function(){if(w=h(n),w&&E){var k=De.bind(null,null);w.then(k,k)}});return w&&typeof w.then=="function"?T.resolve(w):b.then(function(){return w})}}),o.push(function(d){if(!s||!Yo){var m=f._cfg.dbschema;_a(m,d)}Qn(i,[i.Transaction.prototype]),fn(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function c(){return o.length?T.resolve(o.shift()(n.idbtrans)).then(c):T.resolve()}return c().then(function(){ba(u,r)})}function Ni(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],o=t[r];if(!i)n.add.push([r,o]);else{var a={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!mn)a.recreate=!0,n.change.push(a);else{var u=i.idxByName,s=o.idxByName,l=void 0;for(l in u)s[l]||a.del.push(l);for(l in s){var c=u[l],f=s[l];c?c.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}}return n}function gr(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(o){return Xn(i,o)}),i}function ba(e,t){oe(e).forEach(function(n){t.db.objectStoreNames.contains(n)||gr(t,n,e[n].primKey,e[n].indexes)})}function _a(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function Xn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function br(e,t,n){var r={},i=pn(t.objectStoreNames,0);return i.forEach(function(o){for(var a=n.objectStore(o),u=a.keyPath,s=Yn(Fi(u),u||"",!1,!1,!!a.autoIncrement,u&&typeof u!="string",!0),l=[],c=0;c<a.indexNames.length;++c){var f=a.index(a.indexNames[c]);u=f.keyPath;var d=Yn(f.name,u,!!f.unique,!!f.multiEntry,!1,u&&typeof u!="string",!1);l.push(d)}r[o]=Li(o,s,l)}),r}function wa(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=br(r,t,n);r._storeNames=pn(t.objectStoreNames,0),fn(r,[r._allTables],oe(i),i)}function ka(e,t){var n=br(e,e.idbdb,t),r=Ni(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function qn(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,o=0;o<i.length;++o){var a=i[o],u=n.objectStore(a);r._hasGetAll="getAll"in u;for(var s=0;s<u.indexNames.length;++s){var l=u.indexNames[s],c=u.index(l).keyPath,f=typeof c=="string"?c:"["+pn(c).join("+")+"]";if(t[a]){var d=t[a].idxByName[f];d&&(d.name=l,delete t[a].idxByName[f],t[a].idxByName[l]=d)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&te.WorkerGlobalScope&&te instanceof te.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function Ea(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Yn(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),ce(i),n===0)})}var xa=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){oe(t).forEach(function(r){if(t[r]!==null){var i=Ea(t[r]),o=i.shift();if(o.multi)throw new F.Schema("Primary key cannot be multi-valued");i.forEach(function(a){if(a.auto)throw new F.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new F.Schema("Index must have a name and cannot be an empty string")}),n[r]=Li(r,o,i)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?he(this._cfg.storesSource,t):t;var r=n._versions,i={},o={};return r.forEach(function(a){he(i,a._cfg.storesSource),o=a._cfg.dbschema={},a._parseStoresSpec(i,o)}),n._dbSchema=o,Qn(n,[n._allTables,n,n.Transaction.prototype]),fn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],oe(o),o),n._storeNames=oe(o),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=dr(this._cfg.contentUpgrade||Z,t),this},e}();function Sa(e){return Mt(xa.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function _r(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new xr(gn,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function wr(e){return e&&typeof e.databases=="function"}function Aa(e){var t=e.indexedDB,n=e.IDBKeyRange;return wr(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==gn})}):_r(t,n).toCollection().primaryKeys()}function Ia(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!wr(n)&&t!==gn&&_r(n,r).put({name:t}).catch(Z)}function Ca(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!wr(n)&&t!==gn&&_r(n,r).delete(t).catch(Z)}function Jn(e){return Ne(function(){return M.letThrough=!0,e()})}function Ka(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function Pa(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?ue(t.dbOpenError):e});xe&&(t.openCanceller._stackHolder=Ze()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new F.DatabaseClosed("db.open() was cancelled")}var o=t.dbReadyResolve,a=null,u=!1;return T.race([r,(typeof navigator=="undefined"?T.resolve():Ka()).then(function(){return new T(function(s,l){if(i(),!n)throw new F.MissingAPI;var c=e.name,f=t.autoSchema?n.open(c):n.open(c,Math.round(e.verno*10));if(!f)throw new F.MissingAPI;f.onerror=Ee(l),f.onblocked=re(e._fireOnBlocked),f.onupgradeneeded=re(function(d){if(a=f.transaction,t.autoSchema&&!e._options.allowEmptyDB){f.onerror=It,a.abort(),f.result.close();var m=n.deleteDatabase(c);m.onsuccess=m.onerror=re(function(){l(new F.NoSuchDatabase("Database "+c+" doesnt exist"))})}else{a.onerror=Ee(l);var p=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;u=p<1,e._novip.idbdb=f.result,ma(e,p/10,a,l)}},l),f.onsuccess=re(function(){a=null;var d=e._novip.idbdb=f.result,m=pn(d.objectStoreNames);if(m.length>0)try{var p=d.transaction(ca(m),"readonly");t.autoSchema?wa(e,d,p):(qn(e,e._dbSchema,p),ka(e,p)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),mr(e,p)}catch{}bt.push(e),d.onversionchange=re(function(h){t.vcFired=!0,e.on("versionchange").fire(h)}),d.onclose=re(function(h){e.on("close").fire(h)}),u&&Ia(e._deps,c),s()},l)})})]).then(function(){return i(),t.onReadyBeingFired=[],T.resolve(Jn(function(){return e.on.ready.fire(e.vip)})).then(function s(){if(t.onReadyBeingFired.length>0){var l=t.onReadyBeingFired.reduce(dr,Z);return t.onReadyBeingFired=[],T.resolve(Jn(function(){return l(e.vip)})).then(s)}})}).finally(function(){t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(function(){return e}).catch(function(s){t.dbOpenError=s;try{a&&a.abort()}catch{}return r===t.openCanceller&&e._close(),ue(s)}).finally(function(){t.openComplete=!0,o()})}function Zn(e){var t=function(a){return e.next(a)},n=function(a){return e.throw(a)},r=o(t),i=o(n);function o(a){return function(u){var s=a(u),l=s.value;return s.done?l:!l||typeof l.then!="function"?ce(l)?Promise.all(l).then(r,i):r(l):l.then(r,i)}}return o(t)()}function Ta(e,t,n){var r=arguments.length;if(r<2)throw new F.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=gi(i);return[e,o,n]}function $i(e,t,n,r,i){return T.resolve().then(function(){var o=M.transless||M,a=e._createTransaction(t,n,e._dbSchema,r),u={trans:a,transless:o};if(r)a.idbtrans=r.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(f){return f.name===fr.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return $i(e,t,n,null,i)})):ue(f)}var s=lr(i);s&&ct();var l,c=T.follow(function(){if(l=i.call(a,a),l)if(s){var f=De.bind(null,null);l.then(f,f)}else typeof l.next=="function"&&typeof l.throw=="function"&&(l=Zn(l))},u);return(l&&typeof l.then=="function"?T.resolve(l).then(function(f){return a.active?f:ue(new F.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return l})).then(function(f){return r&&a._resolve(),a._completion.then(function(){return f})}).catch(function(f){return a._reject(f),ue(f)})})}function Ut(e,t,n){for(var r=ce(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function Ra(e){return X(X({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},o=[];function a(h,y,E){var w=_t(h),b=i[w]=i[w]||[],k=h==null?0:typeof h=="string"?1:h.length,g=y>0,x=X(X({},E),{isVirtual:g,keyTail:y,keyLength:k,extractKey:Gn(h),unique:!g&&E.unique});if(b.push(x),x.isPrimaryKey||o.push(x),k>1){var K=k===2?h[0]:h.slice(0,k-1);a(K,y+1,E)}return b.sort(function(S,C){return S.keyTail-C.keyTail}),x}var u=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[u];for(var s=0,l=r.indexes;s<l.length;s++){var c=l[s];a(c.keyPath,0,c)}function f(h){var y=i[_t(h)];return y&&y[0]}function d(h,y){return{type:h.type===1?2:h.type,lower:Ut(h.lower,h.lowerOpen?e.MAX_KEY:e.MIN_KEY,y),lowerOpen:!0,upper:Ut(h.upper,h.upperOpen?e.MIN_KEY:e.MAX_KEY,y),upperOpen:!0}}function m(h){var y=h.query.index;return y.isVirtual?X(X({},h),{query:{index:y,range:d(h.query.range,y.keyTail)}}):h}var p=X(X({},n),{schema:X(X({},r),{primaryKey:u,indexes:o,getIndexByKeyPath:f}),count:function(h){return n.count(m(h))},query:function(h){return n.query(m(h))},openCursor:function(h){var y=h.query.index,E=y.keyTail,w=y.isVirtual,b=y.keyLength;if(!w)return n.openCursor(h);function k(g){function x(S){S!=null?g.continue(Ut(S,h.reverse?e.MAX_KEY:e.MIN_KEY,E)):h.unique?g.continue(g.key.slice(0,b).concat(h.reverse?e.MIN_KEY:e.MAX_KEY,E)):g.continue()}var K=Object.create(g,{continue:{value:x},continuePrimaryKey:{value:function(S,C){g.continuePrimaryKey(Ut(S,e.MAX_KEY,E),C)}},primaryKey:{get:function(){return g.primaryKey}},key:{get:function(){var S=g.key;return b===1?S[0]:S.slice(0,b)}},value:{get:function(){return g.value}}});return K}return n.openCursor(m(h)).then(function(g){return g&&k(g)})}});return p}})}var Da={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Ra};function kr(e,t,n,r){return n=n||{},r=r||"",oe(e).forEach(function(i){if(!be(t,i))n[r+i]=void 0;else{var o=e[i],a=t[i];if(typeof o=="object"&&typeof a=="object"&&o&&a){var u=On(o),s=On(a);u!==s?n[r+i]=t[i]:u==="Object"?kr(o,a,n,r+i+"."):o!==a&&(n[r+i]=t[i])}else o!==a&&(n[r+i]=t[i])}}),oe(t).forEach(function(i){be(e,i)||(n[r+i]=t[i])}),n}function Oa(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Ba={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return X(X({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=X(X({},n),{mutate:function(o){var a=M.trans,u=a.table(t).hook,s=u.deleting,l=u.creating,c=u.updating;switch(o.type){case"add":if(l.fire===Z)break;return a._promise("readwrite",function(){return f(o)},!0);case"put":if(l.fire===Z&&c.fire===Z)break;return a._promise("readwrite",function(){return f(o)},!0);case"delete":if(s.fire===Z)break;return a._promise("readwrite",function(){return f(o)},!0);case"deleteRange":if(s.fire===Z)break;return a._promise("readwrite",function(){return d(o)},!0)}return n.mutate(o);function f(p){var h=M.trans,y=p.keys||Oa(r,p);if(!y)throw new Error("Keys missing");return p=p.type==="add"||p.type==="put"?X(X({},p),{keys:y}):X({},p),p.type!=="delete"&&(p.values=Rn([],p.values,!0)),p.keys&&(p.keys=Rn([],p.keys,!0)),Ma(n,p,y).then(function(E){var w=y.map(function(b,k){var g=E[k],x={onerror:null,onsuccess:null};if(p.type==="delete")s.fire.call(x,b,g,h);else if(p.type==="add"||g===void 0){var K=l.fire.call(x,b,p.values[k],h);b==null&&K!=null&&(b=K,p.keys[k]=b,r.outbound||we(p.values[k],r.keyPath,b))}else{var S=kr(g,p.values[k]),C=c.fire.call(x,S,b,g,h);if(C){var D=p.values[k];Object.keys(C).forEach(function(N){be(D,N)?D[N]=C[N]:we(D,N,C[N])})}}return x});return n.mutate(p).then(function(b){for(var k=b.failures,g=b.results,x=b.numFailures,K=b.lastResult,S=0;S<y.length;++S){var C=g?g[S]:y[S],D=w[S];C==null?D.onerror&&D.onerror(k[S]):D.onsuccess&&D.onsuccess(p.type==="put"&&E[S]?p.values[S]:C)}return{failures:k,results:g,numFailures:x,lastResult:K}}).catch(function(b){return w.forEach(function(k){return k.onerror&&k.onerror(b)}),Promise.reject(b)})})}function d(p){return m(p.trans,p.range,1e4)}function m(p,h,y){return n.query({trans:p,values:!1,query:{index:r,range:h},limit:y}).then(function(E){var w=E.result;return f({type:"delete",keys:w,trans:p}).then(function(b){return b.numFailures>0?Promise.reject(b.failures[0]):w.length<y?{failures:[],numFailures:0,lastResult:void 0}:m(p,X(X({},h),{lower:w[w.length-1],lowerOpen:!0}),y)})})}}});return i}})}};function Ma(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function Wi(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,o=0;i<t.keys.length&&o<e.length;++i)de(t.keys[i],e[o])===0&&(r.push(n?Tt(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch{return null}}var ja={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return X(X({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=Wi(r.keys,r.trans._cache,r.cache==="clone");return i?T.resolve(i):n.getMany(r).then(function(o){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?Tt(o):o},o})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},In;function Er(e){return!("from"in e)}var Ie=function(e,t){if(this)he(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new Ie;return e&&"d"in e&&he(n,e),n}};ut(Ie.prototype,(In={add:function(e){return dn(this,e),this},addKey:function(e){return Pt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return Pt(t,n,n)}),this}},In[Bn]=function(){return er(this)},In));function Pt(e,t,n){var r=de(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(Er(e))return he(e,{from:t,to:n,d:1});var i=e.l,o=e.r;if(de(n,e.from)<0)return i?Pt(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},qr(e);if(de(t,e.to)>0)return o?Pt(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},qr(e);de(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),de(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var a=!e.r;i&&!e.l&&dn(e,i),o&&a&&dn(e,o)}}function dn(e,t){function n(r,i){var o=i.from,a=i.to,u=i.l,s=i.r;Pt(r,o,a),u&&n(r,u),s&&n(r,s)}Er(t)||n(e,t)}function Fa(e,t){var n=er(t),r=n.next();if(r.done)return!1;for(var i=r.value,o=er(e),a=o.next(i.from),u=a.value;!r.done&&!a.done;){if(de(u.from,i.to)<=0&&de(u.to,i.from)>=0)return!0;de(i.from,u.from)<0?i=(r=n.next(u.from)).value:u=(a=o.next(i.from)).value}return!1}function er(e){var t=Er(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&de(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||de(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function qr(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var o=i==="r"?"l":"r",a=X({},e),u=e[i];e.from=u.from,e.to=u.to,e[i]=u[i],a[i]=u[o],e[o]=a,a.d=Jr(a)}e.d=Jr(e)}function Jr(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}var La={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new Ie(e.MIN_KEY,e.MAX_KEY);return X(X({},e),{table:function(r){var i=e.table(r),o=i.schema,a=o.primaryKey,u=a.extractKey,s=a.outbound,l=X(X({},i),{mutate:function(d){var m=d.trans,p=m.mutatedParts||(m.mutatedParts={}),h=function(K){var S="idb://"+t+"/"+r+"/"+K;return p[S]||(p[S]=new Ie)},y=h(""),E=h(":dels"),w=d.type,b=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[],k=b[0],g=b[1],x=d.trans._cache;return i.mutate(d).then(function(K){if(ce(k)){w!=="delete"&&(k=K.results),y.addKeys(k);var S=Wi(k,x);!S&&w!=="add"&&E.addKeys(k),(S||g)&&Na(h,o,S,g)}else if(k){var C={from:k.lower,to:k.upper};E.add(C),y.add(C)}else y.add(n),E.add(n),o.indexes.forEach(function(D){return h(D.name).add(n)});return K})}}),c=function(d){var m,p,h=d.query,y=h.index,E=h.range;return[y,new Ie((m=E.lower)!==null&&m!==void 0?m:e.MIN_KEY,(p=E.upper)!==null&&p!==void 0?p:e.MAX_KEY)]},f={get:function(d){return[a,new Ie(d.key)]},getMany:function(d){return[a,new Ie().addKeys(d.keys)]},count:c,query:c,openCursor:c};return oe(f).forEach(function(d){l[d]=function(m){var p=M.subscr;if(p){var h=function(x){var K="idb://"+t+"/"+r+"/"+x;return p[K]||(p[K]=new Ie)},y=h(""),E=h(":dels"),w=f[d](m),b=w[0],k=w[1];if(h(b.name||"").add(k),!b.isPrimaryKey)if(d==="count")E.add(n);else{var g=d==="query"&&s&&m.values&&i.query(X(X({},m),{values:!1}));return i[d].apply(this,arguments).then(function(x){if(d==="query"){if(s&&m.values)return g.then(function(D){var N=D.result;return y.addKeys(N),x});var K=m.values?x.result.map(u):x.result;m.values?y.addKeys(K):E.addKeys(K)}else if(d==="openCursor"){var S=x,C=m.values;return S&&Object.create(S,{key:{get:function(){return E.addKey(S.primaryKey),S.key}},primaryKey:{get:function(){var D=S.primaryKey;return E.addKey(D),D}},value:{get:function(){return C&&y.addKey(S.primaryKey),S.value}}})}return x})}}return i[d].apply(this,arguments)}}),l}})}};function Na(e,t,n,r){function i(o){var a=e(o.name||"");function u(l){return l!=null?o.extractKey(l):null}var s=function(l){return o.multiEntry&&ce(l)?l.forEach(function(c){return a.addKey(c)}):a.addKey(l)};(n||r).forEach(function(l,c){var f=n&&u(n[c]),d=r&&u(r[c]);de(f,d)!==0&&(f!=null&&s(f),d!=null&&s(d))})}t.indexes.forEach(i)}var xr=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=X({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Z,dbReadyPromise:null,cancelOpen:Z,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};a.dbReadyPromise=new T(function(u){a.dbReadyResolve=u}),a.openCanceller=new T(function(u,s){a.cancelOpen=s}),this._state=a,this.name=t,this.on=Bt(this,"populate","blocked","versionchange","close",{ready:[dr,Z]}),this.on.ready.subscribe=vi(this.on.ready.subscribe,function(u){return function(s,l){e.vip(function(){var c=r._state;if(c.openComplete)c.dbOpenError||T.resolve().then(s),l&&u(s);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(s),l&&u(s);else{u(s);var f=r;l||u(function d(){f.on.ready.unsubscribe(s),f.on.ready.unsubscribe(d)})}})}}),this.Collection=ta(this),this.Table=Xo(this),this.Transaction=la(this),this.Version=Sa(this),this.WhereClause=ua(this),this.on("versionchange",function(u){u.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(u){!u.newVersion||u.newVersion<u.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+u.oldVersion/10)}),this._maxKey=Kt(n.IDBKeyRange),this._createTransaction=function(u,s,l,c){return new r.Transaction(u,s,l,r._options.chromeTransactionDurability,c)},this._fireOnBlocked=function(u){r.on("blocked").fire(u),bt.filter(function(s){return s.name===r.name&&s!==r&&!s._state.vcFired}).map(function(s){return s.on("versionchange").fire(u)})},this.use(Da),this.use(Ba),this.use(La),this.use(ja),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach(function(u){return u(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new F.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new F.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(ya),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||M.letThrough||this._vip)?t():new T(function(r,i){if(n._state.openComplete)return i(new F.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new F.DatabaseClosed);return}n.open().catch(Z)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,o=t.name;o&&this.unuse({stack:n,name:o});var a=this._middlewares[n]||(this._middlewares[n]=[]);return a.push({stack:n,create:r,level:i==null?10:i,name:o}),a.sort(function(u,s){return u.level-s.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(o){return i?o.create!==i:r?o.name!==r:!1})),this},e.prototype.open=function(){return Pa(this)},e.prototype._close=function(){var t=this._state,n=bt.indexOf(this);if(n>=0&&bt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new T(function(r){t.dbReadyResolve=r}),t.openCanceller=new T(function(r,i){t.cancelOpen=i})},e.prototype.close=function(){this._close();var t=this._state;this._options.autoOpen=!1,t.dbOpenError=new F.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)},e.prototype.delete=function(){var t=this,n=arguments.length>0,r=this._state;return new T(function(i,o){var a=function(){t.close();var u=t._deps.indexedDB.deleteDatabase(t.name);u.onsuccess=re(function(){Ca(t._deps,t.name),i()}),u.onerror=Ee(o),u.onblocked=t._fireOnBlocked};if(n)throw new F.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(a):a()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return oe(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=Ta.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,o=M.trans;(!o||o.db!==this||t.indexOf("!")!==-1)&&(o=null);var a=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var u,s;try{if(s=n.map(function(c){var f=c instanceof i.Table?c.name:c;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),t=="r"||t===kn)u=kn;else if(t=="rw"||t==En)u=En;else throw new F.InvalidArgument("Invalid transaction mode: "+t);if(o){if(o.mode===kn&&u===En)if(a)o=null;else throw new F.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o&&s.forEach(function(c){if(o&&o.storeNames.indexOf(c)===-1)if(a)o=null;else throw new F.SubTransaction("Table "+c+" not included in parent transaction.")}),a&&o&&!o.active&&(o=null)}}catch(c){return o?o._promise(null,function(f,d){d(c)}):ue(c)}var l=$i.bind(null,this,u,s,o,r);return o?o._promise(u,l,"lock"):M.trans?ft(M.transless,function(){return i._whenReady(l)}):this._whenReady(l)},e.prototype.table=function(t){if(!be(this._allTables,t))throw new F.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),$a=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",Wa=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[$a]=function(){return this},e}();function Vi(e,t){return oe(t).forEach(function(n){var r=e[n]||(e[n]=new Ie);dn(r,t[n])}),e}function Va(e){return new Wa(function(t){var n=lr(e);function r(m){n&&ct();var p=function(){return Ne(e,{subscr:m,trans:null})},h=M.trans?ft(M.transless,p):p();return n&&h.then(De,De),h}var i=!1,o={},a={},u={get closed(){return i},unsubscribe:function(){i=!0,We.storagemutated.unsubscribe(f)}};t.start&&t.start(u);var s=!1,l=!1;function c(){return oe(a).some(function(m){return o[m]&&Fa(o[m],a[m])})}var f=function(m){Vi(o,m),c()&&d()},d=function(){if(!(s||i)){o={};var m={},p=r(m);l||(We(Ct,f),l=!0),s=!0,Promise.resolve(p).then(function(h){s=!1,!i&&(c()?d():(o={},a=m,t.next&&t.next(h)))},function(h){s=!1,t.error&&t.error(h),u.unsubscribe()})}};return d(),u})}var tr;try{tr={indexedDB:te.indexedDB||te.mozIndexedDB||te.webkitIndexedDB||te.msIndexedDB,IDBKeyRange:te.IDBKeyRange||te.webkitIDBKeyRange}}catch{tr={indexedDB:null,IDBKeyRange:null}}var Ue=xr;ut(Ue,X(X({},yn),{delete:function(e){var t=new Ue(e,{addons:[]});return t.delete()},exists:function(e){return new Ue(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return Aa(Ue.dependencies).then(e)}catch{return ue(new F.MissingAPI)}},defineClass:function(){function e(t){he(this,t)}return e},ignoreTransaction:function(e){return M.trans?ft(M.transless,e):e()},vip:Jn,async:function(e){return function(){try{var t=Zn(e.apply(this,arguments));return!t||typeof t.then!="function"?T.resolve(t):t}catch(n){return ue(n)}}},spawn:function(e,t,n){try{var r=Zn(e.apply(n,t||[]));return!r||typeof r.then!="function"?T.resolve(r):r}catch(i){return ue(i)}},currentTransaction:{get:function(){return M.trans||null}},waitFor:function(e,t){var n=T.resolve(typeof e=="function"?Ue.ignoreTransaction(e):e).timeout(t||6e4);return M.trans?M.trans.waitFor(n):n},Promise:T,debug:{get:function(){return xe},set:function(e){_i(e,e==="dexie"?function(){return!0}:Oi)}},derive:st,extend:he,props:ut,override:vi,Events:Bt,on:We,liveQuery:Va,extendObservabilitySet:Vi,getByKeyPath:Te,setByKeyPath:we,delByKeyPath:wo,shallowClone:mi,deepClone:Tt,getObjectDiff:kr,cmp:de,asap:pi,minKey:Hn,addons:[],connections:bt,errnames:fr,dependencies:tr,semVer:zr,version:zr.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})}));Ue.maxKey=Kt(Ue.dependencies.IDBKeyRange);typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(We(Ct,function(e){if(!Pe){var t;mn?(t=document.createEvent("CustomEvent"),t.initCustomEvent(Fe,!0,!0,e)):t=new CustomEvent(Fe,{detail:e}),Pe=!0,dispatchEvent(t),Pe=!1}}),addEventListener(Fe,function(e){var t=e.detail;Pe||hn(t)}));function hn(e){var t=Pe;try{Pe=!0,We.storagemutated.fire(e)}finally{Pe=t}}var Pe=!1;if(typeof BroadcastChannel!="undefined"){var Zr=new BroadcastChannel(Fe);We(Ct,function(e){Pe||Zr.postMessage(e)}),Zr.onmessage=function(e){e.data&&hn(e.data)}}else if(typeof self!="undefined"&&typeof navigator!="undefined"){We(Ct,function(e){try{Pe||(typeof localStorage!="undefined"&&localStorage.setItem(Fe,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&Rn([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(t){return t.postMessage({type:Fe,changedParts:e})}))}catch{}}),typeof addEventListener!="undefined"&&addEventListener("storage",function(e){if(e.key===Fe){var t=JSON.parse(e.newValue);t&&hn(t.changedParts)}});var ei=self.document&&navigator.serviceWorker;ei&&ei.addEventListener("message",Ua)}function Ua(e){var t=e.data;t&&t.type===Fe&&hn(t.changedParts)}T.rejectionMapper=Po;_i(xe,Oi);class ze{constructor(t,n,r,i,o){_e(this,"id");_e(this,"carbohydrate");_e(this,"cholesterol");_e(this,"fat");_e(this,"protein");_e(this,"sodium");this.carbohydrate=t,this.cholesterol=n,this.fat=r,this.protein=i,this.sodium=o}}class Ui{constructor(t,n){_e(this,"name");_e(this,"nutrition");this.name=t,this.nutrition=n}}class za extends xr{constructor(n){super(n);_e(this,"foodItems");_e(this,"nutritionValues");this.version(1).stores({foodItems:"name",nutritionValues:"++id"})}}const pe=new za("main");pe.foodItems.mapToClass(Ui);pe.nutritionValues.mapToClass(ze);function Ha(e){var ne,ie,J,ee,ye;let t,n,r=((ne=e[1])==null?void 0:ne.carbohydrate)+"",i,o,a,u,s,l=((ie=e[1])==null?void 0:ie.cholesterol)+"",c,f,d,m,p,h=((J=e[1])==null?void 0:J.fat)+"",y,E,w,b,k,g=((ee=e[1])==null?void 0:ee.protein)+"",x,K,S,C,D,N=((ye=e[1])==null?void 0:ye.sodium)+"",$,B,L,R,Y,G,O,H,Q;return{c(){t=I("p"),n=j("Carbohydrate: "),i=j(r),o=j("g"),a=P(),u=I("p"),s=j("Cholesterol: "),c=j(l),f=j("mg"),d=P(),m=I("p"),p=j("Fat: "),y=j(h),E=j("g"),w=P(),b=I("p"),k=j("Protein: "),x=j(g),K=j("g"),S=P(),C=I("p"),D=j("Sodium: "),$=j(N),B=j("mg"),L=P(),R=I("div"),Y=I("button"),Y.textContent="Consume",G=P(),O=I("button"),O.textContent="Remove",A(Y,"class","button-add svelte-1k0jh6l"),A(O,"class","button-remove svelte-1k0jh6l"),A(R,"class","food_item-buttons svelte-1k0jh6l")},m(V,q){U(V,t,q),v(t,n),v(t,i),v(t,o),U(V,a,q),U(V,u,q),v(u,s),v(u,c),v(u,f),U(V,d,q),U(V,m,q),v(m,p),v(m,y),v(m,E),U(V,w,q),U(V,b,q),v(b,k),v(b,x),v(b,K),U(V,S,q),U(V,C,q),v(C,D),v(C,$),v(C,B),U(V,L,q),U(V,R,q),v(R,Y),v(R,G),v(R,O),H||(Q=[Le(Y,"click",e[2]),Le(O,"click",e[3])],H=!0)},p(V,q){var ve,se,ke,dt,ht;q&2&&r!==(r=((ve=V[1])==null?void 0:ve.carbohydrate)+"")&&rt(i,r),q&2&&l!==(l=((se=V[1])==null?void 0:se.cholesterol)+"")&&rt(c,l),q&2&&h!==(h=((ke=V[1])==null?void 0:ke.fat)+"")&&rt(y,h),q&2&&g!==(g=((dt=V[1])==null?void 0:dt.protein)+"")&&rt(x,g),q&2&&N!==(N=((ht=V[1])==null?void 0:ht.sodium)+"")&&rt($,N)},d(V){V&&W(t),V&&W(a),V&&W(u),V&&W(d),V&&W(m),V&&W(w),V&&W(b),V&&W(S),V&&W(C),V&&W(L),V&&W(R),H=!1,Je(Q)}}}function Ya(e){let t,n={ctx:e,current:null,token:null,hasCatch:!1,pending:eu,then:Qa,catch:Ga,value:5};return ir(pe.nutritionValues.get(1),n),{c(){t=vn(),n.block.c()},m(r,i){U(r,t,i),n.block.m(r,n.anchor=i),n.mount=()=>t.parentNode,n.anchor=t},p(r,i){e=r,or(n,e,i)},d(r){r&&W(t),n.block.d(r),n.token=null,n=null}}}function Ga(e){return{c:z,m:z,p:z,d:z}}function Qa(e){let t,n={ctx:e,current:null,token:null,hasCatch:!1,pending:Za,then:qa,catch:Xa,value:6};return ir(pe.nutritionValues.get(2),n),{c(){t=vn(),n.block.c()},m(r,i){U(r,t,i),n.block.m(r,n.anchor=i),n.mount=()=>t.parentNode,n.anchor=t},p(r,i){e=r,or(n,e,i)},d(r){r&&W(t),n.block.d(r),n.token=null,n=null}}}function Xa(e){return{c:z,m:z,p:z,d:z}}function qa(e){let t,n=e[5]!=null&&e[6]!=null&&Ja(e);return{c(){n&&n.c(),t=vn()},m(r,i){n&&n.m(r,i),U(r,t,i)},p(r,i){r[5]!=null&&r[6]!=null&&n.p(r,i)},d(r){n&&n.d(r),r&&W(t)}}}function Ja(e){var Mr,jr;let t,n,r,i=e[6].carbohydrate+"",o,a,u=e[5].carbohydrate+"",s,l,c,f,d=e[6].carbohydrate>=e[5].carbohydrate?"\u2713":"\u2715",m,p,h,y,E,w=e[6].cholesterol+"",b,k,g=e[5].cholesterol+"",x,K,S,C,D=((Mr=e[6])==null?void 0:Mr.cholesterol)>=((jr=e[5])==null?void 0:jr.cholesterol)?"\u2713":"\u2715",N,$,B,L,R,Y=e[6].fat+"",G,O,H=e[5].fat+"",Q,ne,ie,J,ee=e[6].fat>=e[5].fat?"\u2713":"\u2715",ye,V,q,ve,se,ke=e[6].protein+"",dt,ht,Hi=e[5].protein+"",Sr,Ar,Ir,jt,Yi=e[6].protein>=e[5].protein?"\u2713":"\u2715",Cr,bn,Oe,Be,Kr,Gi=e[6].sodium+"",Pr,Tr,Qi=e[5].sodium+"",Rr,Dr,Or,Ft,Xi=e[6].sodium>=e[5].sodium?"\u2713":"\u2715",Br;return{c(){t=I("div"),n=I("p"),r=j("Carbohydrate: "),o=j(i),a=j("g / "),s=j(u),l=j("g"),c=P(),f=I("p"),m=j(d),p=P(),h=I("div"),y=I("p"),E=j("Cholesterol: "),b=j(w),k=j("mg / "),x=j(g),K=j("mg"),S=P(),C=I("p"),N=j(D),$=P(),B=I("div"),L=I("p"),R=j("Fat: "),G=j(Y),O=j("g / "),Q=j(H),ne=j("g"),ie=P(),J=I("p"),ye=j(ee),V=P(),q=I("div"),ve=I("p"),se=j("Protein: "),dt=j(ke),ht=j("g / "),Sr=j(Hi),Ar=j("g"),Ir=P(),jt=I("p"),Cr=j(Yi),bn=P(),Oe=I("div"),Be=I("p"),Kr=j("Sodium: "),Pr=j(Gi),Tr=j("mg / "),Rr=j(Qi),Dr=j("mg"),Or=P(),Ft=I("p"),Br=j(Xi),A(n,"class","svelte-1k0jh6l"),A(f,"class","svelte-1k0jh6l"),A(t,"class","goal-item svelte-1k0jh6l"),Ve(t,"completed",e[6].carbohydrate>=e[5].carbohydrate),A(y,"class","svelte-1k0jh6l"),A(C,"class","svelte-1k0jh6l"),A(h,"class","goal-item svelte-1k0jh6l"),Ve(h,"completed",e[6].cholesterol>=e[5].cholesterol),A(L,"class","svelte-1k0jh6l"),A(J,"class","svelte-1k0jh6l"),A(B,"class","goal-item svelte-1k0jh6l"),Ve(B,"completed",e[6].fat>=e[5].fat),A(ve,"class","svelte-1k0jh6l"),A(jt,"class","svelte-1k0jh6l"),A(q,"class","goal-item svelte-1k0jh6l"),Ve(q,"completed",e[6].protein>=e[5].protein),A(Be,"class","svelte-1k0jh6l"),A(Ft,"class","svelte-1k0jh6l"),A(Oe,"class","goal-item svelte-1k0jh6l"),Ve(Oe,"completed",e[6].sodium>=e[5].sodium)},m(ae,Se){U(ae,t,Se),v(t,n),v(n,r),v(n,o),v(n,a),v(n,s),v(n,l),v(t,c),v(t,f),v(f,m),U(ae,p,Se),U(ae,h,Se),v(h,y),v(y,E),v(y,b),v(y,k),v(y,x),v(y,K),v(h,S),v(h,C),v(C,N),U(ae,$,Se),U(ae,B,Se),v(B,L),v(L,R),v(L,G),v(L,O),v(L,Q),v(L,ne),v(B,ie),v(B,J),v(J,ye),U(ae,V,Se),U(ae,q,Se),v(q,ve),v(ve,se),v(ve,dt),v(ve,ht),v(ve,Sr),v(ve,Ar),v(q,Ir),v(q,jt),v(jt,Cr),U(ae,bn,Se),U(ae,Oe,Se),v(Oe,Be),v(Be,Kr),v(Be,Pr),v(Be,Tr),v(Be,Rr),v(Be,Dr),v(Oe,Or),v(Oe,Ft),v(Ft,Br)},p:z,d(ae){ae&&W(t),ae&&W(p),ae&&W(h),ae&&W($),ae&&W(B),ae&&W(V),ae&&W(q),ae&&W(bn),ae&&W(Oe)}}}function Za(e){return{c:z,m:z,p:z,d:z}}function eu(e){return{c:z,m:z,p:z,d:z}}function tu(e){let t,n,r,i;function o(s,l){return s[1]===null?Ya:Ha}let a=o(e),u=a(e);return{c(){t=I("div"),n=I("h1"),r=j(e[0]),i=P(),u.c(),A(n,"class","svelte-1k0jh6l"),A(t,"class","hover food_item svelte-1k0jh6l"),Ve(t,"center",e[1]===null)},m(s,l){U(s,t,l),v(t,n),v(n,r),v(t,i),u.m(t,null)},p(s,[l]){l&1&&rt(r,s[0]),a===(a=o(s))&&u?u.p(s,l):(u.d(1),u=a(s),u&&(u.c(),u.m(t,null))),l&2&&Ve(t,"center",s[1]===null)},i:z,o:z,d(s){s&&W(t),u.d()}}}function nu(e,t,n){let{name:r="Goal"}=t,{nutrition:i=null}=t;const o=fo();async function a(){const s=await pe.nutritionValues.get(2);let l=new ze(s.carbohydrate+i.carbohydrate,s.cholesterol+i.cholesterol,s.fat+i.fat,s.protein+i.protein,s.sodium+i.sodium);l.id=2,pe.nutritionValues.put(l),o("goal")}async function u(){await pe.foodItems.delete(r),o("items")}return e.$$set=s=>{"name"in s&&n(0,r=s.name),"nutrition"in s&&n(1,i=s.nutrition)},[r,i,a,u]}class zi extends ur{constructor(t){super(),ar(this,t,nu,tu,at,{name:0,nutrition:1})}}function ru(e){let t,n,r,i;const o=e[2].default,a=io(o,e,e[1],null);return{c(){t=I("div"),a&&a.c(),A(t,"id",e[0]),A(t,"class","svelte-1v6tlyl")},m(u,s){U(u,t,s),a&&a.m(t,null),n=!0,r||(i=Le(t,"click",Ht(iu)),r=!0)},p(u,[s]){a&&a.p&&(!n||s&2)&&ao(a,o,u,u[1],n?oo(o,u[1],s,null):uo(u[1]),null),(!n||s&1)&&A(t,"id",u[0])},i(u){n||(fe(a,u),n=!0)},o(u){ge(a,u),n=!1},d(u){u&&W(t),a&&a.d(u),r=!1,i()}}}const iu=()=>{};function ou(e,t,n){let{$$slots:r={},$$scope:i}=t,{id_:o=(Math.random()+1).toString(36).substring(3)}=t;return e.$$set=a=>{"id_"in a&&n(0,o=a.id_),"$$scope"in a&&n(1,i=a.$$scope)},[o,i,r]}class ti extends ur{constructor(t){super(),ar(this,t,ou,ru,at,{id_:0})}}function ni(e,t,n){const r=e.slice();return r[13]=t[n],r}function au(e){let t,n,r,i,o,a,u,s,l,c,f,d,m,p,h,y,E,w,b,k,g,x,K,S,C,D,N,$,B,L,R,Y,G,O,H,Q,ne,ie,J,ee,ye,V,q,ve;return{c(){t=I("h2"),t.textContent="Add Item",n=P(),r=I("br"),i=P(),o=I("form"),a=I("input"),u=P(),s=I("br"),l=P(),c=I("br"),f=P(),d=I("input"),m=P(),p=I("br"),h=P(),y=I("br"),E=P(),w=I("input"),b=P(),k=I("br"),g=P(),x=I("br"),K=P(),S=I("input"),C=P(),D=I("br"),N=P(),$=I("br"),B=P(),L=I("input"),R=P(),Y=I("br"),G=P(),O=I("br"),H=P(),Q=I("input"),ne=P(),ie=I("br"),J=P(),ee=I("br"),ye=P(),V=I("button"),V.textContent="Add",A(a,"autocomplete","off"),A(a,"name","name"),A(a,"placeholder","Name"),A(a,"type","text"),A(a,"class","svelte-1vd6ulv"),A(d,"name","carbohydrate"),A(d,"placeholder","Carbohydrate (g)"),A(d,"type","number"),A(d,"class","svelte-1vd6ulv"),A(w,"name","cholesterol"),A(w,"placeholder","Cholesterol (mg)"),A(w,"type","number"),A(w,"class","svelte-1vd6ulv"),A(S,"name","fat"),A(S,"placeholder","Fat (g)"),A(S,"type","number"),A(S,"class","svelte-1vd6ulv"),A(L,"name","protein"),A(L,"placeholder","Protein (g)"),A(L,"type","number"),A(L,"class","svelte-1vd6ulv"),A(Q,"name","sodium"),A(Q,"placeholder","Sodium (mg)"),A(Q,"type","number"),A(Q,"class","svelte-1vd6ulv"),A(V,"type","submit"),A(V,"class","svelte-1vd6ulv")},m(se,ke){U(se,t,ke),U(se,n,ke),U(se,r,ke),U(se,i,ke),U(se,o,ke),v(o,a),v(o,u),v(o,s),v(o,l),v(o,c),v(o,f),v(o,d),v(o,m),v(o,p),v(o,h),v(o,y),v(o,E),v(o,w),v(o,b),v(o,k),v(o,g),v(o,x),v(o,K),v(o,S),v(o,C),v(o,D),v(o,N),v(o,$),v(o,B),v(o,L),v(o,R),v(o,Y),v(o,G),v(o,O),v(o,H),v(o,Q),v(o,ne),v(o,ie),v(o,J),v(o,ee),v(o,ye),v(o,V),q||(ve=Le(V,"click",fi(e[2])),q=!0)},p:z,d(se){se&&W(t),se&&W(n),se&&W(r),se&&W(i),se&&W(o),q=!1,ve()}}}function uu(e){let t,n,r,i,o,a,u,s,l,c,f,d,m,p,h,y,E,w,b,k,g,x,K,S,C,D,N,$,B,L,R,Y,G,O,H,Q,ne,ie;return{c(){t=I("h2"),t.textContent="Edit Goal",n=P(),r=I("br"),i=P(),o=I("form"),a=I("input"),u=P(),s=I("br"),l=P(),c=I("br"),f=P(),d=I("input"),m=P(),p=I("br"),h=P(),y=I("br"),E=P(),w=I("input"),b=P(),k=I("br"),g=P(),x=I("br"),K=P(),S=I("input"),C=P(),D=I("br"),N=P(),$=I("br"),B=P(),L=I("input"),R=P(),Y=I("br"),G=P(),O=I("br"),H=P(),Q=I("button"),Q.textContent="Edit",A(a,"name","carbohydrate"),A(a,"placeholder","Carbohydrate (g)"),A(a,"type","number"),A(a,"class","svelte-1vd6ulv"),A(d,"name","cholesterol"),A(d,"placeholder","Cholesterol (mg)"),A(d,"type","number"),A(d,"class","svelte-1vd6ulv"),A(w,"name","fat"),A(w,"placeholder","Fat (g)"),A(w,"type","number"),A(w,"class","svelte-1vd6ulv"),A(S,"name","protein"),A(S,"placeholder","Protein (g)"),A(S,"type","number"),A(S,"class","svelte-1vd6ulv"),A(L,"name","sodium"),A(L,"placeholder","Sodium (mg)"),A(L,"type","number"),A(L,"class","svelte-1vd6ulv"),A(Q,"type","submit"),A(Q,"class","svelte-1vd6ulv")},m(J,ee){U(J,t,ee),U(J,n,ee),U(J,r,ee),U(J,i,ee),U(J,o,ee),v(o,a),v(o,u),v(o,s),v(o,l),v(o,c),v(o,f),v(o,d),v(o,m),v(o,p),v(o,h),v(o,y),v(o,E),v(o,w),v(o,b),v(o,k),v(o,g),v(o,x),v(o,K),v(o,S),v(o,C),v(o,D),v(o,N),v(o,$),v(o,B),v(o,L),v(o,R),v(o,Y),v(o,G),v(o,O),v(o,H),v(o,Q),ne||(ie=Le(Q,"click",fi(e[3])),ne=!0)},p:z,d(J){J&&W(t),J&&W(n),J&&W(r),J&&W(i),J&&W(o),ne=!1,ie()}}}function ri(e){let t,n;return t=new zi({}),{c(){rn(t.$$.fragment)},m(r,i){kt(t,r,i),n=!0},p:z,i(r){n||(fe(t.$$.fragment,r),n=!0)},o(r){ge(t.$$.fragment,r),n=!1},d(r){Et(t,r)}}}function su(e){return{c:z,m:z,p:z,i:z,o:z,d:z}}function lu(e){let t,n,r=e[12],i=[];for(let a=0;a<r.length;a+=1)i[a]=ii(ni(e,r,a));const o=a=>ge(i[a],1,1,()=>{i[a]=null});return{c(){for(let a=0;a<i.length;a+=1)i[a].c();t=vn()},m(a,u){for(let s=0;s<i.length;s+=1)i[s].m(a,u);U(a,t,u),n=!0},p(a,u){if(u&3){r=a[12];let s;for(s=0;s<r.length;s+=1){const l=ni(a,r,s);i[s]?(i[s].p(l,u),fe(i[s],1)):(i[s]=ii(l),i[s].c(),fe(i[s],1),i[s].m(t.parentNode,t))}for(tn(),s=r.length;s<i.length;s+=1)o(s);nn()}},i(a){if(!n){for(let u=0;u<r.length;u+=1)fe(i[u]);n=!0}},o(a){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)ge(i[u]);n=!1},d(a){so(i,a),a&&W(t)}}}function ii(e){let t,n;return t=new zi({props:{name:e[13].name,nutrition:e[13].nutrition}}),t.$on("goal",e[8]),t.$on("items",e[9]),{c(){rn(t.$$.fragment)},m(r,i){kt(t,r,i),n=!0},p:z,i(r){n||(fe(t.$$.fragment,r),n=!0)},o(r){ge(t.$$.fragment,r),n=!1},d(r){Et(t,r)}}}function cu(e){return{c:z,m:z,p:z,i:z,o:z,d:z}}function oi(e){let t,n,r={ctx:e,current:null,token:null,hasCatch:!1,pending:cu,then:lu,catch:su,value:12,blocks:[,,,]};return ir(pe.foodItems.toArray(),r),{c(){t=I("div"),r.block.c(),A(t,"id","items"),A(t,"class","svelte-1vd6ulv")},m(i,o){U(i,t,o),r.block.m(t,r.anchor=null),r.mount=()=>t,r.anchor=null,n=!0},p(i,o){e=i,or(r,e,o)},i(i){n||(fe(r.block),n=!0)},o(i){for(let o=0;o<3;o+=1){const a=r.blocks[o];ge(a)}n=!1},d(i){i&&W(t),r.block.d(),r.token=null,r=null}}}function fu(e){let t,n,r,i,o,a,u,s,l,c,f,d=e[0],m,p,h,y,E,w,b,k,g,x,K,S,C,D,N,$=e[1],B,L,R;t=new ti({props:{id_:"overlay-add",$$slots:{default:[au]},$$scope:{ctx:e}}}),r=new ti({props:{id_:"overlay-goal",$$slots:{default:[uu]},$$scope:{ctx:e}}});let Y=ri(),G=oi(e);return{c(){rn(t.$$.fragment),n=P(),rn(r.$$.fragment),i=P(),o=I("div"),a=P(),u=I("main"),s=I("br"),l=P(),c=I("br"),f=P(),Y.c(),m=P(),p=I("br"),h=P(),y=I("button"),y.textContent="Add Item",E=P(),w=I("button"),w.textContent="Edit Goal",b=P(),k=I("button"),k.textContent="Reset",g=P(),x=I("br"),K=P(),S=I("br"),C=P(),D=I("br"),N=P(),G.c(),A(o,"id","shadow"),A(o,"class","svelte-1vd6ulv"),A(y,"class","hover svelte-1vd6ulv"),A(w,"class","hover svelte-1vd6ulv"),A(k,"class","hover svelte-1vd6ulv"),A(u,"class","svelte-1vd6ulv")},m(O,H){kt(t,O,H),U(O,n,H),kt(r,O,H),U(O,i,H),U(O,o,H),U(O,a,H),U(O,u,H),v(u,s),v(u,l),v(u,c),v(u,f),Y.m(u,null),v(u,m),v(u,p),v(u,h),v(u,y),v(u,E),v(u,w),v(u,b),v(u,k),v(u,g),v(u,x),v(u,K),v(u,S),v(u,C),v(u,D),v(u,N),G.m(u,null),B=!0,L||(R=[Le(y,"click",Ht(e[6])),Le(w,"click",Ht(e[7])),Le(k,"click",Ht(e[4]))],L=!0)},p(O,[H]){const Q={};H&65536&&(Q.$$scope={dirty:H,ctx:O}),t.$set(Q);const ne={};H&65536&&(ne.$$scope={dirty:H,ctx:O}),r.$set(ne),H&1&&at(d,d=O[0])?(tn(),ge(Y,1,1,z),nn(),Y=ri(),Y.c(),fe(Y,1),Y.m(u,m)):Y.p(O,H),H&2&&at($,$=O[1])?(tn(),ge(G,1,1,z),nn(),G=oi(O),G.c(),fe(G,1),G.m(u,null)):G.p(O,H)},i(O){B||(fe(t.$$.fragment,O),fe(r.$$.fragment,O),fe(Y),fe(G),B=!0)},o(O){ge(t.$$.fragment,O),ge(r.$$.fragment,O),ge(Y),ge(G),B=!1},d(O){Et(t,O),O&&W(n),Et(r,O),O&&W(i),O&&W(o),O&&W(a),O&&W(u),Y.d(O),G.d(O),L=!1,Je(R)}}}function du(e,t,n){let r=!1,i=!1,o="";async function a(){const h=document.getElementById("overlay-add").children[2].elements,y=h.namedItem("name").value;await pe.foodItems.get(y)===void 0&&await pe.foodItems.add(new Ui(y,new ze(parseInt(h.namedItem("carbohydrate").value),parseInt(h.namedItem("cholesterol").value),parseInt(h.namedItem("fat").value),parseInt(h.namedItem("protein").value),parseInt(h.namedItem("sodium").value)))),n(1,i=!i),document.getElementById("overlay-add").children[2].reset(),s()}async function u(){const h=document.getElementById("overlay-goal").children[2].elements,y=new ze(parseInt(h.namedItem("carbohydrate").value),parseInt(h.namedItem("cholesterol").value),parseInt(h.namedItem("fat").value),parseInt(h.namedItem("protein").value),parseInt(h.namedItem("sodium").value));y.id=1,pe.nutritionValues.put(y),n(0,r=!r),document.getElementById("overlay-goal").children[2].reset(),s()}function s(){o!==""&&(document.getElementById("shadow").style.display="none",document.getElementById(o).style.display="none")}function l(){const h=new ze(0,0,0,0,0);h.id=2,pe.nutritionValues.put(h),n(0,r=!r)}function c(h){document.getElementById("shadow").style.display="block",document.getElementById(h).style.display="block",o=h}return pe.nutritionValues.count().then(h=>{h||(pe.nutritionValues.bulkAdd([new ze(300,300,60,150,2e3),new ze(0,0,0,0,0)]),n(0,r=!r))}),document.body.addEventListener("click",()=>{s()}),[r,i,a,u,l,c,()=>c("overlay-add"),()=>c("overlay-goal"),()=>{n(0,r=!r)},()=>n(1,i=!i)]}class hu extends ur{constructor(t){super(),ar(this,t,du,fu,at,{})}}const nt=[];function ai(e,t=z){let n;const r=new Set;function i(u){if(at(e,u)&&(e=u,n)){const s=!nt.length;for(const l of r)l[1](),nt.push(l,e);if(s){for(let l=0;l<nt.length;l+=2)nt[l][0](nt[l+1]);nt.length=0}}}function o(u){i(u(e))}function a(u,s=z){const l=[u,s];return r.add(l),r.size===1&&(n=t(i)||z),u(e),()=>{r.delete(l),r.size===0&&(n(),n=null)}}return{set:i,update:o,subscribe:a}}try{self["workbox:window:6.5.2"]&&_()}catch{}function nr(e,t){return new Promise(function(n){var r=new MessageChannel;r.port1.onmessage=function(i){n(i.data)},e.postMessage(t,[r.port2])})}function vu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ui(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pu(e,t){var n;if(typeof Symbol=="undefined"||e[Symbol.iterator]==null){if(Array.isArray(e)||(n=function(i,o){if(i){if(typeof i=="string")return ui(i,o);var a=Object.prototype.toString.call(i).slice(8,-1);return a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set"?Array.from(i):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ui(i,o):void 0}}(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(n=e[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.5.2"]&&_()}catch{}var Cn=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})};function Kn(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var vt=function(e,t){this.type=e,Object.assign(this,t)};function zt(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function yu(){}var mu={type:"SKIP_WAITING"};function si(e,t){if(!t)return e&&e.then?e.then(yu):Promise.resolve()}var gu=function(e){var t,n;function r(u,s){var l,c;return s===void 0&&(s={}),(l=e.call(this)||this).nn={},l.tn=0,l.rn=new Cn,l.en=new Cn,l.on=new Cn,l.un=0,l.an=new Set,l.cn=function(){var f=l.fn,d=f.installing;l.tn>0||!Kn(d.scriptURL,l.sn.toString())||performance.now()>l.un+6e4?(l.vn=d,f.removeEventListener("updatefound",l.cn)):(l.hn=d,l.an.add(d),l.rn.resolve(d)),++l.tn,d.addEventListener("statechange",l.ln)},l.ln=function(f){var d=l.fn,m=f.target,p=m.state,h=m===l.vn,y={sw:m,isExternal:h,originalEvent:f};!h&&l.mn&&(y.isUpdate=!0),l.dispatchEvent(new vt(p,y)),p==="installed"?l.wn=self.setTimeout(function(){p==="installed"&&d.waiting===m&&l.dispatchEvent(new vt("waiting",y))},200):p==="activating"&&(clearTimeout(l.wn),h||l.en.resolve(m))},l.dn=function(f){var d=l.hn,m=d!==navigator.serviceWorker.controller;l.dispatchEvent(new vt("controlling",{isExternal:m,originalEvent:f,sw:d,isUpdate:l.mn})),m||l.on.resolve(d)},l.gn=(c=function(f){var d=f.data,m=f.ports,p=f.source;return zt(l.getSW(),function(){l.an.has(p)&&l.dispatchEvent(new vt("message",{data:d,originalEvent:f,ports:m,sw:p}))})},function(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];try{return Promise.resolve(c.apply(this,f))}catch(m){return Promise.reject(m)}}),l.sn=u,l.nn=s,navigator.serviceWorker.addEventListener("message",l.gn),l}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i,o,a=r.prototype;return a.register=function(u){var s=(u===void 0?{}:u).immediate,l=s!==void 0&&s;try{var c=this;return function(f,d){var m=f();return m&&m.then?m.then(d):d(m)}(function(){if(!l&&document.readyState!=="complete")return si(new Promise(function(f){return window.addEventListener("load",f)}))},function(){return c.mn=Boolean(navigator.serviceWorker.controller),c.yn=c.pn(),zt(c.bn(),function(f){c.fn=f,c.yn&&(c.hn=c.yn,c.en.resolve(c.yn),c.on.resolve(c.yn),c.yn.addEventListener("statechange",c.ln,{once:!0}));var d=c.fn.waiting;return d&&Kn(d.scriptURL,c.sn.toString())&&(c.hn=d,Promise.resolve().then(function(){c.dispatchEvent(new vt("waiting",{sw:d,wasWaitingBeforeRegister:!0}))}).then(function(){})),c.hn&&(c.rn.resolve(c.hn),c.an.add(c.hn)),c.fn.addEventListener("updatefound",c.cn),navigator.serviceWorker.addEventListener("controllerchange",c.dn),c.fn})})}catch(f){return Promise.reject(f)}},a.update=function(){try{return this.fn?si(this.fn.update()):void 0}catch(u){return Promise.reject(u)}},a.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},a.messageSW=function(u){try{return zt(this.getSW(),function(s){return nr(s,u)})}catch(s){return Promise.reject(s)}},a.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&nr(this.fn.waiting,mu)},a.pn=function(){var u=navigator.serviceWorker.controller;return u&&Kn(u.scriptURL,this.sn.toString())?u:void 0},a.bn=function(){try{var u=this;return function(s,l){try{var c=s()}catch(f){return l(f)}return c&&c.then?c.then(void 0,l):c}(function(){return zt(navigator.serviceWorker.register(u.sn,u.nn),function(s){return u.un=performance.now(),s})},function(s){throw s})}catch(s){return Promise.reject(s)}},i=r,(o=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&vu(i.prototype,o),r}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(n,r){this.Sn(n).add(r)},t.removeEventListener=function(n,r){this.Sn(n).delete(r)},t.dispatchEvent=function(n){n.target=this;for(var r,i=pu(this.Sn(n.type));!(r=i()).done;)(0,r.value)(n)},t.Sn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},e}());function bu(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisterError:o}=e;let a,u;const s=async(l=!0)=>{l&&(a==null||a.addEventListener("controlling",c=>{c.isUpdate&&window.location.reload()})),u&&u.waiting&&await nr(u.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){a=new gu("/sw.js",{scope:"/",type:"classic"}),a.addEventListener("activated",l=>{l.isUpdate||r==null||r()});{const l=()=>{n==null||n()};a.addEventListener("waiting",l),a.addEventListener("externalwaiting",l)}a.register({immediate:t}).then(l=>{u=l,i==null||i(l)}).catch(l=>{o==null||o(l)})}return s}function _u(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisterError:o}=e,a=ai(!1),u=ai(!1),s=bu({immediate:t,onOfflineReady(){u.set(!0),r==null||r()},onNeedRefresh(){a.set(!0),n==null||n()},onRegistered:i,onRegisterError:o});return{needRefresh:a,offlineReady:u,updateServiceWorker:s}}new hu({target:document.body});_u({immediate:!0});
